<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>HTTP API | EMQX 企业版文档</title><meta name="generator" content="VuePress 1.9.5"><link rel="shortcut icon" type="image/x-icon" href="/docs-images/favicon.ico"><script charset="utf-8" src="/iconfont/iconfont.js"></script><script>(function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2990978,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
      })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><link rel="canonical" href="https://docs.emqx.com/zh/enterprise/latest/advanced/http-api.html"><meta name="docsearch:language" content="zh"><meta name="docsearch:product" content="enterprise"><meta name="docsearch:version" content="latest"><meta name="description" content=""><meta property="og:site_name" content="EMQ Documentation"><meta property="og:title" content="HTTP API"><meta property="og:type" content="website"><meta property="og:url" content="https://docs.emqx.com/zh/enterprise/latest/advanced/http-api.html"><meta name="twitter:title" content="HTTP API"><meta name="twitter:url" content="https://docs.emqx.com/zh/enterprise/latest/advanced/http-api.html"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@EMQTech"><meta name="twitter:creator" content="@EMQTech"><meta name="twitter:image" content="https://www.emqx.com/images/logo_512.png"><meta name="twitter:image:alt" content="EMQ LOGO"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta property="og:image" content="https://www.emqx.com/images/logo_512.png"><link rel="preload" href="/docs-assets/css/0.styles.30944fa5.css" as="style"><link rel="preload" href="/docs-assets/js/app.b7cd69d3.js" as="script"><link rel="preload" href="/docs-assets/js/3.c47ef470.js" as="script"><link rel="preload" href="/docs-assets/js/326.61a5b107.js" as="script"><link rel="prefetch" href="/docs-assets/js/10.f29dcc50.js"><link rel="prefetch" href="/docs-assets/js/100.dd92377e.js"><link rel="prefetch" href="/docs-assets/js/101.78f9bf06.js"><link rel="prefetch" href="/docs-assets/js/102.da58783f.js"><link rel="prefetch" href="/docs-assets/js/103.67a9f630.js"><link rel="prefetch" href="/docs-assets/js/104.7ae47f4c.js"><link rel="prefetch" href="/docs-assets/js/105.585f69dd.js"><link rel="prefetch" href="/docs-assets/js/106.4f8743a7.js"><link rel="prefetch" href="/docs-assets/js/107.fdb81ce0.js"><link rel="prefetch" href="/docs-assets/js/108.558f79eb.js"><link rel="prefetch" href="/docs-assets/js/109.92ec90f3.js"><link rel="prefetch" href="/docs-assets/js/11.083a4a72.js"><link rel="prefetch" href="/docs-assets/js/110.12497c8c.js"><link rel="prefetch" href="/docs-assets/js/111.da4e0d0f.js"><link rel="prefetch" href="/docs-assets/js/112.3baa2211.js"><link rel="prefetch" href="/docs-assets/js/113.1930bc2f.js"><link rel="prefetch" href="/docs-assets/js/114.fa7d5a17.js"><link rel="prefetch" href="/docs-assets/js/115.efdd3556.js"><link rel="prefetch" href="/docs-assets/js/116.acc50eaa.js"><link rel="prefetch" href="/docs-assets/js/117.be3006ad.js"><link rel="prefetch" href="/docs-assets/js/118.0e83888a.js"><link rel="prefetch" href="/docs-assets/js/119.9397114a.js"><link rel="prefetch" href="/docs-assets/js/12.26a38211.js"><link rel="prefetch" href="/docs-assets/js/120.63b3749f.js"><link rel="prefetch" href="/docs-assets/js/121.2a407f9c.js"><link rel="prefetch" href="/docs-assets/js/122.586f2a64.js"><link rel="prefetch" href="/docs-assets/js/123.1311da6e.js"><link rel="prefetch" href="/docs-assets/js/124.0c9e0192.js"><link rel="prefetch" href="/docs-assets/js/125.32b010bd.js"><link rel="prefetch" href="/docs-assets/js/126.52283988.js"><link rel="prefetch" href="/docs-assets/js/127.ee1bc25a.js"><link rel="prefetch" href="/docs-assets/js/128.a5357be3.js"><link rel="prefetch" href="/docs-assets/js/129.e00317a6.js"><link rel="prefetch" href="/docs-assets/js/13.67a3210f.js"><link rel="prefetch" href="/docs-assets/js/130.594772f8.js"><link rel="prefetch" href="/docs-assets/js/131.84acbc82.js"><link rel="prefetch" href="/docs-assets/js/132.52786b4f.js"><link rel="prefetch" href="/docs-assets/js/133.13489431.js"><link rel="prefetch" href="/docs-assets/js/134.07f54db1.js"><link rel="prefetch" href="/docs-assets/js/135.b66135b0.js"><link rel="prefetch" href="/docs-assets/js/136.63cc897d.js"><link rel="prefetch" href="/docs-assets/js/137.f4a7dfb5.js"><link rel="prefetch" href="/docs-assets/js/138.be3bce65.js"><link rel="prefetch" href="/docs-assets/js/139.1e1aa551.js"><link rel="prefetch" href="/docs-assets/js/14.e55026e6.js"><link rel="prefetch" href="/docs-assets/js/140.e5495a15.js"><link rel="prefetch" href="/docs-assets/js/141.36451d38.js"><link rel="prefetch" href="/docs-assets/js/142.a458abf0.js"><link rel="prefetch" href="/docs-assets/js/143.7fba9b1f.js"><link rel="prefetch" href="/docs-assets/js/144.7f31b83b.js"><link rel="prefetch" href="/docs-assets/js/145.13d03034.js"><link rel="prefetch" href="/docs-assets/js/146.ae05364a.js"><link rel="prefetch" href="/docs-assets/js/147.680be9e1.js"><link rel="prefetch" href="/docs-assets/js/148.ce47f123.js"><link rel="prefetch" href="/docs-assets/js/149.d0a6cbee.js"><link rel="prefetch" href="/docs-assets/js/15.b43872d6.js"><link rel="prefetch" href="/docs-assets/js/150.77a52459.js"><link rel="prefetch" href="/docs-assets/js/151.9a55ba76.js"><link rel="prefetch" href="/docs-assets/js/152.4f9d25bd.js"><link rel="prefetch" href="/docs-assets/js/153.09850384.js"><link rel="prefetch" href="/docs-assets/js/154.1dc45a79.js"><link rel="prefetch" href="/docs-assets/js/155.9a359e42.js"><link rel="prefetch" href="/docs-assets/js/156.7ba55f53.js"><link rel="prefetch" href="/docs-assets/js/157.e500b8f1.js"><link rel="prefetch" href="/docs-assets/js/158.bcd425a4.js"><link rel="prefetch" href="/docs-assets/js/159.6368dfe6.js"><link rel="prefetch" href="/docs-assets/js/16.4d03b0a1.js"><link rel="prefetch" href="/docs-assets/js/160.9e48a572.js"><link rel="prefetch" href="/docs-assets/js/161.f3dcccdd.js"><link rel="prefetch" href="/docs-assets/js/162.a1b92f78.js"><link rel="prefetch" href="/docs-assets/js/163.30810611.js"><link rel="prefetch" href="/docs-assets/js/164.92cf62a0.js"><link rel="prefetch" href="/docs-assets/js/165.b109198f.js"><link rel="prefetch" href="/docs-assets/js/166.c1c56c9c.js"><link rel="prefetch" href="/docs-assets/js/167.2b9fcf6b.js"><link rel="prefetch" href="/docs-assets/js/168.438de5ea.js"><link rel="prefetch" href="/docs-assets/js/169.17eca1f9.js"><link rel="prefetch" href="/docs-assets/js/17.03930327.js"><link rel="prefetch" href="/docs-assets/js/170.9c2b8948.js"><link rel="prefetch" href="/docs-assets/js/171.1da77852.js"><link rel="prefetch" href="/docs-assets/js/172.bbbed780.js"><link rel="prefetch" href="/docs-assets/js/173.4b52ceac.js"><link rel="prefetch" href="/docs-assets/js/174.ba851c2b.js"><link rel="prefetch" href="/docs-assets/js/175.bd0753e3.js"><link rel="prefetch" href="/docs-assets/js/176.9f9a531c.js"><link rel="prefetch" href="/docs-assets/js/177.54749349.js"><link rel="prefetch" href="/docs-assets/js/178.7cf859ad.js"><link rel="prefetch" href="/docs-assets/js/179.23420125.js"><link rel="prefetch" href="/docs-assets/js/18.f0220ae4.js"><link rel="prefetch" href="/docs-assets/js/180.40667bcc.js"><link rel="prefetch" href="/docs-assets/js/181.02e71c69.js"><link rel="prefetch" href="/docs-assets/js/182.9bafc9d4.js"><link rel="prefetch" href="/docs-assets/js/183.27654d6f.js"><link rel="prefetch" href="/docs-assets/js/184.97970dca.js"><link rel="prefetch" href="/docs-assets/js/185.3dc227ac.js"><link rel="prefetch" href="/docs-assets/js/186.8cdd4af3.js"><link rel="prefetch" href="/docs-assets/js/187.28fce18a.js"><link rel="prefetch" href="/docs-assets/js/188.aa7ddb18.js"><link rel="prefetch" href="/docs-assets/js/189.4f2922e4.js"><link rel="prefetch" href="/docs-assets/js/19.39913ede.js"><link rel="prefetch" href="/docs-assets/js/190.34eb1d55.js"><link rel="prefetch" href="/docs-assets/js/191.e03a425e.js"><link rel="prefetch" href="/docs-assets/js/192.bd1acf00.js"><link rel="prefetch" href="/docs-assets/js/193.e14d3047.js"><link rel="prefetch" href="/docs-assets/js/194.7a3e2b42.js"><link rel="prefetch" href="/docs-assets/js/195.9d89248e.js"><link rel="prefetch" href="/docs-assets/js/196.27533146.js"><link rel="prefetch" href="/docs-assets/js/197.1053cd54.js"><link rel="prefetch" href="/docs-assets/js/198.7ad276db.js"><link rel="prefetch" href="/docs-assets/js/199.f0f1e866.js"><link rel="prefetch" href="/docs-assets/js/20.ef31760a.js"><link rel="prefetch" href="/docs-assets/js/200.ce70b113.js"><link rel="prefetch" href="/docs-assets/js/201.8a77459b.js"><link rel="prefetch" href="/docs-assets/js/202.2d04aea2.js"><link rel="prefetch" href="/docs-assets/js/203.a66483ec.js"><link rel="prefetch" href="/docs-assets/js/204.85007508.js"><link rel="prefetch" href="/docs-assets/js/205.e0be02e9.js"><link rel="prefetch" href="/docs-assets/js/206.37f4ce0b.js"><link rel="prefetch" href="/docs-assets/js/207.72ad87ee.js"><link rel="prefetch" href="/docs-assets/js/208.5256ee05.js"><link rel="prefetch" href="/docs-assets/js/209.85ec5717.js"><link rel="prefetch" href="/docs-assets/js/21.00ea2b19.js"><link rel="prefetch" href="/docs-assets/js/210.ced1c111.js"><link rel="prefetch" href="/docs-assets/js/211.a4c0c6e9.js"><link rel="prefetch" href="/docs-assets/js/212.a8a13a61.js"><link rel="prefetch" href="/docs-assets/js/213.45f15a16.js"><link rel="prefetch" href="/docs-assets/js/214.0f5ff96a.js"><link rel="prefetch" href="/docs-assets/js/215.0697a4d3.js"><link rel="prefetch" href="/docs-assets/js/216.82e22dd2.js"><link rel="prefetch" href="/docs-assets/js/217.c29f2bed.js"><link rel="prefetch" href="/docs-assets/js/218.9e396e7e.js"><link rel="prefetch" href="/docs-assets/js/219.4ac9567c.js"><link rel="prefetch" href="/docs-assets/js/22.e05ef252.js"><link rel="prefetch" href="/docs-assets/js/220.86603c72.js"><link rel="prefetch" href="/docs-assets/js/221.f1c0fda9.js"><link rel="prefetch" href="/docs-assets/js/222.b6b66b71.js"><link rel="prefetch" href="/docs-assets/js/223.671b3424.js"><link rel="prefetch" href="/docs-assets/js/224.e05f5dc7.js"><link rel="prefetch" href="/docs-assets/js/225.affa812b.js"><link rel="prefetch" href="/docs-assets/js/226.1e077ce4.js"><link rel="prefetch" href="/docs-assets/js/227.0a09d92c.js"><link rel="prefetch" href="/docs-assets/js/228.46bcc2b0.js"><link rel="prefetch" href="/docs-assets/js/229.aca259b7.js"><link rel="prefetch" href="/docs-assets/js/23.b970ad64.js"><link rel="prefetch" href="/docs-assets/js/230.ff6dbb9d.js"><link rel="prefetch" href="/docs-assets/js/231.a4a7bd32.js"><link rel="prefetch" href="/docs-assets/js/232.b6c5133e.js"><link rel="prefetch" href="/docs-assets/js/233.3a8e1d11.js"><link rel="prefetch" href="/docs-assets/js/234.de1007c8.js"><link rel="prefetch" href="/docs-assets/js/235.7edb49aa.js"><link rel="prefetch" href="/docs-assets/js/236.2f5ffe6d.js"><link rel="prefetch" href="/docs-assets/js/237.3c3a4015.js"><link rel="prefetch" href="/docs-assets/js/238.c71e6dab.js"><link rel="prefetch" href="/docs-assets/js/239.bb0ad5b4.js"><link rel="prefetch" href="/docs-assets/js/24.02c167f7.js"><link rel="prefetch" href="/docs-assets/js/240.0abf517a.js"><link rel="prefetch" href="/docs-assets/js/241.bc4c0d21.js"><link rel="prefetch" href="/docs-assets/js/242.bc1e8adc.js"><link rel="prefetch" href="/docs-assets/js/243.6bce5fb4.js"><link rel="prefetch" href="/docs-assets/js/244.2df022e5.js"><link rel="prefetch" href="/docs-assets/js/245.3ea32d2d.js"><link rel="prefetch" href="/docs-assets/js/246.11e84e89.js"><link rel="prefetch" href="/docs-assets/js/247.df6099af.js"><link rel="prefetch" href="/docs-assets/js/248.8260b85a.js"><link rel="prefetch" href="/docs-assets/js/249.e890cfe3.js"><link rel="prefetch" href="/docs-assets/js/25.b3fcd6ca.js"><link rel="prefetch" href="/docs-assets/js/250.facd3fa7.js"><link rel="prefetch" href="/docs-assets/js/251.e36e3399.js"><link rel="prefetch" href="/docs-assets/js/252.8a625b39.js"><link rel="prefetch" href="/docs-assets/js/253.007f05e9.js"><link rel="prefetch" href="/docs-assets/js/254.2cb6f7a2.js"><link rel="prefetch" href="/docs-assets/js/255.b4f3813e.js"><link rel="prefetch" href="/docs-assets/js/256.fffd7209.js"><link rel="prefetch" href="/docs-assets/js/257.d9ac57f4.js"><link rel="prefetch" href="/docs-assets/js/258.0700a557.js"><link rel="prefetch" href="/docs-assets/js/259.8a5858a6.js"><link rel="prefetch" href="/docs-assets/js/26.0f75e19a.js"><link rel="prefetch" href="/docs-assets/js/260.a809aed3.js"><link rel="prefetch" href="/docs-assets/js/261.d21b6b81.js"><link rel="prefetch" href="/docs-assets/js/262.2062a4e9.js"><link rel="prefetch" href="/docs-assets/js/263.1018d506.js"><link rel="prefetch" href="/docs-assets/js/264.36d57f69.js"><link rel="prefetch" href="/docs-assets/js/265.9b5495c2.js"><link rel="prefetch" href="/docs-assets/js/266.2c079d26.js"><link rel="prefetch" href="/docs-assets/js/267.6f36646a.js"><link rel="prefetch" href="/docs-assets/js/268.3f03dce5.js"><link rel="prefetch" href="/docs-assets/js/269.7dbdae40.js"><link rel="prefetch" href="/docs-assets/js/27.bebc426d.js"><link rel="prefetch" href="/docs-assets/js/270.1b0a2a2c.js"><link rel="prefetch" href="/docs-assets/js/271.0656f13c.js"><link rel="prefetch" href="/docs-assets/js/272.c0edf60a.js"><link rel="prefetch" href="/docs-assets/js/273.3f27696c.js"><link rel="prefetch" href="/docs-assets/js/274.3a4f3e48.js"><link rel="prefetch" href="/docs-assets/js/275.89c1492c.js"><link rel="prefetch" href="/docs-assets/js/276.58983e8f.js"><link rel="prefetch" href="/docs-assets/js/277.0e090c7c.js"><link rel="prefetch" href="/docs-assets/js/278.199b778e.js"><link rel="prefetch" href="/docs-assets/js/279.809596de.js"><link rel="prefetch" href="/docs-assets/js/28.1316cd4e.js"><link rel="prefetch" href="/docs-assets/js/280.d99f4249.js"><link rel="prefetch" href="/docs-assets/js/281.e024c926.js"><link rel="prefetch" href="/docs-assets/js/282.0f1eaab2.js"><link rel="prefetch" href="/docs-assets/js/283.97a2d0ed.js"><link rel="prefetch" href="/docs-assets/js/284.84a935fe.js"><link rel="prefetch" href="/docs-assets/js/285.122d36dd.js"><link rel="prefetch" href="/docs-assets/js/286.db56a688.js"><link rel="prefetch" href="/docs-assets/js/287.76e2ce08.js"><link rel="prefetch" href="/docs-assets/js/288.ec414008.js"><link rel="prefetch" href="/docs-assets/js/289.68639c80.js"><link rel="prefetch" href="/docs-assets/js/29.e6dcffb4.js"><link rel="prefetch" href="/docs-assets/js/290.f49b8cb4.js"><link rel="prefetch" href="/docs-assets/js/291.676417fb.js"><link rel="prefetch" href="/docs-assets/js/292.24c6f690.js"><link rel="prefetch" href="/docs-assets/js/293.c06e0ff8.js"><link rel="prefetch" href="/docs-assets/js/294.170a69da.js"><link rel="prefetch" href="/docs-assets/js/295.9ddbea1e.js"><link rel="prefetch" href="/docs-assets/js/296.24631c70.js"><link rel="prefetch" href="/docs-assets/js/297.b9fa8707.js"><link rel="prefetch" href="/docs-assets/js/298.c9c8fffb.js"><link rel="prefetch" href="/docs-assets/js/299.b716ee66.js"><link rel="prefetch" href="/docs-assets/js/30.c338ac22.js"><link rel="prefetch" href="/docs-assets/js/300.a6f08c7d.js"><link rel="prefetch" href="/docs-assets/js/301.dee917bb.js"><link rel="prefetch" href="/docs-assets/js/302.d877ec00.js"><link rel="prefetch" href="/docs-assets/js/303.14c8d664.js"><link rel="prefetch" href="/docs-assets/js/304.0cb77bd1.js"><link rel="prefetch" href="/docs-assets/js/305.c167fc56.js"><link rel="prefetch" href="/docs-assets/js/306.878256db.js"><link rel="prefetch" href="/docs-assets/js/307.3986064d.js"><link rel="prefetch" href="/docs-assets/js/308.07c2c6e6.js"><link rel="prefetch" href="/docs-assets/js/309.2537f38b.js"><link rel="prefetch" href="/docs-assets/js/31.01d6777f.js"><link rel="prefetch" href="/docs-assets/js/310.2267e9e6.js"><link rel="prefetch" href="/docs-assets/js/311.3e2f8bbd.js"><link rel="prefetch" href="/docs-assets/js/312.d1343933.js"><link rel="prefetch" href="/docs-assets/js/313.93dd5b8e.js"><link rel="prefetch" href="/docs-assets/js/314.e4b2a890.js"><link rel="prefetch" href="/docs-assets/js/315.0fc668b4.js"><link rel="prefetch" href="/docs-assets/js/316.aadfb9cb.js"><link rel="prefetch" href="/docs-assets/js/317.b089a4c1.js"><link rel="prefetch" href="/docs-assets/js/318.fd94a0bf.js"><link rel="prefetch" href="/docs-assets/js/319.cde27122.js"><link rel="prefetch" href="/docs-assets/js/32.9edae42d.js"><link rel="prefetch" href="/docs-assets/js/320.64753f43.js"><link rel="prefetch" href="/docs-assets/js/321.0b4fe303.js"><link rel="prefetch" href="/docs-assets/js/322.0fedd97a.js"><link rel="prefetch" href="/docs-assets/js/323.bf5a8ac4.js"><link rel="prefetch" href="/docs-assets/js/324.48dff3ae.js"><link rel="prefetch" href="/docs-assets/js/325.583fb8f8.js"><link rel="prefetch" href="/docs-assets/js/327.ec4c95b8.js"><link rel="prefetch" href="/docs-assets/js/328.f0056afc.js"><link rel="prefetch" href="/docs-assets/js/329.88f423a1.js"><link rel="prefetch" href="/docs-assets/js/33.eacf3cf6.js"><link rel="prefetch" href="/docs-assets/js/330.81cdfccb.js"><link rel="prefetch" href="/docs-assets/js/331.1681668a.js"><link rel="prefetch" href="/docs-assets/js/332.3c60599b.js"><link rel="prefetch" href="/docs-assets/js/333.fd6d1c99.js"><link rel="prefetch" href="/docs-assets/js/334.90792fb5.js"><link rel="prefetch" href="/docs-assets/js/335.6fca3dfd.js"><link rel="prefetch" href="/docs-assets/js/336.81429528.js"><link rel="prefetch" href="/docs-assets/js/337.b67fae0f.js"><link rel="prefetch" href="/docs-assets/js/338.58245c79.js"><link rel="prefetch" href="/docs-assets/js/339.c007c6d3.js"><link rel="prefetch" href="/docs-assets/js/34.31f57889.js"><link rel="prefetch" href="/docs-assets/js/340.1116c6cd.js"><link rel="prefetch" href="/docs-assets/js/341.37f67dfa.js"><link rel="prefetch" href="/docs-assets/js/342.7fc36b6b.js"><link rel="prefetch" href="/docs-assets/js/343.74a4d89b.js"><link rel="prefetch" href="/docs-assets/js/344.d074b240.js"><link rel="prefetch" href="/docs-assets/js/345.5f0932b2.js"><link rel="prefetch" href="/docs-assets/js/346.061ef3f1.js"><link rel="prefetch" href="/docs-assets/js/347.9ac1ec3c.js"><link rel="prefetch" href="/docs-assets/js/348.3ee40dc5.js"><link rel="prefetch" href="/docs-assets/js/349.8c68cde1.js"><link rel="prefetch" href="/docs-assets/js/35.0d03d0be.js"><link rel="prefetch" href="/docs-assets/js/350.8f48f6ac.js"><link rel="prefetch" href="/docs-assets/js/351.fa0625bf.js"><link rel="prefetch" href="/docs-assets/js/352.4a703890.js"><link rel="prefetch" href="/docs-assets/js/353.5648c15e.js"><link rel="prefetch" href="/docs-assets/js/354.03eab3a6.js"><link rel="prefetch" href="/docs-assets/js/355.b07eb924.js"><link rel="prefetch" href="/docs-assets/js/356.81e4e0e2.js"><link rel="prefetch" href="/docs-assets/js/357.b85b42cc.js"><link rel="prefetch" href="/docs-assets/js/358.f1cd6481.js"><link rel="prefetch" href="/docs-assets/js/359.8f878573.js"><link rel="prefetch" href="/docs-assets/js/36.59740493.js"><link rel="prefetch" href="/docs-assets/js/360.ee7d63e5.js"><link rel="prefetch" href="/docs-assets/js/361.ad18a784.js"><link rel="prefetch" href="/docs-assets/js/362.29af9ba0.js"><link rel="prefetch" href="/docs-assets/js/363.57c6d6ba.js"><link rel="prefetch" href="/docs-assets/js/364.deddb5f2.js"><link rel="prefetch" href="/docs-assets/js/365.fd90695b.js"><link rel="prefetch" href="/docs-assets/js/366.8a53ab25.js"><link rel="prefetch" href="/docs-assets/js/367.b556b183.js"><link rel="prefetch" href="/docs-assets/js/368.47e932a8.js"><link rel="prefetch" href="/docs-assets/js/369.358ea7c2.js"><link rel="prefetch" href="/docs-assets/js/37.e09d11ea.js"><link rel="prefetch" href="/docs-assets/js/370.8ea32d4d.js"><link rel="prefetch" href="/docs-assets/js/371.ecf2fd00.js"><link rel="prefetch" href="/docs-assets/js/372.a4e4d233.js"><link rel="prefetch" href="/docs-assets/js/373.c656b9aa.js"><link rel="prefetch" href="/docs-assets/js/374.5473cf7b.js"><link rel="prefetch" href="/docs-assets/js/375.346dacd3.js"><link rel="prefetch" href="/docs-assets/js/376.61ee0bd6.js"><link rel="prefetch" href="/docs-assets/js/377.21b57da3.js"><link rel="prefetch" href="/docs-assets/js/378.9d56e7fb.js"><link rel="prefetch" href="/docs-assets/js/379.bbd5b5f5.js"><link rel="prefetch" href="/docs-assets/js/38.088dc592.js"><link rel="prefetch" href="/docs-assets/js/380.1e3dc360.js"><link rel="prefetch" href="/docs-assets/js/381.d56e1306.js"><link rel="prefetch" href="/docs-assets/js/382.ad1d7295.js"><link rel="prefetch" href="/docs-assets/js/383.e00cda22.js"><link rel="prefetch" href="/docs-assets/js/384.2a8f70fb.js"><link rel="prefetch" href="/docs-assets/js/385.6977ff59.js"><link rel="prefetch" href="/docs-assets/js/386.fbfe7af2.js"><link rel="prefetch" href="/docs-assets/js/387.3f273551.js"><link rel="prefetch" href="/docs-assets/js/388.f74ee3fd.js"><link rel="prefetch" href="/docs-assets/js/389.99b5aa92.js"><link rel="prefetch" href="/docs-assets/js/39.fd3bb8e6.js"><link rel="prefetch" href="/docs-assets/js/390.51dcaf05.js"><link rel="prefetch" href="/docs-assets/js/391.5ee7808b.js"><link rel="prefetch" href="/docs-assets/js/392.dec95fa3.js"><link rel="prefetch" href="/docs-assets/js/393.b8eed71c.js"><link rel="prefetch" href="/docs-assets/js/394.1a060866.js"><link rel="prefetch" href="/docs-assets/js/395.f48e4dd6.js"><link rel="prefetch" href="/docs-assets/js/396.c524e7c6.js"><link rel="prefetch" href="/docs-assets/js/4.a1e74be4.js"><link rel="prefetch" href="/docs-assets/js/40.7b386dbc.js"><link rel="prefetch" href="/docs-assets/js/41.86deacd2.js"><link rel="prefetch" href="/docs-assets/js/42.fb9f4c36.js"><link rel="prefetch" href="/docs-assets/js/43.c1bed7b3.js"><link rel="prefetch" href="/docs-assets/js/44.a1893887.js"><link rel="prefetch" href="/docs-assets/js/45.79b33f50.js"><link rel="prefetch" href="/docs-assets/js/46.40696e48.js"><link rel="prefetch" href="/docs-assets/js/47.f30af45e.js"><link rel="prefetch" href="/docs-assets/js/48.d05e3936.js"><link rel="prefetch" href="/docs-assets/js/49.afe70461.js"><link rel="prefetch" href="/docs-assets/js/5.f0952d74.js"><link rel="prefetch" href="/docs-assets/js/50.9a541881.js"><link rel="prefetch" href="/docs-assets/js/51.6b58bbfc.js"><link rel="prefetch" href="/docs-assets/js/52.40384b24.js"><link rel="prefetch" href="/docs-assets/js/53.5212e36a.js"><link rel="prefetch" href="/docs-assets/js/54.28869319.js"><link rel="prefetch" href="/docs-assets/js/55.ecbb97bd.js"><link rel="prefetch" href="/docs-assets/js/56.c4231b6e.js"><link rel="prefetch" href="/docs-assets/js/57.384e1869.js"><link rel="prefetch" href="/docs-assets/js/58.991a7a71.js"><link rel="prefetch" href="/docs-assets/js/59.ee063ac4.js"><link rel="prefetch" href="/docs-assets/js/6.4bc70364.js"><link rel="prefetch" href="/docs-assets/js/60.169b2312.js"><link rel="prefetch" href="/docs-assets/js/61.d27d1edb.js"><link rel="prefetch" href="/docs-assets/js/62.61447363.js"><link rel="prefetch" href="/docs-assets/js/63.215b79aa.js"><link rel="prefetch" href="/docs-assets/js/64.5de7dff1.js"><link rel="prefetch" href="/docs-assets/js/65.7b9e5721.js"><link rel="prefetch" href="/docs-assets/js/66.e8970081.js"><link rel="prefetch" href="/docs-assets/js/67.e10a1714.js"><link rel="prefetch" href="/docs-assets/js/68.058f817d.js"><link rel="prefetch" href="/docs-assets/js/69.a5831684.js"><link rel="prefetch" href="/docs-assets/js/7.b1bc1fcb.js"><link rel="prefetch" href="/docs-assets/js/70.d31144da.js"><link rel="prefetch" href="/docs-assets/js/71.4cb7fb4e.js"><link rel="prefetch" href="/docs-assets/js/72.1f442e2f.js"><link rel="prefetch" href="/docs-assets/js/73.369cecf9.js"><link rel="prefetch" href="/docs-assets/js/74.6ed49d5f.js"><link rel="prefetch" href="/docs-assets/js/75.311ab350.js"><link rel="prefetch" href="/docs-assets/js/76.5259b1cd.js"><link rel="prefetch" href="/docs-assets/js/77.c9132725.js"><link rel="prefetch" href="/docs-assets/js/78.831cee1c.js"><link rel="prefetch" href="/docs-assets/js/79.7bb5bf5f.js"><link rel="prefetch" href="/docs-assets/js/8.fdbf461c.js"><link rel="prefetch" href="/docs-assets/js/80.12208427.js"><link rel="prefetch" href="/docs-assets/js/81.3ce772a8.js"><link rel="prefetch" href="/docs-assets/js/82.1cbb4427.js"><link rel="prefetch" href="/docs-assets/js/83.688291d6.js"><link rel="prefetch" href="/docs-assets/js/84.1be74fbf.js"><link rel="prefetch" href="/docs-assets/js/85.61c71caa.js"><link rel="prefetch" href="/docs-assets/js/86.61fc591c.js"><link rel="prefetch" href="/docs-assets/js/87.11fd30b6.js"><link rel="prefetch" href="/docs-assets/js/88.14dc901b.js"><link rel="prefetch" href="/docs-assets/js/89.e9a88dd8.js"><link rel="prefetch" href="/docs-assets/js/9.51dd7e81.js"><link rel="prefetch" href="/docs-assets/js/90.1a3451d4.js"><link rel="prefetch" href="/docs-assets/js/91.fea72d57.js"><link rel="prefetch" href="/docs-assets/js/92.101bd0bc.js"><link rel="prefetch" href="/docs-assets/js/93.cbbe6d67.js"><link rel="prefetch" href="/docs-assets/js/94.58a5efb3.js"><link rel="prefetch" href="/docs-assets/js/95.bb44c04a.js"><link rel="prefetch" href="/docs-assets/js/96.ea5a4fb3.js"><link rel="prefetch" href="/docs-assets/js/97.021cdaf5.js"><link rel="prefetch" href="/docs-assets/js/98.63fdd87e.js"><link rel="prefetch" href="/docs-assets/js/99.950ba3fb.js"><link rel="prefetch" href="/docs-assets/js/vendors~docsearch.92b608d1.js"><link rel="stylesheet" href="/docs-assets/css/0.styles.30944fa5.css"></head><body><div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><div class="navbar-left"><a href="/zh/" class="home-link"><img src="/docs-images/logo.png" alt="物联网 MQTT 服务器文档" class="logo"> <span class="site-name can-hide">Docs</span></a><div class="lang-change"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">中文 </span><span class="arrow down"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/en/enterprise/latest/" class="nav-link">English</a></li><li class="dropdown-item"><a href="/zh/enterprise/latest/" class="router-link-active nav-link active">中文</a></li></ul></div></div></div><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="navbar-algolia-input" class="search-query"></form><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="https://askemq.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">问答</a></div><div class="nav-item"><a href="https://www.emqx.com/zh/events" target="_blank" rel="noopener noreferrer" class="nav-link external">活动</a></div><div class="nav-item"><a href="https://www.emqx.com/zh/community" target="_blank" rel="noopener noreferrer" class="nav-link external">社区</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/zh/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">博客</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=videos" target="_blank" rel="noopener noreferrer" class="nav-link external">视频</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=ebooks" target="_blank" rel="noopener noreferrer" class="nav-link external">电子书</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=reports" target="_blank" rel="noopener noreferrer" class="nav-link external">测试报告</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=white-papers" target="_blank" rel="noopener noreferrer" class="nav-link external">白皮书</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MQTT" class="dropdown-title"><span class="title">MQTT</span> <span class="arrow down"></span></button> <button type="button" aria-label="MQTT" class="mobile-dropdown-title"><span class="title">MQTT</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/mqtt5" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT 5</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/products/mqttx" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT X</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/public-mqtt5-broker" target="_blank" rel="noopener noreferrer" class="nav-link external">在线 MQTT 5 服务器</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/mqtt-websocket-toolkit" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT Websocket Toolkit</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/en/enterprise/latest/" class="nav-link">English</a></li><li class="dropdown-item"><a href="/zh/enterprise/latest/" class="nav-link router-link-active">中文</a></li></ul></div></div><div class="btns"><a href="https://www.emqx.com/zh/contact?product=emqx" target="_blank" rel="noopener" class="contact-us nav-item">联系我们 </a><a href="https://www.emqx.com/zh/try?product=enterprise" target="_blank" rel="noopener" class="downloads nav-item">免费试用</a></div></nav></div></header><div class="sidebar-mask"></div><section class="main-box"><div class="columns is-mobile"><aside class="left-column sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://askemq.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">问答</a></div><div class="nav-item"><a href="https://www.emqx.com/zh/events" target="_blank" rel="noopener noreferrer" class="nav-link external">活动</a></div><div class="nav-item"><a href="https://www.emqx.com/zh/community" target="_blank" rel="noopener noreferrer" class="nav-link external">社区</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/zh/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">博客</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=videos" target="_blank" rel="noopener noreferrer" class="nav-link external">视频</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=ebooks" target="_blank" rel="noopener noreferrer" class="nav-link external">电子书</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=reports" target="_blank" rel="noopener noreferrer" class="nav-link external">测试报告</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/resources?type=white-papers" target="_blank" rel="noopener noreferrer" class="nav-link external">白皮书</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MQTT" class="dropdown-title"><span class="title">MQTT</span> <span class="arrow down"></span></button> <button type="button" aria-label="MQTT" class="mobile-dropdown-title"><span class="title">MQTT</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/mqtt5" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT 5</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/products/mqttx" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT X</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/public-mqtt5-broker" target="_blank" rel="noopener noreferrer" class="nav-link external">在线 MQTT 5 服务器</a></li><li class="dropdown-item"><a href="https://www.emqx.com/zh/mqtt/mqtt-websocket-toolkit" target="_blank" rel="noopener noreferrer" class="nav-link external">MQTT Websocket Toolkit</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button><ul class="nav-dropdown" style="display:none"><li class="dropdown-item"><a href="/en/enterprise/latest/" class="nav-link">English</a></li><li class="dropdown-item"><a href="/zh/enterprise/latest/" class="nav-link router-link-active">中文</a></li></ul></div></div><div class="btns"><a href="https://www.emqx.com/zh/contact?product=emqx" target="_blank" rel="noopener" class="contact-us nav-item">联系我们 </a><a href="https://www.emqx.com/zh/try?product=enterprise" target="_blank" rel="noopener" class="downloads nav-item">免费试用</a></div></nav><div class="version-pick"><a href="/zh/enterprise/latest" class="home-link router-link-active"><h2 class="title p-0 is-flex is-align-items-center"><svg aria-hidden="true" class="icon mr-2"><use xlink:href="#icon-enterprise"></use></svg> EMQX 企业版</h2></a><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">latest </span><span class="arrow down"></span></button></div></div><ul class="sidebar-links"><li><a href="/zh/enterprise/latest/" aria-current="page" class="sidebar-link">产品概览</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开始使用</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安装与部署</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运行监测</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MQTT 高级特性</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>规则引擎(数据集成)</span> <span class="arrow right"></span></p></section></li><li><a href="/zh/enterprise/latest/advanced/http-api.html" aria-current="page" class="active sidebar-link">HTTP API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#接口安全" class="sidebar-link">接口安全</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#响应码" class="sidebar-link">响应码</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#api-endpoints" class="sidebar-link">API Endpoints</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#api-v4" class="sidebar-link">/api/v4</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#broker-基本信息" class="sidebar-link">Broker 基本信息</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#节点" class="sidebar-link">节点</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#客户端" class="sidebar-link">客户端</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#订阅信息" class="sidebar-link">订阅信息</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#消息发布" class="sidebar-link">消息发布</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#主题订阅" class="sidebar-link">主题订阅</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#消息批量发布" class="sidebar-link">消息批量发布</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#主题批量订阅" class="sidebar-link">主题批量订阅</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#监听器" class="sidebar-link">监听器</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#内置模块" class="sidebar-link">内置模块</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#统计指标" class="sidebar-link">统计指标</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#主题统计指标" class="sidebar-link">主题统计指标</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#状态" class="sidebar-link">状态</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#告警" class="sidebar-link">告警</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#acl-缓存" class="sidebar-link">ACL 缓存</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#黑名单" class="sidebar-link">黑名单</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#数据导入导出" class="sidebar-link">数据导入导出</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#规则" class="sidebar-link">规则</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#动作" class="sidebar-link">动作</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#资源类型" class="sidebar-link">资源类型</a></li><li class="sidebar-sub-header"><a href="/zh/enterprise/latest/advanced/http-api.html#资源" class="sidebar-link">资源</a></li></ul></li><li><a href="/zh/enterprise/latest/advanced/cli.html" class="sidebar-link">命令行接口</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>参数配置</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网关</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>插件与扩展</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>模块管理</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计与实现</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SDK &amp; Tools</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ 常见问题解答</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本发布</span> <span class="arrow right"></span></p></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>相关资料</span> <span class="arrow right"></span></p></section></li></ul></aside><div class="column col-page"><main class="page"><div id="loader-wrapper" style="display:none" data-v-78d8edea><div class="loader" data-v-78d8edea><div class="ball-spin-fade-loader" data-v-78d8edea><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div><div data-v-78d8edea></div></div></div></div><div class="theme-default-content reset-width content__default"><h1 id="http-api"><a href="#http-api" class="header-anchor">#</a> HTTP API</h1><p>EMQX 提供了 HTTP API 以实现与外部系统的集成，例如查询客户端信息、发布消息和创建规则等。</p><p>EMQX 的 HTTP API 服务默认监听 8081 端口，可通过 <code>etc/plugins/emqx_management.conf</code> 配置文件修改监听端口，或启用 HTTPS 监听。<a href="https://github.com/emqx/emqx/releases/tag/v4.0.0" target="_blank" rel="noopener noreferrer">EMQX 4.0.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以后的所有 API 调用均以 <code>api/v4</code> 开头。</p><h2 id="接口安全"><a href="#接口安全" class="header-anchor">#</a> 接口安全</h2><p>EMQX 的 HTTP API 使用 <a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noopener noreferrer">Basic 认证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方式，<code>id</code> 和 <code>password</code> 须分别填写 AppID 和 AppSecret。 默认的 AppID 和 AppSecret 是：<code>admin/public</code>。你可以在 Dashboard 的左侧菜单栏里，选择 &quot;管理&quot; -&gt; &quot;应用&quot; 来修改和添加 AppID/AppSecret。</p><h2 id="响应码"><a href="#响应码" class="header-anchor">#</a> 响应码</h2><h3 id="http-状态码-status-codes"><a href="#http-状态码-status-codes" class="header-anchor">#</a> HTTP 状态码 (status codes)</h3><p>EMQX 接口在调用成功时总是返回 200 OK，响应内容则以 JSON 格式返回。</p><p>可能的状态码如下：</p><table><thead><tr><th>Status Code</th><th>Description</th></tr></thead><tbody><tr><td>200</td><td>成功，返回的 JSON 数据将提供更多信息</td></tr><tr><td>400</td><td>客户端请求无效，例如请求体或参数错误</td></tr><tr><td>401</td><td>客户端未通过服务端认证，使用无效的身份验证凭据可能会发生</td></tr><tr><td>404</td><td>找不到请求的路径或者请求的对象不存在</td></tr><tr><td>500</td><td>服务端处理请求时发生内部错误</td></tr></tbody></table><h3 id="返回码-result-codes"><a href="#返回码-result-codes" class="header-anchor">#</a> 返回码 (result codes)</h3><p>EMQX 接口的响应消息体为 JSON 格式，其中总是包含返回码 <code>code</code>。</p><p>可能的返回码如下：</p><table><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>101</td><td>RPC 错误</td></tr><tr><td>102</td><td>未知错误</td></tr><tr><td>103</td><td>用户名或密码错误</td></tr><tr><td>104</td><td>空用户名或密码</td></tr><tr><td>105</td><td>用户不存在</td></tr><tr><td>106</td><td>管理员账户不可删除</td></tr><tr><td>107</td><td>关键请求参数缺失</td></tr><tr><td>108</td><td>请求参数错误</td></tr><tr><td>109</td><td>请求参数不是合法 JSON 格式</td></tr><tr><td>110</td><td>插件已开启</td></tr><tr><td>111</td><td>插件已关闭</td></tr><tr><td>112</td><td>客户端不在线</td></tr><tr><td>113</td><td>用户已存在</td></tr><tr><td>114</td><td>旧密码错误</td></tr><tr><td>115</td><td>不合法的主题</td></tr></tbody></table><h2 id="api-endpoints"><a href="#api-endpoints" class="header-anchor">#</a> API Endpoints</h2><h2 id="api-v4"><a href="#api-v4" class="header-anchor">#</a> /api/v4</h2><h3 id="get-api-v4"><a href="#get-api-v4" class="header-anchor">#</a> GET /api/v4</h3><p>返回 EMQX 支持的所有 Endpoints。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array</td><td>Endpoints 列表</td></tr><tr><td>- data[0].path</td><td>String</td><td>Endpoint</td></tr><tr><td>- data[0].name</td><td>String</td><td>Endpoint 名</td></tr><tr><td>- data[0].method</td><td>String</td><td>HTTP Method</td></tr><tr><td>- data[0].descr</td><td>String</td><td>描述</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;path&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;/auth_clientid&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;list_clientid&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;GET&quot;</span>,<span class="token string">&quot;descr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;List available clientid in the cluster&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="broker-基本信息"><a href="#broker-基本信息" class="header-anchor">#</a> Broker 基本信息</h2><h3 id="get-api-v4-brokers-node"><a href="#get-api-v4-brokers-node" class="header-anchor">#</a> GET /api/v4/brokers/{node}</h3><p>返回集群下所有节点的基本信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>node</td><td>String</td><td>False</td><td>节点名字，如 &quot;emqx@127.0.0.1。<br>不指定时返回所有节点的信息</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object/Array of Objects</td><td>node 参数存在时返回指定节点信息，<br>不存在时返回所有节点的信息</td></tr><tr><td>data.datetime</td><td>String</td><td>当前时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr><tr><td>data.node</td><td>String</td><td>节点名称</td></tr><tr><td>data.node_status</td><td>String</td><td>节点状态</td></tr><tr><td>data.otp_release</td><td>String</td><td>EMQX 使用的 Erlang/OTP 版本</td></tr><tr><td>data.sysdescr</td><td>String</td><td>软件描述</td></tr><tr><td>data.uptime</td><td>String</td><td>EMQX 运行时间，格式为 &quot;H hours, m minutes, s seconds&quot;</td></tr><tr><td>data.version</td><td>String</td><td>EMQX 版本</td></tr></tbody></table><p><strong>Examples:</strong></p><p>获取所有节点的基本信息：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/brokers&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;4 hours, 21 minutes, 19 seconds&quot;</span>,<span class="token string">&quot;sysdescr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Broker&quot;</span>,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;datetime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 15:27:24&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取节点 emqx@127.0.0.1 的基本信息：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/brokers/emqx@127.0.0.1&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1 minutes, 51 seconds&quot;</span>,<span class="token string">&quot;sysdescr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Broker&quot;</span>,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;datetime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 14:11:31&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="节点"><a href="#节点" class="header-anchor">#</a> 节点</h2><h3 id="get-api-v4-nodes-node"><a href="#get-api-v4-nodes-node" class="header-anchor">#</a> GET /api/v4/nodes/{node}</h3><p>返回节点的状态。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>node</td><td>String</td><td>False</td><td>节点名字，如 &quot;emqx@127.0.0.1。<br>不指定时返回所有节点的信息</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object/Array of Objects</td><td>node 参数存在时返回指定节点信息，<br>不存在时以 Array 形式返回所有节点的信息</td></tr><tr><td>data.connections</td><td>Integer</td><td>当前接入此节点的客户端数量</td></tr><tr><td>data.load1</td><td>String</td><td>1 分钟内的 CPU 平均负载</td></tr><tr><td>data.load5</td><td>String</td><td>5 分钟内的 CPU 平均负载</td></tr><tr><td>data.load15</td><td>String</td><td>15 分钟内的 CPU 平均负载</td></tr><tr><td>data.max_fds</td><td>Integer</td><td>操作系统的最大文件描述符限制</td></tr><tr><td>data.memory_total</td><td>String</td><td>VM 已分配的系统内存</td></tr><tr><td>data.memory_used</td><td>String</td><td>VM 已占用的内存大小</td></tr><tr><td>data.node</td><td>String</td><td>节点名称</td></tr><tr><td>data.node_status</td><td>String</td><td>节点状态</td></tr><tr><td>data.otp_release</td><td>String</td><td>EMQX 使用的 Erlang/OTP 版本</td></tr><tr><td>data.process_available</td><td>Integer</td><td>可用的进程数量</td></tr><tr><td>data.process_used</td><td>Integer</td><td>已占用的进程数量</td></tr><tr><td>data.uptime</td><td>String</td><td>EMQX 运行时间</td></tr><tr><td>data.version</td><td>String</td><td>EMQX 版本</td></tr></tbody></table><p><strong>Examples:</strong></p><p>获取所有节点的状态：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7 seconds&quot;</span>,<span class="token string">&quot;process_used&quot;</span>:315,<span class="token string">&quot;process_available&quot;</span>:2097152,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;memory_used&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;96.75M&quot;</span>,<span class="token string">&quot;memory_total&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;118.27M&quot;</span>,<span class="token string">&quot;max_fds&quot;</span>:10240,<span class="token string">&quot;load5&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.60&quot;</span>,<span class="token string">&quot;load15&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.65&quot;</span>,<span class="token string">&quot;load1&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.31&quot;</span>,<span class="token string">&quot;connections&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取指定节点的状态：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;uptime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2 minutes, 21 seconds&quot;</span>,<span class="token string">&quot;process_used&quot;</span>:310,<span class="token string">&quot;process_available&quot;</span>:2097152,<span class="token string">&quot;otp_release&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;R21/10.3.5&quot;</span>,<span class="token string">&quot;node_status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Running&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;memory_used&quot;</span>:101379168,<span class="token string">&quot;memory_total&quot;</span>:123342848,<span class="token string">&quot;max_fds&quot;</span>:10240,<span class="token string">&quot;load5&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.50&quot;</span>,<span class="token string">&quot;load15&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2.61&quot;</span>,<span class="token string">&quot;load1&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1.99&quot;</span>,<span class="token string">&quot;connections&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="客户端"><a href="#客户端" class="header-anchor">#</a> 客户端</h2><h3 id="get-api-v4-clients"><a href="#get-api-v4-clients" class="header-anchor">#</a> GET /api/v4/clients</h3><p>返回集群下所有客户端的信息，支持分页。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>_page</td><td>Integer</td><td>False</td><td>1</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>10000</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p>在 4.1 后，支持多条件和模糊查询，其包含的查询参数有：</p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>False</td><td>客户端标识符</td></tr><tr><td>username</td><td>String</td><td>False</td><td>客户端用户名</td></tr><tr><td>zone</td><td>String</td><td>False</td><td>客户端配置组名称</td></tr><tr><td>ip_address</td><td>String</td><td>False</td><td>客户端 IP 地址</td></tr><tr><td>conn_state</td><td>Enum</td><td>False</td><td>客户端当前连接状态，<br>可取值有：<code>connected</code>,<code>idle</code>,<code>disconnected</code></td></tr><tr><td>clean_start</td><td>Bool</td><td>False</td><td>客户端是否使用了全新的会话</td></tr><tr><td>proto_name</td><td>Enum</td><td>False</td><td>客户端协议名称，<br>可取值有：<code>MQTT</code>,<code>CoAP</code>,<code>LwM2M</code>,<code>MQTT-SN</code></td></tr><tr><td>proto_ver</td><td>Integer</td><td>False</td><td>客户端协议版本</td></tr><tr><td>_like_clientid</td><td>String</td><td>False</td><td>客户端标识符，子串方式模糊查找</td></tr><tr><td>_like_username</td><td>String</td><td>False</td><td>客户端用户名，子串方式模糊查找</td></tr><tr><td>_gte_created_at</td><td>Integer</td><td>False</td><td>客户端会话创建时间，大于等于查找</td></tr><tr><td>_lte_created_at</td><td>Integer</td><td>False</td><td>客户端会话创建时间，小于等于查找</td></tr><tr><td>_gte_connected_at</td><td>Integer</td><td>False</td><td>客户端连接创建时间，大于等于查找</td></tr><tr><td>_lte_connected_at</td><td>Integer</td><td>False</td><td>客户端连接创建时间，小于等于查找</td></tr><tr><td>__gte_mqueue_len</td><td>Integer</td><td>False</td><td>客户端消息队列当前长度， 大于等于查找 ｜</td></tr><tr><td>__lte_mqueue_len</td><td>Integer</td><td>False</td><td>客户端消息队列当前长度， 大于等于查找 ｜</td></tr><tr><td>__gte_mqueue_dropped</td><td>Integer</td><td>False</td><td>消息队列因超出长度而丢弃的消息数量丢弃个数， 大于等于查找 ｜</td></tr><tr><td>__lte_mqueue_dropped</td><td>Integer</td><td>False</td><td>消息队列因超出长度而丢弃的消息数量丢弃个数， 小于等于查找 ｜</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有客户端的信息</td></tr><tr><td>data[0].node</td><td>String</td><td>客户端所连接的节点名称</td></tr><tr><td>data[0].clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>data[0].username</td><td>String</td><td>客户端连接时使用的用户名</td></tr><tr><td>data[0].proto_name</td><td>String</td><td>客户端协议名称</td></tr><tr><td>data[0].proto_ver</td><td>Integer</td><td>客户端使用的协议版本</td></tr><tr><td>data[0].ip_address</td><td>String</td><td>客户端的 IP 地址</td></tr><tr><td>data[0].port</td><td>Integer</td><td>客户端的端口</td></tr><tr><td>data[0].is_bridge</td><td>Boolean</td><td>指示客户端是否通过桥接方式连接</td></tr><tr><td>data[0].connected_at</td><td>String</td><td>客户端连接时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr><tr><td>data[0].disconnected_at</td><td>String</td><td>客户端离线时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;，<br>此字段仅在 <code>connected</code> 为 <code>false</code> 时有效并被返回</td></tr><tr><td>data[0].connected</td><td>Boolean</td><td>客户端是否处于连接状态</td></tr><tr><td>data[0].zone</td><td>String</td><td>指示客户端使用的配置组</td></tr><tr><td>data[0].keepalive</td><td>Integer</td><td>保持连接时间，单位：秒</td></tr><tr><td>data[0].clean_start</td><td>Boolean</td><td>指示客户端是否使用了全新的会话</td></tr><tr><td>data[0].expiry_interval</td><td>Integer</td><td>会话过期间隔，单位：秒</td></tr><tr><td>data[0].created_at</td><td>String</td><td>会话创建时间，格式为 &quot;YYYY-MM-DD HH:mm:ss&quot;</td></tr><tr><td>data[0].subscriptions_cnt</td><td>Integer</td><td>此客户端已建立的订阅数量</td></tr><tr><td>data[0].max_subscriptions</td><td>Integer</td><td>此客户端允许建立的最大订阅数量</td></tr><tr><td>data[0].inflight</td><td>Integer</td><td>飞行队列当前长度</td></tr><tr><td>data[0].max_inflight</td><td>Integer</td><td>飞行队列最大长度</td></tr><tr><td>data[0].mqueue_len</td><td>Integer</td><td>消息队列当前长度</td></tr><tr><td>data[0].max_mqueue</td><td>Integer</td><td>消息队列最大长度</td></tr><tr><td>data[0].mqueue_dropped</td><td>Integer</td><td>消息队列因超出长度而丢弃的消息数量</td></tr><tr><td>data[0].awaiting_rel</td><td>Integer</td><td>未确认的 PUBREC 报文数量</td></tr><tr><td>data[0].max_awaiting_rel</td><td>Integer</td><td>允许存在未确认的 PUBREC 报文的最大数量</td></tr><tr><td>data[0].recv_oct</td><td>Integer</td><td>EMQX Broker（下同）接收的字节数量</td></tr><tr><td>data[0].recv_cnt</td><td>Integer</td><td>接收的 TCP 报文数量</td></tr><tr><td>data[0].recv_pkt</td><td>Integer</td><td>接收的 MQTT 报文数量</td></tr><tr><td>data[0].recv_msg</td><td>Integer</td><td>接收的 PUBLISH 报文数量</td></tr><tr><td>data[0].send_oct</td><td>Integer</td><td>发送的字节数量</td></tr><tr><td>data[0].send_cnt</td><td>Integer</td><td>发送的 TCP 报文数量</td></tr><tr><td>data[0].send_pkt</td><td>Integer</td><td>发送的 MQTT 报文数量</td></tr><tr><td>data[0].send_msg</td><td>Integer</td><td>发送的 PUBLISH 报文数量</td></tr><tr><td>data[0].mailbox_len</td><td>Integer</td><td>进程邮箱大小</td></tr><tr><td>data[0].heap_size</td><td>Integer</td><td>进程堆栈大小，单位：字节</td></tr><tr><td>data[0].reductions</td><td>Integer</td><td>Erlang reduction</td></tr><tr><td>meta</td><td>Object</td><td>分页信息</td></tr><tr><td>meta.page</td><td>Integer</td><td>页码</td></tr><tr><td>meta.limit</td><td>Integer</td><td>每页显示的数据条数</td></tr><tr><td>meta.count</td><td>Integer</td><td>数据总条数</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 17:01:26&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;reductions&quot;</span>:3997,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:64491,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 17:01:26&quot;</span>,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注：在 4.1 后，返回的 <code>meta</code> 内容做了修改：</p><ul><li><code>count</code>：仍表示总数，但在 多条件/模糊查询时，固定为 -1。</li><li><code>hasnext</code>：为新增字段，表示是否存在下一页。</li></ul><h3 id="get-api-v4-clients-clientid"><a href="#get-api-v4-clients-clientid" class="header-anchor">#</a> GET /api/v4/clients/{clientid}</h3><p>返回指定客户端的信息</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table><p><strong>Examples:</strong></p><p>查询指定客户端</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:3978,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:54889,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-clients-clientid"><a href="#delete-api-v4-clients-clientid" class="header-anchor">#</a> DELETE /api/v4/clients/{clientid}</h3><p>踢除指定客户端。注意踢除客户端操作会将连接与会话一并终结。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>踢除指定客户端</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-clients"><a href="#get-api-v4-nodes-node-clients" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients</h3><p>类似 <a href="#endpoint-get-clients">GET /api/v4/clients</a>，返回指定节点下所有客户端的信息，支持分页。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>_page</td><td>Integer</td><td>False</td><td>1</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>10000</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有客户端的信息，详情请参看 <a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 18:25:18&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:4137,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:0,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:1,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-19 18:25:18&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:49509,<span class="token string">&quot;send_oct&quot;</span>:0,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-clients-clientid"><a href="#get-api-v4-nodes-node-clients-clientid" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients/{clientid}</h3><p>类似 <a href="#endpoint-get-a-client">GET /api/v4/clients/{clientid}</a>，返回指定节点下指定客户端的信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;recv_cnt&quot;</span>:4,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;send_pkt&quot;</span>:3,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;reductions&quot;</span>:5994,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;send_cnt&quot;</span>:3,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;recv_oct&quot;</span>:33,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:38:51&quot;</span>,<span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:54889,<span class="token string">&quot;send_oct&quot;</span>:8,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-nodes-node-clients-clientid"><a href="#delete-api-v4-nodes-node-clients-clientid" class="header-anchor">#</a> DELETE /api/v4/nodes/{node}/clients/{clientid}</h3><p>类似 <a href="#endpoint-delete-a-client">DELETE /api/v4/clients/{clientid}</a>，踢除指定节点下的指定客户端。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-clients-username-username"><a href="#get-api-v4-clients-username-username" class="header-anchor">#</a> GET /api/v4/clients/username/{username}</h3><p>通过 Username 查询客户端的信息。由于可能存在多个客户端使用相同的用户名的情况，所以可能同时返回多个客户端信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>username</td><td>String</td><td>True</td><td>Username</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/username/steve&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:2,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;heap_size&quot;</span>:2586,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;reductions&quot;</span>:4673,<span class="token string">&quot;send_pkt&quot;</span>:1,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:1,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_oct&quot;</span>:29,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;steve&quot;</span>,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:56429,<span class="token string">&quot;send_oct&quot;</span>:4,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-clients-username-username"><a href="#get-api-v4-nodes-node-clients-username-username" class="header-anchor">#</a> GET /api/v4/nodes/{node}/clients/username/{username}</h3><p>类似 <a href="#endpoint-get-clients-by-username">GET /api/v4/clients/username/{username}</a>，在指定节点下，通过 Username 查询指定客户端的信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>username</td><td>String</td><td>True</td><td>Username</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>客户端的信息，详细请参见<br><a href="#endpoint-get-clients">GET /api/v4/clients</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/clients/username/test&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;clean_start&quot;</span>:true,<span class="token string">&quot;awaiting_rel&quot;</span>:0,<span class="token string">&quot;recv_msg&quot;</span>:0,<span class="token string">&quot;proto_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;MQTT&quot;</span>,<span class="token string">&quot;recv_cnt&quot;</span>:6,<span class="token string">&quot;mailbox_len&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;mqueue_len&quot;</span>:0,<span class="token string">&quot;max_subscriptions&quot;</span>:0,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;is_bridge&quot;</span>:false,<span class="token string">&quot;heap_size&quot;</span>:1598,<span class="token string">&quot;proto_ver&quot;</span>:4,<span class="token string">&quot;subscriptions_cnt&quot;</span>:0,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;expiry_interval&quot;</span>:0,<span class="token string">&quot;send_msg&quot;</span>:0,<span class="token string">&quot;inflight&quot;</span>:0,<span class="token string">&quot;reductions&quot;</span>:7615,<span class="token string">&quot;send_pkt&quot;</span>:5,<span class="token string">&quot;zone&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;external&quot;</span>,<span class="token string">&quot;send_cnt&quot;</span>:5,<span class="token string">&quot;ip_address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1&quot;</span>,<span class="token string">&quot;keepalive&quot;</span>:60,<span class="token string">&quot;max_inflight&quot;</span>:32,<span class="token string">&quot;recv_oct&quot;</span>:37,<span class="token string">&quot;recv_pkt&quot;</span>:1,<span class="token string">&quot;max_awaiting_rel&quot;</span>:100,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;connected_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-02-20 13:50:11&quot;</span>,<span class="token string">&quot;connected&quot;</span>:true,<span class="token string">&quot;port&quot;</span>:56429,<span class="token string">&quot;send_oct&quot;</span>:12,<span class="token string">&quot;mqueue_dropped&quot;</span>:0,<span class="token string">&quot;max_mqueue&quot;</span>:1000<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-clients-clientid-acl-cache"><a href="#get-api-v4-clients-clientid-acl-cache" class="header-anchor">#</a> GET /api/v4/clients/{clientid}/acl_cache</h3><p>查询指定客户端的 ACL 缓存。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>ACL 详情</td></tr><tr><td>data[0].access</td><td>String</td><td>发布/订阅</td></tr><tr><td>data[0].topic</td><td>String</td><td>MQTT 主题</td></tr><tr><td>data[0].result</td><td>String</td><td>允许/拒绝</td></tr><tr><td>data[0].updated_time</td><td>Integer</td><td>ACL 缓存建立时间</td></tr></tbody></table><p><strong>Examples:</strong></p><p>查询 ACL 缓存</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/clients/example/acl_cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;updated_time&quot;</span>:1582180824571,<span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;result&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;allow&quot;</span>,<span class="token string">&quot;access&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;publish&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-clients-clientid-acl-cache"><a href="#delete-api-v4-clients-clientid-acl-cache" class="header-anchor">#</a> DELETE /api/v4/clients/{clientid}/acl_cache</h3><p>清除指定客户端的 ACL 缓存。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>清除 ACL 缓存</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/clients/example/acl_cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="订阅信息"><a href="#订阅信息" class="header-anchor">#</a> 订阅信息</h2><h3 id="get-api-v4-subscriptions"><a href="#get-api-v4-subscriptions" class="header-anchor">#</a> GET /api/v4/subscriptions</h3><p>返回集群下所有订阅信息，支持分页机制。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>_page</td><td>Integer</td><td>False</td><td>1</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>10000</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p>在 4.1 版本后，支持多条件和模糊查询：</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>topic</td><td>String</td><td>主题，全等查询</td></tr><tr><td>qos</td><td>Enum</td><td>可取值为：<code>0</code>,<code>1</code>,<code>2</code></td></tr><tr><td>share</td><td>String</td><td>共享订阅的组名称</td></tr><tr><td>_match_topic</td><td>String</td><td>主题，匹配查询</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有订阅信息</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>data[0].topic</td><td>String</td><td>订阅主题</td></tr><tr><td>data[0].qos</td><td>Integer</td><td>QoS 等级</td></tr><tr><td>meta</td><td>Object</td><td>同 <code>/api/v4/clients</code></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/subscriptions?_page=1&amp;_limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;78082755-e8eb-4a87-bab7-8277541513f0&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7a1dfceb-89c0-4f7e-992b-dfeb09329f01&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注：在 4.1 后，返回的 <code>meta</code> 内容做了修改：</p><ul><li><code>count</code>：仍表示总数，但在 多条件/模糊查询 时，固定为 -1。</li><li><code>hasnext</code>：为新增字段，表示是否存在下一页。</li></ul><h3 id="get-api-v4-subscriptions-clientid"><a href="#get-api-v4-subscriptions-clientid" class="header-anchor">#</a> GET /api/v4/subscriptions/{clientid}</h3><p>返回集群下指定客户端的订阅信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>所有订阅信息</td></tr><tr><td>data.node</td><td>String</td><td>节点名称</td></tr><tr><td>data.clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>data.topic</td><td>String</td><td>订阅主题</td></tr><tr><td>data.qos</td><td>Integer</td><td>QoS 等级</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/subscriptions/123&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-subscriptions"><a href="#get-api-v4-nodes-node-subscriptions" class="header-anchor">#</a> GET /api/v4/nodes/{node}/subscriptions</h3><p>类似 <a href="#endpoint-get-subscriptions">GET /api/v4/subscriptions</a>，返回指定节点下的所有订阅信息，支持分页机制。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>_page</td><td>Integer</td><td>False</td><td>1</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>10000</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有订阅信息</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>data[0].topic</td><td>String</td><td>订阅主题</td></tr><tr><td>data[0].qos</td><td>Integer</td><td>QoS 等级</td></tr><tr><td>meta</td><td>Object</td><td>同 <code>/api/v4/clients</code></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/subscriptions?_page=1&amp;limit=10&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;78082755-e8eb-4a87-bab7-8277541513f0&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:1,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;7a1dfceb-89c0-4f7e-992b-dfeb09329f01&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-subscriptions-clientid"><a href="#get-api-v4-nodes-node-subscriptions-clientid" class="header-anchor">#</a> GET /api/v4/nodes/{node}/subscriptions/{clientid}</h3><p>类似 <a href="#endpoint-get-subscriptions-by-clientid">GET /api/v4/subscriptions/{clientid}</a>，在指定节点下，查询某 clientid 的所有订阅信息，支持分页机制。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>clientid</td><td>String</td><td>True</td><td>ClientID</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>所有订阅信息</td></tr><tr><td>data.node</td><td>String</td><td>节点名称</td></tr><tr><td>data.clientid</td><td>String</td><td>客户端标识符</td></tr><tr><td>data.topic</td><td>String</td><td>订阅主题</td></tr><tr><td>data.qos</td><td>Integer</td><td>QoS 等级</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/subscriptions/sample&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;qos&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;clientid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sample&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2><h3 id="get-api-v4-routes"><a href="#get-api-v4-routes" class="header-anchor">#</a> GET /api/v4/routes</h3><p>返回集群下的所有路由信息，支持分页机制。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>_page</td><td>Integer</td><td>False</td><td>1</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>10000</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有路由信息</td></tr><tr><td>data[0].topic</td><td>String</td><td>MQTT 主题</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>meta</td><td>Object</td><td>同 <code>/api/v4/clients</code></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/routes&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:2<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/+/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-routes-topic"><a href="#get-api-v4-routes-topic" class="header-anchor">#</a> GET /api/v4/routes/{topic}</h3><p>返回集群下指定主题的路由信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>Integer</td><td>True</td><td>主题</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>所有路由信息</td></tr><tr><td>data.topic</td><td>String</td><td>MQTT 主题</td></tr><tr><td>data.node</td><td>String</td><td>节点名称</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/routes/a%2fb%2fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="消息发布"><a href="#消息发布" class="header-anchor">#</a> 消息发布</h2><h3 id="post-api-v4-mqtt-publish"><a href="#post-api-v4-mqtt-publish" class="header-anchor">#</a> POST /api/v4/mqtt/publish</h3><p>发布 MQTT 消息。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>Optional</td><td></td><td>主题，与 <code>topics</code> 至少指定其中之一</td></tr><tr><td>topics</td><td>String</td><td>Optional</td><td></td><td>以 <code>,</code> 分割的多个主题，使用此字段能够同时发布消息到多个主题</td></tr><tr><td>clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr><tr><td>payload</td><td>String</td><td>Required</td><td></td><td>消息正文</td></tr><tr><td>encoding</td><td>String</td><td>Optional</td><td>plain</td><td>消息正文使用的编码方式，目前仅支持 <code>plain</code> 与 <code>base64</code> 两种</td></tr><tr><td>qos</td><td>Integer</td><td>Optional</td><td>0</td><td>QoS 等级</td></tr><tr><td>retain</td><td>Boolean</td><td>Optional</td><td>false</td><td>是否为保留消息</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/publish&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World&quot;,&quot;qos&quot;:1,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="主题订阅"><a href="#主题订阅" class="header-anchor">#</a> 主题订阅</h2><h3 id="post-api-v4-mqtt-subscribe"><a href="#post-api-v4-mqtt-subscribe" class="header-anchor">#</a> POST /api/v4/mqtt/subscribe</h3><p>订阅 MQTT 主题。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>Optional</td><td></td><td>主题，与 <code>topics</code> 至少指定其中之一</td></tr><tr><td>topics</td><td>String</td><td>Optional</td><td></td><td>以 <code>,</code> 分割的多个主题，使用此字段能够同时订阅多个主题</td></tr><tr><td>clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr><tr><td>qos</td><td>Integer</td><td>Optional</td><td>0</td><td>QoS 等级</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>同时订阅 <code>a</code>, <code>b</code>, <code>c</code> 三个主题</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/subscribe&quot;</span> -d <span class="token string">'{&quot;topics&quot;:&quot;a,b,c&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-mqtt-unsubscribe"><a href="#post-api-v4-mqtt-unsubscribe" class="header-anchor">#</a> POST /api/v4/mqtt/unsubscribe</h3><p>取消订阅。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>Required</td><td></td><td>主题</td></tr><tr><td>clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>取消订阅 <code>a</code> 主题</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/unsubscribe&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="消息批量发布"><a href="#消息批量发布" class="header-anchor">#</a> 消息批量发布</h2><h3 id="post-api-v4-mqtt-publish-batch"><a href="#post-api-v4-mqtt-publish-batch" class="header-anchor">#</a> POST /api/v4/mqtt/publish_batch</h3><p>批量发布 MQTT 消息。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[0].topic</td><td>String</td><td>Optional</td><td></td><td>主题，与 <code>topics</code> 至少指定其中之一</td></tr><tr><td>[0].topics</td><td>String</td><td>Optional</td><td></td><td>以 <code>,</code> 分割的多个主题，使用此字段能够同时发布消息到多个主题</td></tr><tr><td>[0].clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr><tr><td>[0].payload</td><td>String</td><td>Required</td><td></td><td>消息正文</td></tr><tr><td>[0].encoding</td><td>String</td><td>Optional</td><td>plain</td><td>消息正文使用的编码方式，目前仅支持 <code>plain</code> 与 <code>base64</code> 两种</td></tr><tr><td>[0].qos</td><td>Integer</td><td>Optional</td><td>0</td><td>QoS 等级</td></tr><tr><td>[0].retain</td><td>Boolean</td><td>Optional</td><td>false</td><td>是否为保留消息</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/publish_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World&quot;,&quot;qos&quot;:1,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;a/b/c&quot;,&quot;payload&quot;:&quot;Hello World Again&quot;,&quot;qos&quot;:0,&quot;retain&quot;:false,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="主题批量订阅"><a href="#主题批量订阅" class="header-anchor">#</a> 主题批量订阅</h2><h3 id="post-api-v4-mqtt-subscribe-batch"><a href="#post-api-v4-mqtt-subscribe-batch" class="header-anchor">#</a> POST /api/v4/mqtt/subscribe_batch</h3><p>批量订阅 MQTT 主题。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[0].topic</td><td>String</td><td>Optional</td><td></td><td>主题，与 <code>topics</code> 至少指定其中之一</td></tr><tr><td>[0].topics</td><td>String</td><td>Optional</td><td></td><td>以 <code>,</code> 分割的多个主题，使用此字段能够同时订阅多个主题</td></tr><tr><td>[0].clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr><tr><td>[0].qos</td><td>Integer</td><td>Optional</td><td>0</td><td>QoS 等级</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>一次性订阅 <code>a</code>, <code>b</code>, <code>c</code> 三个主题</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/subscribe_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;b&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;c&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-mqtt-unsubscribe-batch"><a href="#post-api-v4-mqtt-unsubscribe-batch" class="header-anchor">#</a> POST /api/v4/mqtt/unsubscribe_batch</h3><p>批量取消订阅。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>[0].topic</td><td>String</td><td>Required</td><td></td><td>主题</td></tr><tr><td>[0].clientid</td><td>String</td><td>Required</td><td></td><td>客户端标识符</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>一次性取消订阅 <code>a</code>, <code>b</code> 主题</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/mqtt/unsubscribe_batch&quot;</span> -d <span class="token string">'[{&quot;topic&quot;:&quot;a&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;},{&quot;topic&quot;:&quot;b&quot;,&quot;qos&quot;:1,&quot;clientid&quot;:&quot;example&quot;}]'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2><h3 id="get-api-v4-plugins"><a href="#get-api-v4-plugins" class="header-anchor">#</a> GET /api/v4/plugins</h3><p>返回集群下的所有插件信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有路由信息</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].plugins</td><td>Array</td><td>插件信息，由对象组成的数组，见下文</td></tr><tr><td>data[0].plugins.name</td><td>String</td><td>插件名称</td></tr><tr><td>data[0].plugins.version</td><td>String</td><td>插件版本</td></tr><tr><td>data[0].plugins.description</td><td>String</td><td>插件描述</td></tr><tr><td>data[0].plugins.active</td><td>Boolean</td><td>插件是否启动</td></tr><tr><td>data[0].plugins.type</td><td>String</td><td>插件类型，目前有<br><code>auth</code>、<code>bridge</code>、<code>feature</code>、<code>protocol</code> 四种类型</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/plugins&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;plugins&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;auth&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_auth_clientid&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Authentication with ClientId/Password&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-plugins"><a href="#get-api-v4-nodes-node-plugins" class="header-anchor">#</a> GET /api/v4/nodes/{node}/plugins</h3><p>类似 <a href="#endpoint-get-plugins">GET /api/v4/plugins</a>，返回指定节点下的插件信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有路由信息</td></tr><tr><td>data[0].name</td><td>String</td><td>插件名称</td></tr><tr><td>data[0].version</td><td>String</td><td>插件版本</td></tr><tr><td>data[0].description</td><td>String</td><td>插件描述</td></tr><tr><td>data[0].active</td><td>Boolean</td><td>插件是否启动</td></tr><tr><td>data[0].type</td><td>String</td><td>插件类型，目前有<br><code>auth</code>、<code>bridge</code>、<code>feature</code>、<code>protocol</code> 四种类型</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;develop&quot;</span>,<span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;auth&quot;</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_auth_clientid&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Authentication with ClientId/Password&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-plugins-plugin-load"><a href="#put-api-v4-nodes-node-plugins-plugin-load" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/load</h3><p>加载指定节点下的指定插件。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/load&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-plugins-plugin-unload"><a href="#put-api-v4-nodes-node-plugins-plugin-unload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/unload</h3><p>卸载指定节点下的指定插件。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/unload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-plugins-plugin-reload"><a href="#put-api-v4-nodes-node-plugins-plugin-reload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/plugins/{plugin}/reload</h3><p>重新加载指定节点下的指定插件。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/plugins/emqx_delayed_publish/reload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="监听器"><a href="#监听器" class="header-anchor">#</a> 监听器</h2><h3 id="get-api-v4-listeners"><a href="#get-api-v4-listeners" class="header-anchor">#</a> GET /api/v4/listeners</h3><p>返回集群下的所有监听器信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点的监听器列表</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].listeners</td><td>Array of Objects</td><td>监听器列表</td></tr><tr><td>data[0].listeners[0].acceptors</td><td>Integer</td><td>Acceptor 进程数量</td></tr><tr><td>data[0].listeners[0].listen_on</td><td>String</td><td>监听端口</td></tr><tr><td>data[0].listeners[0].protocol</td><td>String</td><td>插件描述</td></tr><tr><td>data[0].listeners[0].current_conns</td><td>Integer</td><td>插件是否启动</td></tr><tr><td>data[0].listeners[0].max_conns</td><td>Integer</td><td>允许建立的最大连接数量</td></tr><tr><td>data[0].listeners[0].shutdown_count</td><td>Array of Objects</td><td>连接关闭原因及计数</td></tr></tbody></table><p><em>常见 shutdown_count</em></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>normal</td><td>Integer</td><td>正常关闭的连接数量，仅在计数大于 0 时返回</td></tr><tr><td>kicked</td><td>Integer</td><td>被手动踢除的连接数量，仅在计数大于 0 时返回</td></tr><tr><td>discarded</td><td>Integer</td><td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>true</code> 而被丢弃的连接数量</td></tr><tr><td>takeovered</td><td>Integer</td><td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而被接管的连接数量</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/listeners&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;listeners&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ssl&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:16<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0:1883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:13,<span class="token string">&quot;acceptors&quot;</span>:8<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:11883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:management&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8081&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;https:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ws:8083&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:wss:8084&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:16,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-listeners"><a href="#get-api-v4-nodes-node-listeners" class="header-anchor">#</a> GET /api/v4/nodes/{node}/listeners</h3><p>类似 <a href="#endpoint-get-listeners">GET /api/v4/listeners</a>，返回指定节点的监听器信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点的监听器列表</td></tr><tr><td>data[0].acceptors</td><td>Integer</td><td>Acceptor 进程数量</td></tr><tr><td>data[0].listen_on</td><td>String</td><td>监听端口</td></tr><tr><td>data[0].protocol</td><td>String</td><td>插件描述</td></tr><tr><td>data[0].current_conns</td><td>Integer</td><td>插件是否启动</td></tr><tr><td>data[0].max_conns</td><td>Integer</td><td>允许建立的最大连接数量</td></tr><tr><td>data[0].shutdown_count</td><td>Array of Objects</td><td>连接关闭原因及计数</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/listeners&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ssl&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:16<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0:1883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:13,<span class="token string">&quot;acceptors&quot;</span>:8<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:tcp&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:1024000,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;127.0.0.1:11883&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http:management&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8081&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;https:dashboard&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:512,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;18084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:2<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:ws:8083&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:102400,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8083&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:1,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;shutdown_count&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;protocol&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;mqtt:wss:8084&quot;</span>,<span class="token string">&quot;max_conns&quot;</span>:16,<span class="token string">&quot;listen_on&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;8084&quot;</span>,<span class="token string">&quot;current_conns&quot;</span>:0,<span class="token string">&quot;acceptors&quot;</span>:4<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="内置模块"><a href="#内置模块" class="header-anchor">#</a> 内置模块</h2><h3 id="get-api-v4-modules"><a href="#get-api-v4-modules" class="header-anchor">#</a> GET /api/v4/modules</h3><p>返回集群下所有内置模块信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的内置模块列表</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].modules</td><td>Object</td><td>内置模块信息列表，详见下面的 modules:</td></tr></tbody></table><p><strong>modules:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>模块名</td></tr><tr><td>description</td><td>String</td><td>模块功能描述</td></tr><tr><td>active</td><td>Boolean</td><td>是否处于活跃状态（是否正在运行）</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/modules&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;modules&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_delayed&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Delayed Publish Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_topic_metrics&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Topic Metrics Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_subscription&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Subscription Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_acl_internal&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Internal ACL Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_rewrite&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Topic Rewrite Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:false<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_mod_presence&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;EMQX Presence Module&quot;</span>,<span class="token string">&quot;active&quot;</span>:true<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-modules"><a href="#get-api-v4-nodes-node-modules" class="header-anchor">#</a> GET /api/v4/nodes/{node}/modules</h3><p>类似 <a href="#endpoint-get-modules">GET /api/v4/modules</a>，返回指定节点下所有内置模块信息。</p><h3 id="put-api-v4-modules-module-load"><a href="#put-api-v4-modules-module-load" class="header-anchor">#</a> PUT /api/v4/modules/{module}/load</h3><p>加载集群下所有节点的指定内置模块。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_topic_metrics/load&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-modules-module-load"><a href="#put-api-v4-nodes-node-modules-module-load" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/load</h3><p>类似 <a href="#endpoint-load-module">PUT /api/v4/modules/{module}/load</a>，加载指定节点下的指定内置模块。</p><h3 id="put-api-v4-modules-module-unload"><a href="#put-api-v4-modules-module-unload" class="header-anchor">#</a> PUT /api/v4/modules/{module}/unload</h3><p>卸载集群下所有节点的指定内置模块。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_topic_metrics/unload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-modules-module-unload"><a href="#put-api-v4-nodes-node-modules-module-unload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/unload</h3><p>类似 <a href="#endpoint-unload-module">PUT /api/v4/modules/{module}/unload</a>，卸载指定节点下的指定内置模块。</p><h3 id="put-api-v4-modules-module-reload"><a href="#put-api-v4-modules-module-reload" class="header-anchor">#</a> PUT /api/v4/modules/{module}/reload</h3><p>重新加载集群下所有节点的指定内置模块，仅为 <code>emqx_mod_acl_internal</code> 提供此功能。</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X PUT <span class="token string">&quot;http://localhost:8081/api/v4/modules/emqx_mod_acl_internal/reload&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="put-api-v4-nodes-node-modules-module-reload"><a href="#put-api-v4-nodes-node-modules-module-reload" class="header-anchor">#</a> PUT /api/v4/nodes/{node}/modules/{module}/reload</h3><p>类似 <a href="#endpoint-reload-module">PUT /api/v4/modules/{module}/reload</a>，重新加载指定节点下的指定内置模块，仅为 <code>emqx_mod_acl_internal</code> 提供此功能。</p><h2 id="统计指标"><a href="#统计指标" class="header-anchor">#</a> 统计指标</h2><h3 id="get-api-v4-metrics"><a href="#get-api-v4-metrics" class="header-anchor">#</a> GET /api/v4/metrics</h3><p>返回集群下所有统计指标数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的统计指标列表</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].metrics</td><td>Object</td><td>监控指标数据，详见下面的 metrics：</td></tr></tbody></table><p><strong>metrics：</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>bytes.received</td><td>Integer</td><td>EMQX 接收的字节数</td></tr><tr><td>bytes.sent</td><td>Integer</td><td>EMQX 在此连接上发送的字节数</td></tr><tr><td>client.authenticate</td><td>Integer</td><td>客户端认证次数</td></tr><tr><td>client.auth.anonymous</td><td>Integer</td><td>匿名登录的客户端数量</td></tr><tr><td>client.connect</td><td>Integer</td><td>客户端连接次数</td></tr><tr><td>client.connack</td><td>Integer</td><td>发送 CONNACK 报文的次数</td></tr><tr><td>client.connected</td><td>Integer</td><td>客户端成功连接次数</td></tr><tr><td>client.disconnected</td><td>Integer</td><td>客户端断开连接次数</td></tr><tr><td>client.check_acl</td><td>Integer</td><td>ACL 规则检查次数</td></tr><tr><td>client.subscribe</td><td>Integer</td><td>客户端订阅次数</td></tr><tr><td>client.unsubscribe</td><td>Integer</td><td>客户端取消订阅次数</td></tr><tr><td>delivery.dropped.too_large</td><td>Integer</td><td>发送时由于长度超过限制而被丢弃的消息数量</td></tr><tr><td>delivery.dropped.queue_full</td><td>Integer</td><td>发送时由于消息队列满而被丢弃的 QoS 不为 0 的消息数量</td></tr><tr><td>delivery.dropped.qos0_msg</td><td>Integer</td><td>发送时由于消息队列满而被丢弃的 QoS 为 0 的消息数量</td></tr><tr><td>delivery.dropped.expired</td><td>Integer</td><td>发送时由于消息过期而被丢弃的消息数量</td></tr><tr><td>delivery.dropped.no_local</td><td>Integer</td><td>发送时由于 <code>No Local</code> 订阅选项而被丢弃的消息数量</td></tr><tr><td>delivery.dropped</td><td>Integer</td><td>发送时丢弃的消息总数</td></tr><tr><td>messages.delayed</td><td>Integer</td><td>EMQX 存储的延迟发布的消息数量</td></tr><tr><td>messages.delivered</td><td>Integer</td><td>EMQX 内部转发到订阅进程的消息数量</td></tr><tr><td>messages.dropped</td><td>Integer</td><td>EMQX 内部转发到订阅进程前丢弃的消息总数</td></tr><tr><td>messages.dropped.expired</td><td>Integer</td><td>接收时由于消息过期而被丢弃的消息数量</td></tr><tr><td>messages.dropped.no_subscribers</td><td>Integer</td><td>由于没有订阅者而被丢弃的消息数量</td></tr><tr><td>messages.forward</td><td>Integer</td><td>向其他节点转发的消息数量</td></tr><tr><td>messages.publish</td><td>Integer</td><td>除系统消息外发布的消息数量</td></tr><tr><td>messages.qos0.received</td><td>Integer</td><td>接收来自客户端的 QoS 0 消息数量</td></tr><tr><td>messages.qos1.received</td><td>Integer</td><td>接收来自客户端的 QoS 1 消息数量</td></tr><tr><td>messages.qos2.received</td><td>Integer</td><td>接收来自客户端的 QoS 2 消息数量</td></tr><tr><td>messages.qos0.sent</td><td>Integer</td><td>发送给客户端的 QoS 0 消息数量</td></tr><tr><td>messages.qos1.sent</td><td>Integer</td><td>发送给客户端的 QoS 1 消息数量</td></tr><tr><td>messages.qos2.sent</td><td>Integer</td><td>发送给客户端的 QoS 2 消息数量</td></tr><tr><td>messages.received</td><td>Integer</td><td>接收来自客户端的消息数量，等于 <code>messages.qos0.received</code>，<code>messages.qos1.received</code> 与 <code>messages.qos2.received</code> 之和</td></tr><tr><td>messages.sent</td><td>Integer</td><td>发送给客户端的消息数量，等于 <code>messages.qos0.sent</code>，<code>messages.qos1.sent</code> 与 <code>messages.qos2.sent</code> 之和</td></tr><tr><td>messages.retained</td><td>Integer</td><td>EMQX 存储的保留消息数量</td></tr><tr><td>messages.acked</td><td>Integer</td><td>接收的 PUBACK 和 PUBREC 报文数量</td></tr><tr><td>packets.received</td><td>Integer</td><td>接收的报文数量</td></tr><tr><td>packets.sent</td><td>Integer</td><td>发送的报文数量</td></tr><tr><td>packets.connect.received</td><td>Integer</td><td>接收的 CONNECT 报文数量</td></tr><tr><td>packets.connack.auth_error</td><td>Integer</td><td>接收的认证失败的 CONNECT 报文数量</td></tr><tr><td>packets.connack.error</td><td>Integer</td><td>接收的未成功连接的 CONNECT 报文数量</td></tr><tr><td>packets.connack.sent</td><td>Integer</td><td>发送的 CONNACK 报文数量</td></tr><tr><td>packets.publish.received</td><td>Integer</td><td>接收的 PUBLISH 报文数量</td></tr><tr><td>packets.publish.sent</td><td>Integer</td><td>发送的 PUBLISH 报文数量</td></tr><tr><td>packets.publish.inuse</td><td>Integer</td><td>接收的报文标识符已被占用的 PUBLISH 报文数量</td></tr><tr><td>packets.publish.auth_error</td><td>Integer</td><td>接收的未通过 ACL 检查的 PUBLISH 报文数量</td></tr><tr><td>packets.publish.error</td><td>Integer</td><td>接收的无法被发布的 PUBLISH 报文数量</td></tr><tr><td>packets.publish.dropped</td><td>Integer</td><td>超出接收限制而被丢弃的消息数量</td></tr><tr><td>packets.puback.received</td><td>Integer</td><td>接收的 PUBACK 报文数量</td></tr><tr><td>packets.puback.sent</td><td>Integer</td><td>发送的 PUBACK 报文数量</td></tr><tr><td>packets.puback.inuse</td><td>Integer</td><td>接收的报文标识符已被占用的 PUBACK 报文数量</td></tr><tr><td>packets.puback.missed</td><td>Integer</td><td>接收的未知报文标识符 PUBACK 报文数量</td></tr><tr><td>packets.pubrec.received</td><td>Integer</td><td>接收的 PUBREC 报文数量</td></tr><tr><td>packets.pubrec.sent</td><td>Integer</td><td>发送的 PUBREC 报文数量</td></tr><tr><td>packets.pubrec.inuse</td><td>Integer</td><td>接收的报文标识符已被占用的 PUBREC 报文数量</td></tr><tr><td>packets.pubrec.missed</td><td>Integer</td><td>接收的未知报文标识符 PUBREC 报文数量</td></tr><tr><td>packets.pubrel.received</td><td>Integer</td><td>接收的 PUBREL 报文数量</td></tr><tr><td>packets.pubrel.sent</td><td>Integer</td><td>发送的 PUBREL 报文数量</td></tr><tr><td>packets.pubrel.missed</td><td>Integer</td><td>接收的未知报文标识符 PUBREL 报文数量</td></tr><tr><td>packets.pubcomp.received</td><td>Integer</td><td>接收的 PUBCOMP 报文数量</td></tr><tr><td>packets.pubcomp.sent</td><td>Integer</td><td>发送的 PUBCOMP 报文数量</td></tr><tr><td>packets.pubcomp.inuse</td><td>Integer</td><td>接收的报文标识符已被占用的 PUBCOMP 报文数量</td></tr><tr><td>packets.pubcomp.missed</td><td>Integer</td><td>发送的 PUBCOMP 报文数量</td></tr><tr><td>packets.subscribe.received</td><td>Integer</td><td>接收的 SUBSCRIBE 报文数量</td></tr><tr><td>packets.subscribe.error</td><td>Integer</td><td>接收的订阅失败的 SUBSCRIBE 报文数量</td></tr><tr><td>packets.subscribe.auth_error</td><td>Integer</td><td>接收的未通过 ACL 检查的 SUBACK 报文数量</td></tr><tr><td>packets.suback.sent</td><td>Integer</td><td>发送的 SUBACK 报文数量</td></tr><tr><td>packets.unsubscribe.received</td><td>Integer</td><td>接收的 UNSUBSCRIBE 报文数量</td></tr><tr><td>packets.unsubscribe.error</td><td>Integer</td><td>接收的取消订阅失败的 UNSUBSCRIBE 报文数量</td></tr><tr><td>packets.unsuback.sent</td><td>Integer</td><td>发送的 UNSUBACK 报文数量</td></tr><tr><td>packets.pingreq.received</td><td>Integer</td><td>接收的 PINGREQ 报文数量</td></tr><tr><td>packets.pingresp.sent</td><td>Integer</td><td>发送的 PUBRESP 报文数量</td></tr><tr><td>packets.disconnect.received</td><td>Integer</td><td>接收的 DISCONNECT 报文数量</td></tr><tr><td>packets.disconnect.sent</td><td>Integer</td><td>发送的 DISCONNECT 报文数量</td></tr><tr><td>packets.auth.received</td><td>Integer</td><td>接收的 AUTH 报文数量</td></tr><tr><td>packets.auth.sent</td><td>Integer</td><td>发送的 AUTH 报文数量</td></tr><tr><td>session.created</td><td>Integer</td><td>创建的会话数量</td></tr><tr><td>session.discarded</td><td>Integer</td><td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>true</code> 而被丢弃的会话数量</td></tr><tr><td>session.resumed</td><td>Integer</td><td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而恢复的会话数量</td></tr><tr><td>session.takeovered</td><td>Integer</td><td>由于 <code>Clean Session</code> 或 <code>Clean Start</code> 为 <code>false</code> 而被接管的会话数量</td></tr><tr><td>session.terminated</td><td>Integer</td><td>终结的会话数量</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.dropped.no_subscribers&quot;</span>:0,<span class="token string">&quot;packets.connack.sent&quot;</span>:13,<span class="token string">&quot;bytes.received&quot;</span>:805,<span class="token string">&quot;messages.received&quot;</span>:0,<span class="token string">&quot;packets.unsuback.sent&quot;</span>:0,<span class="token string">&quot;messages.delivered&quot;</span>:0,<span class="token string">&quot;client.disconnected&quot;</span>:0,<span class="token string">&quot;packets.puback.sent&quot;</span>:0,<span class="token string">&quot;packets.subscribe.auth_error&quot;</span>:0,<span class="token string">&quot;delivery.dropped.queue_full&quot;</span>:0,<span class="token string">&quot;messages.forward&quot;</span>:0,<span class="token string">&quot;delivery.dropped.qos0_msg&quot;</span>:0,<span class="token string">&quot;delivery.dropped.expired&quot;</span>:0,<span class="token string">&quot;bytes.sent&quot;</span>:52,<span class="token string">&quot;messages.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped.no_local&quot;</span>:0,<span class="token string">&quot;packets.pubrec.received&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.received&quot;</span>:0,<span class="token string">&quot;client.check_acl&quot;</span>:0,<span class="token string">&quot;packets.puback.received&quot;</span>:0,<span class="token string">&quot;session.takeovered&quot;</span>:0,<span class="token string">&quot;messages.dropped.expired&quot;</span>:0,<span class="token string">&quot;messages.qos1.sent&quot;</span>:0,<span class="token string">&quot;messages.retained&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.sent&quot;</span>:0,<span class="token string">&quot;packets.received&quot;</span>:13,<span class="token string">&quot;messages.acked&quot;</span>:0,<span class="token string">&quot;session.terminated&quot;</span>:0,<span class="token string">&quot;packets.sent&quot;</span>:13,<span class="token string">&quot;packets.unsubscribe.error&quot;</span>:0,<span class="token string">&quot;client.connect&quot;</span>:13,<span class="token string">&quot;packets.pubrec.missed&quot;</span>:0,<span class="token string">&quot;packets.auth.sent&quot;</span>:0,<span class="token string">&quot;packets.disconnect.received&quot;</span>:0,<span class="token string">&quot;messages.qos2.sent&quot;</span>:0,<span class="token string">&quot;client.auth.anonymous&quot;</span>:13,<span class="token string">&quot;packets.auth.received&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.received&quot;</span>:0,<span class="token string">&quot;packets.publish.auth_error&quot;</span>:0,<span class="token string">&quot;client.connected&quot;</span>:13,<span class="token string">&quot;packets.disconnect.sent&quot;</span>:0,<span class="token string">&quot;session.created&quot;</span>:13,<span class="token string">&quot;packets.pingreq.received&quot;</span>:0,<span class="token string">&quot;messages.dropped&quot;</span>:0,<span class="token string">&quot;packets.publish.sent&quot;</span>:0,<span class="token string">&quot;session.resumed&quot;</span>:0,<span class="token string">&quot;packets.connack.auth_error&quot;</span>:0,<span class="token string">&quot;packets.pubrel.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.sent&quot;</span>:0,<span class="token string">&quot;messages.qos2.received&quot;</span>:0,<span class="token string">&quot;messages.qos0.received&quot;</span>:0,<span class="token string">&quot;packets.publish.inuse&quot;</span>:0,<span class="token string">&quot;client.unsubscribe&quot;</span>:0,<span class="token string">&quot;packets.pubrel.received&quot;</span>:0,<span class="token string">&quot;client.connack&quot;</span>:13,<span class="token string">&quot;packets.connack.error&quot;</span>:0,<span class="token string">&quot;packets.publish.dropped&quot;</span>:0,<span class="token string">&quot;packets.publish.received&quot;</span>:0,<span class="token string">&quot;client.subscribe&quot;</span>:0,<span class="token string">&quot;packets.subscribe.error&quot;</span>:0,<span class="token string">&quot;packets.suback.sent&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.missed&quot;</span>:0,<span class="token string">&quot;messages.qos1.received&quot;</span>:0,<span class="token string">&quot;delivery.dropped.too_large&quot;</span>:0,<span class="token string">&quot;packets.pingresp.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrel.missed&quot;</span>:0,<span class="token string">&quot;messages.qos0.sent&quot;</span>:0,<span class="token string">&quot;packets.connect.received&quot;</span>:13,<span class="token string">&quot;packets.puback.missed&quot;</span>:0,<span class="token string">&quot;packets.subscribe.received&quot;</span>:0,<span class="token string">&quot;packets.puback.inuse&quot;</span>:0,<span class="token string">&quot;client.authenticate&quot;</span>:13,<span class="token string">&quot;messages.publish&quot;</span>:0,<span class="token string">&quot;packets.pubrec.inuse&quot;</span>:0,<span class="token string">&quot;packets.publish.error&quot;</span>:0,<span class="token string">&quot;messages.delayed&quot;</span>:0,<span class="token string">&quot;session.discarded&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-metrics"><a href="#get-api-v4-nodes-node-metrics" class="header-anchor">#</a> GET /api/v4/nodes/{node}/metrics</h3><p>类似 <a href="#endpoint-get-metrics">GET /api/v4/metrics</a>，返回指定节点下所有监控指标数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>各节点上的统计指标列表，详见 <a href="#endpoint-get-metrics">GET /api/v4/metrics</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;bytes.received&quot;</span>:0,<span class="token string">&quot;client.connected&quot;</span>:0,<span class="token string">&quot;packets.pingreq.received&quot;</span>:0,<span class="token string">&quot;messages.delayed&quot;</span>:0,<span class="token string">&quot;packets.puback.sent&quot;</span>:0,<span class="token string">&quot;packets.pingresp.sent&quot;</span>:0,<span class="token string">&quot;packets.publish.auth_error&quot;</span>:0,<span class="token string">&quot;client.check_acl&quot;</span>:0,<span class="token string">&quot;delivery.dropped.queue_full&quot;</span>:0,<span class="token string">&quot;packets.publish.error&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.received&quot;</span>:0,<span class="token string">&quot;bytes.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrec.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.missed&quot;</span>:0,<span class="token string">&quot;packets.pubrel.sent&quot;</span>:0,<span class="token string">&quot;delivery.dropped.too_large&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.missed&quot;</span>:0,<span class="token string">&quot;packets.subscribe.error&quot;</span>:0,<span class="token string">&quot;packets.suback.sent&quot;</span>:0,<span class="token string">&quot;messages.qos2.sent&quot;</span>:0,<span class="token string">&quot;messages.qos1.sent&quot;</span>:0,<span class="token string">&quot;packets.pubrel.missed&quot;</span>:0,<span class="token string">&quot;messages.publish&quot;</span>:0,<span class="token string">&quot;messages.forward&quot;</span>:0,<span class="token string">&quot;packets.auth.received&quot;</span>:0,<span class="token string">&quot;delivery.dropped&quot;</span>:0,<span class="token string">&quot;packets.sent&quot;</span>:0,<span class="token string">&quot;packets.puback.inuse&quot;</span>:0,<span class="token string">&quot;delivery.dropped.qos0_msg&quot;</span>:0,<span class="token string">&quot;packets.publish.dropped&quot;</span>:0,<span class="token string">&quot;packets.disconnect.sent&quot;</span>:0,<span class="token string">&quot;packets.auth.sent&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.received&quot;</span>:0,<span class="token string">&quot;session.takeovered&quot;</span>:0,<span class="token string">&quot;messages.delivered&quot;</span>:0,<span class="token string">&quot;client.auth.anonymous&quot;</span>:0,<span class="token string">&quot;packets.connack.error&quot;</span>:0,<span class="token string">&quot;packets.connack.sent&quot;</span>:0,<span class="token string">&quot;packets.subscribe.auth_error&quot;</span>:0,<span class="token string">&quot;packets.unsuback.sent&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.sent&quot;</span>:0,<span class="token string">&quot;packets.publish.sent&quot;</span>:0,<span class="token string">&quot;client.connack&quot;</span>:0,<span class="token string">&quot;packets.publish.received&quot;</span>:0,<span class="token string">&quot;client.subscribe&quot;</span>:0,<span class="token string">&quot;session.created&quot;</span>:0,<span class="token string">&quot;delivery.dropped.expired&quot;</span>:0,<span class="token string">&quot;client.unsubscribe&quot;</span>:0,<span class="token string">&quot;packets.received&quot;</span>:0,<span class="token string">&quot;packets.pubrel.received&quot;</span>:0,<span class="token string">&quot;packets.unsubscribe.error&quot;</span>:0,<span class="token string">&quot;messages.qos0.sent&quot;</span>:0,<span class="token string">&quot;packets.connack.auth_error&quot;</span>:0,<span class="token string">&quot;session.resumed&quot;</span>:0,<span class="token string">&quot;delivery.dropped.no_local&quot;</span>:0,<span class="token string">&quot;packets.puback.missed&quot;</span>:0,<span class="token string">&quot;packets.pubcomp.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.sent&quot;</span>:0,<span class="token string">&quot;messages.dropped.expired&quot;</span>:0,<span class="token string">&quot;messages.dropped.no_subscribers&quot;</span>:0,<span class="token string">&quot;session.discarded&quot;</span>:0,<span class="token string">&quot;messages.sent&quot;</span>:0,<span class="token string">&quot;messages.received&quot;</span>:0,<span class="token string">&quot;packets.puback.received&quot;</span>:0,<span class="token string">&quot;messages.qos0.received&quot;</span>:0,<span class="token string">&quot;messages.acked&quot;</span>:0,<span class="token string">&quot;client.connect&quot;</span>:0,<span class="token string">&quot;packets.disconnect.received&quot;</span>:0,<span class="token string">&quot;client.disconnected&quot;</span>:0,<span class="token string">&quot;messages.retained&quot;</span>:3,<span class="token string">&quot;session.terminated&quot;</span>:0,<span class="token string">&quot;packets.publish.inuse&quot;</span>:0,<span class="token string">&quot;packets.pubrec.received&quot;</span>:0,<span class="token string">&quot;messages.qos2.received&quot;</span>:0,<span class="token string">&quot;messages.dropped&quot;</span>:0,<span class="token string">&quot;packets.connect.received&quot;</span>:0,<span class="token string">&quot;client.authenticate&quot;</span>:0,<span class="token string">&quot;packets.subscribe.received&quot;</span>:0,<span class="token string">&quot;messages.qos1.received&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="主题统计指标"><a href="#主题统计指标" class="header-anchor">#</a> 主题统计指标</h2><h3 id="get-api-v4-topic-metrics"><a href="#get-api-v4-topic-metrics" class="header-anchor">#</a> GET /api/v4/topic-metrics</h3><p>返回所有主题统计指标数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的统计指标列表</td></tr><tr><td>data[0].topic</td><td>String</td><td>主题名</td></tr><tr><td>data[0].metrics</td><td>Object</td><td>主题统计指标数据，详见下面的 metrics:</td></tr></tbody></table><p><strong>metrics:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>messages.qos2.out.rate</td><td>Integer</td><td>QoS 2 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos2.out.count</td><td>Integer</td><td>QoS 2 消息发送数量统计</td></tr><tr><td>messages.qos2.in.rate</td><td>Integer</td><td>QoS 2 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos2.in.count</td><td>Integer</td><td>QoS 2 消息接收数量统计</td></tr><tr><td>messages.qos1.out.rate</td><td>Integer</td><td>QoS 1 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos1.out.count</td><td>Integer</td><td>QoS 1 消息发送数量统计</td></tr><tr><td>messages.qos1.in.rate</td><td>Integer</td><td>QoS 1 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos1.in.count</td><td>Integer</td><td>QoS 1 消息接收数量统计</td></tr><tr><td>messages.qos0.out.rate</td><td>Integer</td><td>QoS 0 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos0.out.count</td><td>Integer</td><td>QoS 0 消息发送数量统计</td></tr><tr><td>messages.qos0.in.rate</td><td>Integer</td><td>QoS 0 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos0.in.count</td><td>Integer</td><td>QoS 0 消息接收数量统计</td></tr><tr><td>messages.out.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均发送速率</td></tr><tr><td>messages.out.count</td><td>Integer</td><td>MQTT 消息发送数量统计</td></tr><tr><td>messages.in.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均接收速率</td></tr><tr><td>messages.in.count</td><td>Integer</td><td>MQTT 消息接收数量统计</td></tr><tr><td>messages.dropped.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均丢弃速率</td></tr><tr><td>messages.dropped.count</td><td>Integer</td><td>MQTT 消息丢弃数量统计</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a/b/c&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.qos2.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos2.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.in.count&quot;</span>:0,<span class="token string">&quot;messages.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.out.count&quot;</span>:0,<span class="token string">&quot;messages.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.in.count&quot;</span>:0,<span class="token string">&quot;messages.dropped.rate&quot;</span>:0.0,<span class="token string">&quot;messages.dropped.count&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="get-api-v4-topic-metrics-topic"><a href="#get-api-v4-topic-metrics-topic" class="header-anchor">#</a> GET /api/v4/topic-metrics/{topic}</h3><p>返回指定主题的统计指标数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>主题统计指标数据，详见下面的 data:</td></tr></tbody></table><p><strong>data:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>messages.qos2.out.rate</td><td>Integer</td><td>QoS 2 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos2.out.count</td><td>Integer</td><td>QoS 2 消息发送数量统计</td></tr><tr><td>messages.qos2.in.rate</td><td>Integer</td><td>QoS 2 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos2.in.count</td><td>Integer</td><td>QoS 2 消息接收数量统计</td></tr><tr><td>messages.qos1.out.rate</td><td>Integer</td><td>QoS 1 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos1.out.count</td><td>Integer</td><td>QoS 1 消息发送数量统计</td></tr><tr><td>messages.qos1.in.rate</td><td>Integer</td><td>QoS 1 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos1.in.count</td><td>Integer</td><td>QoS 1 消息接收数量统计</td></tr><tr><td>messages.qos0.out.rate</td><td>Integer</td><td>QoS 0 消息 5 秒内平均发送速率</td></tr><tr><td>messages.qos0.out.count</td><td>Integer</td><td>QoS 0 消息发送数量统计</td></tr><tr><td>messages.qos0.in.rate</td><td>Integer</td><td>QoS 0 消息 5 秒内平均接收速率</td></tr><tr><td>messages.qos0.in.count</td><td>Integer</td><td>QoS 0 消息接收数量统计</td></tr><tr><td>messages.out.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均发送速率</td></tr><tr><td>messages.out.count</td><td>Integer</td><td>MQTT 消息发送数量统计</td></tr><tr><td>messages.in.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均接收速率</td></tr><tr><td>messages.in.count</td><td>Integer</td><td>MQTT 消息接收数量统计</td></tr><tr><td>messages.dropped.rate</td><td>Integer</td><td>MQTT 消息 5 秒内平均丢弃速率</td></tr><tr><td>messages.dropped.count</td><td>Integer</td><td>MQTT 消息丢弃数量统计</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics/a%2Fb%2Fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;messages.qos2.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos2.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos2.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos1.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos1.in.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.out.count&quot;</span>:0,<span class="token string">&quot;messages.qos0.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.qos0.in.count&quot;</span>:0,<span class="token string">&quot;messages.out.rate&quot;</span>:0.0,<span class="token string">&quot;messages.out.count&quot;</span>:0,<span class="token string">&quot;messages.in.rate&quot;</span>:0.0,<span class="token string">&quot;messages.in.count&quot;</span>:0,<span class="token string">&quot;messages.dropped.rate&quot;</span>:0.0,<span class="token string">&quot;messages.dropped.count&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-topic-metrics"><a href="#post-api-v4-topic-metrics" class="header-anchor">#</a> POST /api/v4/topic-metrics</h3><p>开启对指定主题的指标统计。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td>String</td><td>Required</td><td></td><td>MQTT 主题名</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>开启对 <code>a/b/c</code> 主题的指标统计</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span> -d <span class="token string">'{&quot;topic&quot;:&quot;a/b/c&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-topic-metrics-topic"><a href="#delete-api-v4-topic-metrics-topic" class="header-anchor">#</a> DELETE /api/v4/topic-metrics/{topic}</h3><p>关闭对指定主题的指标统计。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>关闭对 <code>a/b/c</code> 主题的指标统计</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics/a%2Fb%2Fc&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-topic-metrics"><a href="#delete-api-v4-topic-metrics" class="header-anchor">#</a> DELETE /api/v4/topic-metrics</h3><p>关闭所有主题的指标统计。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>关闭所有主题的指标统计</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/topic-metrics&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="状态"><a href="#状态" class="header-anchor">#</a> 状态</h2><h3 id="get-api-v4-stats"><a href="#get-api-v4-stats" class="header-anchor">#</a> GET /api/v4/stats</h3><p>返回集群下所有状态数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的状态数据列表</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].stats</td><td>Array</td><td>状态数据，详见下面的 <em>stats</em></td></tr></tbody></table><p><strong>stats:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>connections.count</td><td>Integer</td><td>当前连接数量</td></tr><tr><td>connections.max</td><td>Integer</td><td>连接数量的历史最大值</td></tr><tr><td>channels.count</td><td>Integer</td><td>即 <code>sessions.count</code></td></tr><tr><td>channels.max</td><td>Integer</td><td>即 <code>session.max</code></td></tr><tr><td>sessions.count</td><td>Integer</td><td>当前会话数量</td></tr><tr><td>sessions.max</td><td>Integer</td><td>会话数量的历史最大值</td></tr><tr><td>topics.count</td><td>Integer</td><td>当前主题数量</td></tr><tr><td>topics.max</td><td>Integer</td><td>主题数量的历史最大值</td></tr><tr><td>suboptions.count</td><td>Integer</td><td>即 <code>subscriptions.count</code></td></tr><tr><td>suboptions.max</td><td>Integer</td><td>即 <code>subscriptions.max</code></td></tr><tr><td>subscribers.count</td><td>Integer</td><td>当前订阅者数量</td></tr><tr><td>subscribers.max</td><td>Integer</td><td>订阅者数量的历史最大值</td></tr><tr><td>subscriptions.count</td><td>Integer</td><td>当前订阅数量，包含共享订阅</td></tr><tr><td>subscriptions.max</td><td>Integer</td><td>订阅数量的历史最大值</td></tr><tr><td>subscriptions.shared.count</td><td>Integer</td><td>当前共享订阅数量</td></tr><tr><td>subscriptions.shared.max</td><td>Integer</td><td>共享订阅数量的历史最大值</td></tr><tr><td>routes.count</td><td>Integer</td><td>当前路由数量</td></tr><tr><td>routes.max</td><td>Integer</td><td>路由数量的历史最大值</td></tr><tr><td>retained.count</td><td>Integer</td><td>当前保留消息数量</td></tr><tr><td>retained.max</td><td>Integer</td><td>保留消息的历史最大值</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/stats&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;stats&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;topics.max&quot;</span>:0,<span class="token string">&quot;topics.count&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.max&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.count&quot;</span>:0,<span class="token string">&quot;subscriptions.max&quot;</span>:0,<span class="token string">&quot;subscriptions.count&quot;</span>:0,<span class="token string">&quot;subscribers.max&quot;</span>:0,<span class="token string">&quot;subscribers.count&quot;</span>:0,<span class="token string">&quot;suboptions.max&quot;</span>:0,<span class="token string">&quot;suboptions.count&quot;</span>:0,<span class="token string">&quot;sessions.max&quot;</span>:0,<span class="token string">&quot;sessions.count&quot;</span>:0,<span class="token string">&quot;routes.max&quot;</span>:0,<span class="token string">&quot;routes.count&quot;</span>:0,<span class="token string">&quot;retained.max&quot;</span>:3,<span class="token string">&quot;retained.count&quot;</span>:3,<span class="token string">&quot;resources.max&quot;</span>:0,<span class="token string">&quot;resources.count&quot;</span>:0,<span class="token string">&quot;connections.max&quot;</span>:0,<span class="token string">&quot;connections.count&quot;</span>:0,<span class="token string">&quot;channels.max&quot;</span>:0,<span class="token string">&quot;channels.count&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-stats"><a href="#get-api-v4-nodes-node-stats" class="header-anchor">#</a> GET /api/v4/nodes/{node}/stats</h3><p>类似 <a href="#endpoint-get-stats">GET /api/v4/stats</a>，返回指定节点上的状态数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的状态数据列表，详见 <a href="#endpoint-get-stats">GET /api/v4/stats</a></td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/stats&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;topics.max&quot;</span>:0,<span class="token string">&quot;topics.count&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.max&quot;</span>:0,<span class="token string">&quot;subscriptions.shared.count&quot;</span>:0,<span class="token string">&quot;subscriptions.max&quot;</span>:0,<span class="token string">&quot;subscriptions.count&quot;</span>:0,<span class="token string">&quot;subscribers.max&quot;</span>:0,<span class="token string">&quot;subscribers.count&quot;</span>:0,<span class="token string">&quot;suboptions.max&quot;</span>:0,<span class="token string">&quot;suboptions.count&quot;</span>:0,<span class="token string">&quot;sessions.max&quot;</span>:0,<span class="token string">&quot;sessions.count&quot;</span>:0,<span class="token string">&quot;routes.max&quot;</span>:0,<span class="token string">&quot;routes.count&quot;</span>:0,<span class="token string">&quot;retained.max&quot;</span>:3,<span class="token string">&quot;retained.count&quot;</span>:3,<span class="token string">&quot;resources.max&quot;</span>:0,<span class="token string">&quot;resources.count&quot;</span>:0,<span class="token string">&quot;connections.max&quot;</span>:0,<span class="token string">&quot;connections.count&quot;</span>:0,<span class="token string">&quot;channels.max&quot;</span>:0,<span class="token string">&quot;channels.count&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="告警"><a href="#告警" class="header-anchor">#</a> 告警</h2><h3 id="get-api-v4-alarms"><a href="#get-api-v4-alarms" class="header-anchor">#</a> GET /api/v4/alarms</h3><p>返回集群下当前告警信息。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>各节点上的告警列表</td></tr><tr><td>data[0].node</td><td>String</td><td>节点名称</td></tr><tr><td>data[0].alarms</td><td>Array of Objects</td><td>当前告警列表</td></tr><tr><td>data[0].alarms[0].name</td><td>String</td><td>告警名称</td></tr><tr><td>data[0].alarms[0].message</td><td>String</td><td>人类易读的告警信息</td></tr><tr><td>data[0].alarms[0].details</td><td>Object</td><td>告警详情</td></tr><tr><td>data[0].alarms[0].activate_at</td><td>Integer</td><td>告警激活时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>data[0].alarms[0].deactivate_at</td><td>Integer</td><td>告警取消激活时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>data[0].alarms[0].activated</td><td>Boolean</td><td>是否激活</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-alarms"><a href="#get-api-v4-nodes-node-alarms" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms</h3><p>返回指定节点下的告警信息。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-alarms-activated"><a href="#get-api-v4-alarms-activated" class="header-anchor">#</a> GET /api/v4/alarms/activated</h3><p>返回集群下激活中的告警。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms/activated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-alarms-activated"><a href="#get-api-v4-nodes-node-alarms-activated" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms/activated</h3><p>返回指定节点下激活中的告警。接口参数和返回请参看 <a href="#endpoint-get-alarms">GET /api/v4/alarms</a>。</p><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/activated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;infinity&quot;</span>,<span class="token string">&quot;activated&quot;</span>:true,<span class="token string">&quot;activate_at&quot;</span>:1597996203658236<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-alarms-deactivated"><a href="#get-api-v4-alarms-deactivated" class="header-anchor">#</a> GET /api/v4/alarms/deactivated</h3><p>返回集群下已经取消的告警。接口参数和返回请参看 <a href="#endpoint-get-activated-alarms">GET /api/v4/alarms/activated</a>。</p><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;alarms&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-nodes-node-alarms-deactivated"><a href="#get-api-v4-nodes-node-alarms-deactivated" class="header-anchor">#</a> GET /api/v4/nodes/{node}/alarms/deactivated</h3><p>返回指定节点下已经取消的告警。接口参数和返回请参看 <a href="#endpoint-get-activated-alarms-in-specified-node">GET /api/v4/alarms/activated</a>。</p><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;high_system_memory_usage&quot;</span>,<span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;System memory usage is higher than 60%&quot;</span>,<span class="token string">&quot;details&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;high_watermark&quot;</span>:60<span class="token punctuation">}</span>,<span class="token string">&quot;deactivate_at&quot;</span>:1597994359335482,<span class="token string">&quot;activated&quot;</span>:false,<span class="token string">&quot;activate_at&quot;</span>:1597993108657522<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-alarms-deactivated"><a href="#post-api-v4-alarms-deactivated" class="header-anchor">#</a> POST /api/v4/alarms/deactivated</h3><p>取消指定告警。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>node</td><td>String</td><td>Required</td><td></td><td>告警所在节点</td></tr><tr><td>name</td><td>String</td><td>Required</td><td></td><td>告警名称</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX POST <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span> -d <span class="token string">'{&quot;node&quot;:&quot;emqx@127.0.0.1&quot;,&quot;name&quot;:&quot;high_system_memory_usage&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-alarms-deactivated"><a href="#delete-api-v4-alarms-deactivated" class="header-anchor">#</a> DELETE /api/v4/alarms/deactivated</h3><p>清除所有已经取消的告警。</p><p><strong>Parameters (json):</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-nodes-node-alarms-deactivated"><a href="#delete-api-v4-nodes-node-alarms-deactivated" class="header-anchor">#</a> DELETE /api/v4/nodes/{node}/alarms/deactivated</h3><p>清除指定节点下所有已经取消的告警。</p><p><strong>Parameters (json):</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/nodes/emqx@127.0.0.1/alarms/deactivated&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="acl-缓存"><a href="#acl-缓存" class="header-anchor">#</a> ACL 缓存</h2><h3 id="delete-api-v4-acl-cache"><a href="#delete-api-v4-acl-cache" class="header-anchor">#</a> DELETE /api/v4/acl-cache</h3><p>清除集群中所有的 ACL 缓存</p><p><strong>Query String Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/acl-cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="delete-api-v4-node-node-acl-cache"><a href="#delete-api-v4-node-node-acl-cache" class="header-anchor">#</a> DELETE /api/v4/node/{node}/acl-cache</h4><p>清除指定节点的 ACL 缓存</p><p><strong>Query String Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/node/emqx@127.0.0.1/acl-cache&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="黑名单"><a href="#黑名单" class="header-anchor">#</a> 黑名单</h2><h3 id="get-api-v4-banned"><a href="#get-api-v4-banned" class="header-anchor">#</a> GET /api/v4/banned</h3><p>获取黑名单</p><p><strong>Query String Parameters:</strong></p><p>同 <code>/api/v4/clients</code>。</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array</td><td>由对象构成的数组，对象中的字段与 <em>POST</em> 方法中的 Request Body 相同</td></tr><tr><td>meta</td><td>Object</td><td>同 <code>/api/v4/clients</code></td></tr></tbody></table><p><strong>Examples:</strong></p><p>获取黑名单列表:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX GET <span class="token string">&quot;http://localhost:8081/api/v4/banned&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;meta&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;page&quot;</span>:1,<span class="token string">&quot;limit&quot;</span>:10000,<span class="token string">&quot;count&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;who&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;until&quot;</span>:1582265833,<span class="token string">&quot;reason&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;undefined&quot;</span>,<span class="token string">&quot;by&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;user&quot;</span>,<span class="token string">&quot;at&quot;</span>:1582265533,<span class="token string">&quot;as&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;clientid&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-banned"><a href="#post-api-v4-banned" class="header-anchor">#</a> POST /api/v4/banned</h3><p>将对象添加至黑名单</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>who</td><td>String</td><td>Required</td><td></td><td>添加至黑名单的对象，可以是客户端标识符、用户名和 IP 地址</td></tr><tr><td>as</td><td>String</td><td>Required</td><td></td><td>用于区分黑名单对象类型，可以是 <code>clientid</code>，<code>username</code>，<code>peerhost</code></td></tr><tr><td>reason</td><td>String</td><td>Required</td><td></td><td>详细信息</td></tr><tr><td>by</td><td>String</td><td>Optional</td><td>user</td><td>指示该对象被谁添加至黑名单</td></tr><tr><td>at</td><td>Integer</td><td>Optional</td><td>当前系统时间</td><td>添加至黑名单的时间，单位：秒</td></tr><tr><td>until</td><td>Integer</td><td>Optional</td><td>当前系统时间 + 5 分钟</td><td>何时从黑名单中解除，单位：秒</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>与传入的 Request Body 相同</td></tr></tbody></table><p><strong>Examples:</strong></p><p>将 client 添加到黑名单:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -vX POST <span class="token string">&quot;http://localhost:8081/api/v4/banned&quot;</span> -d <span class="token string">'{&quot;who&quot;:&quot;example&quot;,&quot;as&quot;:&quot;clientid&quot;,&quot;reason&quot;:&quot;example&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;who&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;example&quot;</span>,<span class="token string">&quot;as&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;clientid&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-banned-as-who"><a href="#delete-api-v4-banned-as-who" class="header-anchor">#</a> DELETE /api/v4/banned/{as}/{who}</h3><p>将对象从黑名单中删除</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><p>将 client 从黑名单中移除:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/banned/clientid/example&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="数据导入导出"><a href="#数据导入导出" class="header-anchor">#</a> 数据导入导出</h2><p>数据导入导出。</p><h3 id="get-api-v4-data-export"><a href="#get-api-v4-data-export" class="header-anchor">#</a> GET /api/v4/data/export</h3><p>获取当前的导出文件信息列表，包括文件名、大小和创建时间。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Array of Objects</td><td>所有路由信息</td></tr><tr><td>data[0].filename</td><td>String</td><td>文件名</td></tr><tr><td>data[0].created_at</td><td>String</td><td>&quot;YYYY-MM-DD HH-mm-SS&quot; 格式的文件创建时间</td></tr><tr><td>data[0].size</td><td>String</td><td>文件大小，单位：字节</td></tr></tbody></table><p><strong>Examples:</strong></p><p>列出当前的导出文件信息列表:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/data/export&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:350,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-15-18-6-29.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-15 18:6:29&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:388,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-15-17-39-0.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-15 17:39:0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-data-export"><a href="#post-api-v4-data-export" class="header-anchor">#</a> POST /api/v4/data/export</h3><p>导出当前数据到文件。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>文件信息</td></tr><tr><td>data.filename</td><td>String</td><td>文件名</td></tr><tr><td>data.created_at</td><td>String</td><td>&quot;YYYY-MM-DD HH-mm-SS&quot; 格式的文件创建时间</td></tr><tr><td>data.size</td><td>String</td><td>文件大小，单位：字节</td></tr></tbody></table><p><strong>Examples:</strong></p><p>导出文件：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/export&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;size&quot;</span>:350,<span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx-export-2020-5-18-17-17-44.json&quot;</span>,<span class="token string">&quot;created_at&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2020-5-18 17:17:44&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-data-import"><a href="#post-api-v4-data-import" class="header-anchor">#</a> POST /api/v4/data/import</h3><p>从指定文件导入数据。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>filename</td><td>String</td><td>Required</td><td></td><td>导入的文件名</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><p>从指定文件导入数据：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/import&quot;</span> -d <span class="token string">'{&quot;filename&quot;:&quot;emqx-export-2020-5-18-17-17-44.json&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="get-api-v4-data-file-filename"><a href="#get-api-v4-data-file-filename" class="header-anchor">#</a> GET /api/v4/data/file/{filename}</h3><p>下载数据文件。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>filename</td><td>String</td><td>Required</td><td></td><td>导入的文件名</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>filename</td><td>String</td><td>文件名</td></tr><tr><td>file</td><td>String</td><td>文件内容</td></tr></tbody></table><p><strong>Examples:</strong></p><p>下载指定的数据文件：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X GET <span class="token string">&quot;http://localhost:8081/api/v4/data/file/emqx-export-2020-5-18-17-17-44.json&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;filename&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;/Users/zhouzibo/emqx-rel/_build/emqx/rel/emqx/data/emqx-export-2020-5-18-17-17-44.json&quot;</span>,<span class="token string">&quot;file&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;{<span class="token entity" title="\&quot;">\&quot;</span>version<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>dev<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>users<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>username<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>tags<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>administrator<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>password<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>oKQPB1hbigv6+2ntALELNOb1fF0=<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>schemas<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>rules<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>resources<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>date<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>2020-05-18 17:17:44<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>blacklist<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>auth_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[],<span class="token entity" title="\&quot;">\&quot;</span>apps<span class="token entity" title="\&quot;">\&quot;</span>:[{<span class="token entity" title="\&quot;">\&quot;</span>status<span class="token entity" title="\&quot;">\&quot;</span>:true,<span class="token entity" title="\&quot;">\&quot;</span>secret<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>public<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>name<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Default<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>id<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>admin<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>expired<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>undefined<span class="token entity" title="\&quot;">\&quot;</span>,<span class="token entity" title="\&quot;">\&quot;</span>desc<span class="token entity" title="\&quot;">\&quot;</span>:<span class="token entity" title="\&quot;">\&quot;</span>Application user<span class="token entity" title="\&quot;">\&quot;</span>}],<span class="token entity" title="\&quot;">\&quot;</span>acl_mnesia<span class="token entity" title="\&quot;">\&quot;</span>:[]}&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="post-api-v4-data-file"><a href="#post-api-v4-data-file" class="header-anchor">#</a> POST /api/v4/data/file</h3><p>上传数据文件。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>filename</td><td>String</td><td>Required</td><td></td><td>文件名</td></tr><tr><td>file</td><td>String</td><td>Required</td><td></td><td>文件内容</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><p>上传指定的数据文件：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X POST <span class="token string">&quot;http://localhost:8081/api/v4/data/file&quot;</span> -d <span class="token string">'{&quot;filename&quot;:&quot;emqx-export-2020-5-18-17-17-44.json&quot;,&quot;file&quot;:&quot;{\&quot;version\&quot;:\&quot;dev\&quot;,\&quot;users\&quot;:[{\&quot;username\&quot;:\&quot;admin\&quot;,\&quot;tags\&quot;:\&quot;administrator\&quot;,\&quot;password\&quot;:\&quot;oKQPB1hbigv6+2ntALELNOb1fF0=\&quot;}],\&quot;schemas\&quot;:[],\&quot;rules\&quot;:[],\&quot;resources\&quot;:[],\&quot;date\&quot;:\&quot;2020-05-18 17:17:44\&quot;,\&quot;blacklist\&quot;:[],\&quot;auth_mnesia\&quot;:[],\&quot;apps\&quot;:[{\&quot;status\&quot;:true,\&quot;secret\&quot;:\&quot;public\&quot;,\&quot;name\&quot;:\&quot;Default\&quot;,\&quot;id\&quot;:\&quot;admin\&quot;,\&quot;expired\&quot;:\&quot;undefined\&quot;,\&quot;desc\&quot;:\&quot;Application user\&quot;}],\&quot;acl_mnesia\&quot;:[]}&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="delete-api-v4-data-file-filename"><a href="#delete-api-v4-data-file-filename" class="header-anchor">#</a> DELETE /api/v4/data/file/{filename}</h3><p>远程删除数据文件。</p><p><strong>Path Parameters:</strong> 无</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>filename</td><td>String</td><td>Required</td><td></td><td>文件名</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>message</td><td>String</td><td>仅在发生错误时返回，用于提供更详细的错误信息</td></tr></tbody></table><p><strong>Examples:</strong></p><p>删除指定的数据文件：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -i --basic -u admin:public -X DELETE <span class="token string">&quot;http://localhost:8081/api/v4/data/file/emqx-export-2020-5-18-17-17-44.json&quot;</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="规则"><a href="#规则" class="header-anchor">#</a> 规则</h2><p>查询规则引擎的动作</p><h3 id="get-api-v4-rules"><a href="#get-api-v4-rules" class="header-anchor">#</a> GET /api/v4/rules/</h3><p>获取规则列表，支持分页及模糊查找。包括规则的 SQL、Topics 列表、动作列表等。还会返回当前规则和动作的统计指标的值。</p><p><strong>Query String Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>enable_paging</td><td>Boolean</td><td>False</td><td>是否支持分页功能，如果开启，则返回带分页的元信息</td></tr><tr><td>enabled</td><td>Boolean</td><td>False</td><td>过滤条件：规则是否开启状态</td></tr><tr><td>for</td><td>String</td><td>False</td><td>返回 topic 完全匹配的规则</td></tr><tr><td>_like_id</td><td>String</td><td>False</td><td>根据 id 子串方式模糊查找</td></tr><tr><td>_like_for</td><td>String</td><td>False</td><td>根据 Topic 子串方式模糊查找</td></tr><tr><td>_match_for</td><td>String</td><td>False</td><td>根据 Topic 匹配查询，比如: t/# 包括 t/1, t/2</td></tr><tr><td>_like_description</td><td>String</td><td>False</td><td>根据描述子串方式模糊查找</td></tr><tr><td>_page</td><td>Integer</td><td>False</td><td>页码</td></tr><tr><td>_limit</td><td>Integer</td><td>False</td><td>每页显示的数据条数，未指定时由 <code>emqx-management</code> 插件的配置项 <code>max_row_limit</code> 决定</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>meta</td><td>Object</td><td>分页信息，只在 enable_paging 为 true 时生效</td></tr><tr><td>meta.page</td><td>Integer</td><td>页码</td></tr><tr><td>meta.limit</td><td>Integer</td><td>每页显示的数据条数</td></tr><tr><td>meta.count</td><td>Integer</td><td>数据总条数</td></tr><tr><td>data</td><td>Array of Objects</td><td>规则详情</td></tr><tr><td>data[0].id</td><td>String</td><td>Rule ID</td></tr><tr><td>data[0].rawsql</td><td>String</td><td>SQL 语句，与请求中的 rawsql 一致</td></tr><tr><td>data[0].for</td><td>String</td><td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr><tr><td>data[0].metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr><tr><td>data[0].description</td><td>String</td><td>规则的描述信息，与请求中的 description 一致</td></tr><tr><td>data[0].created_at</td><td>Integer</td><td>创建时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>data[0].actions</td><td>Array</td><td>动作列表</td></tr><tr><td>data[0].actions[0].id</td><td>String</td><td>Action ID</td></tr><tr><td>data[0].actions[0].params</td><td>Object</td><td>动作参数，与请求中的 actions.params 一致</td></tr><tr><td>data[0].actions[0].name</td><td>String</td><td>动作名字，与请求中的 actions.name 一致</td></tr><tr><td>data[0].actions[0].metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table><h3 id="get-api-v4-rules-rule-id"><a href="#get-api-v4-rules-rule-id" class="header-anchor">#</a> GET /api/v4/rules/{rule_id}</h3><p>获取某个规则的详情，包括规则的 SQL、Topics 列表、动作列表等。还会返回当前规则和动作的统计指标的值。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>rule_id</td><td>String</td><td>False</td><td>可选，Rule ID。如不指定 rule_id 则<br>以数组形式返回所有已创建的规则</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>规则对象</td></tr><tr><td>- data.id</td><td>String</td><td>Rule ID</td></tr><tr><td>- data.rawsql</td><td>String</td><td>SQL 语句，与请求中的 rawsql 一致</td></tr><tr><td>- data.for</td><td>String</td><td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr><tr><td>- data.metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr><tr><td>- data.description</td><td>String</td><td>规则的描述信息，与请求中的 description 一致</td></tr><tr><td>- data.created_at</td><td>Integer</td><td>创建时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>- data.actions</td><td>Array</td><td>动作列表</td></tr><tr><td>- data.actions[0].id</td><td>String</td><td>Action ID</td></tr><tr><td>- data.actions[0].params</td><td>Object</td><td>动作参数，与请求中的 actions.params 一致</td></tr><tr><td>- data.actions[0].name</td><td>String</td><td>动作名字，与请求中的 actions.name 一致</td></tr><tr><td>- data.actions[0].metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table><h3 id="post-api-v4-rules"><a href="#post-api-v4-rules" class="header-anchor">#</a> POST /api/v4/rules</h3><p>创建规则，返回规则 ID。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>rawsql</td><td>String</td><td>True</td><td>规则的 SQL 语句</td></tr><tr><td>actions</td><td>Array</td><td>True</td><td>动作列表</td></tr><tr><td>- actions[0].name</td><td>String</td><td>True</td><td>动作名称</td></tr><tr><td>- actions[0].params</td><td>Object</td><td>True</td><td>动作参数。参数以 key-value 形式表示。<br>详情可参看添加规则的示例</td></tr><tr><td>description</td><td>String</td><td>False</td><td>可选，规则描述</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>创建成功的规则对象，包含 Rule ID</td></tr><tr><td>- data.id</td><td>String</td><td>Rule ID</td></tr><tr><td>- data.rawsql</td><td>String</td><td>SQL 语句，与请求中的 rawsql 一致</td></tr><tr><td>- data.for</td><td>String</td><td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr><tr><td>- data.metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr><tr><td>- data.description</td><td>String</td><td>规则的描述信息，与请求中的 description 一致</td></tr><tr><td>- data.created_at</td><td>Integer</td><td>创建时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>- data.actions</td><td>Array</td><td>动作列表，每个动作是一个 Object</td></tr><tr><td>- data.actions[0].id</td><td>String</td><td>Action ID</td></tr><tr><td>- data.actions[0].params</td><td>Object</td><td>动作参数，与请求中的 actions.params 一致</td></tr><tr><td>- data.actions[0].name</td><td>String</td><td>动作名字，与请求中的 actions.name 一致</td></tr><tr><td>- data.actions[0].metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table><h3 id="put-api-v4-rules-rule-id"><a href="#put-api-v4-rules-rule-id" class="header-anchor">#</a> PUT /api/v4/rules/{rule_id}</h3><p>更新规则，返回规则 ID。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>rawsql</td><td>String</td><td>True</td><td>可选，规则的 SQL 语句</td></tr><tr><td>actions</td><td>Array</td><td>True</td><td>可选，动作列表</td></tr><tr><td>- actions[0].name</td><td>String</td><td>True</td><td>可选，动作名称</td></tr><tr><td>- actions[0].params</td><td>Object</td><td>True</td><td>可选，动作参数。参数以 key-value 形式表示。<br>详情可参看添加规则的示例</td></tr><tr><td>description</td><td>String</td><td>False</td><td>可选，规则描述</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>创建成功的规则对象，包含 Rule ID</td></tr><tr><td>- data.id</td><td>String</td><td>Rule ID</td></tr><tr><td>- data.rawsql</td><td>String</td><td>SQL 语句，与请求中的 rawsql 一致</td></tr><tr><td>- data.for</td><td>String</td><td>Topic 列表，表示哪些 topic 可以匹配到此规则</td></tr><tr><td>- data.metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr><tr><td>- data.description</td><td>String</td><td>规则的描述信息，与请求中的 description 一致</td></tr><tr><td>- data.created_at</td><td>Integer</td><td>创建时间，以微秒为单位的 UNIX 时间戳</td></tr><tr><td>- data.actions</td><td>Array</td><td>动作列表，每个动作是一个 Object</td></tr><tr><td>- data.actions[0].id</td><td>String</td><td>Action ID</td></tr><tr><td>- data.actions[0].params</td><td>Object</td><td>动作参数，与请求中的 actions.params 一致</td></tr><tr><td>- data.actions[0].name</td><td>String</td><td>动作名字，与请求中的 actions.name 一致</td></tr><tr><td>- data.actions[0].metrics</td><td>Array</td><td>统计指标，具体可参看 Dashboard 上的 Rule Metrics</td></tr></tbody></table><h3 id="delete-api-v4-rules-rule-id"><a href="#delete-api-v4-rules-rule-id" class="header-anchor">#</a> DELETE /api/v4/rules/{rule_id}</h3><p>删除规则。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>添加一个规则，对于所有匹配到主题 &quot;t/a&quot; 的消息，打印其规则运行参数。</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPOST -d <span class="token string">'{
  &quot;rawsql&quot;: &quot;select * from \&quot;t/a\&quot;&quot;,
  &quot;actions&quot;: [{
      &quot;name&quot;: &quot;inspect&quot;,
      &quot;params&quot;: {
          &quot;a&quot;: 1
      }
  }],
  &quot;description&quot;: &quot;test-rule&quot;
}'</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>使用规则 ID 获取刚才创建的规则详情:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>获取所有的规则，注意返回值里的 data 是个规则对象的数组:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/a<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>更新一下规则的 SQL 语句，改为 <code>select * from &quot;t/b&quot;</code>:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPUT --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span> -d <span class="token string">'{&quot;rawsql&quot;:&quot;select * from \&quot;t/b\&quot;&quot;}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/b<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:true,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>停用规则 (disable):</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPUT --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span> -d <span class="token string">'{&quot;enabled&quot;: false}'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;rawsql&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;select * from <span class="token entity" title="\&quot;">\&quot;</span>t/b<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;speed_max&quot;</span>:0,<span class="token string">&quot;speed_last5m&quot;</span>:0.0,<span class="token string">&quot;speed&quot;</span>:0.0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;matched&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;rule:7fdb2c9e&quot;</span>,<span class="token string">&quot;for&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;t/a&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;enabled&quot;</span>:false,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test-rule&quot;</span>,<span class="token string">&quot;actions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span>:1<span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;metrics&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;success&quot;</span>:0,<span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect_1582434715354188116&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>删除规则:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XDELETE --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/rules/rule:7fdb2c9e'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="动作"><a href="#动作" class="header-anchor">#</a> 动作</h2><p>查询规则引擎的动作。注意动作只能由 emqx 提供，不能添加。</p><h3 id="get-api-v4-actions-action-name"><a href="#get-api-v4-actions-action-name" class="header-anchor">#</a> GET api/v4/actions/{action_name}</h3><p>获取某个动作的详情，包括动作名字、参数列表等。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>action_name</td><td>String</td><td>False</td><td>可选，动作名。如不指定 action_name 则<br>以数组形式返回当前支持的所有动作。</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>规则对象</td></tr><tr><td>- data.types</td><td>String</td><td>指示当前动作从属于那些资源类型</td></tr><tr><td>- data.title</td><td>Object</td><td>动作的简述，中英文。</td></tr><tr><td>- data.params</td><td>Object</td><td>动作的参数列表。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr><tr><td>- data.description</td><td>Object</td><td>动作的描述信息，中英文。</td></tr><tr><td>- data.app</td><td>String</td><td>动作的提供者</td></tr></tbody></table><p><strong>Examples:</strong></p><p>查询 inspect 动作的详情：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/actions/inspect'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;types&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;检查 (调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Inspect (debug)&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;inspect&quot;</span>,<span class="token string">&quot;for&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$any</span>&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;检查动作参数 (用以调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Inspect the details of action params for debug purpose&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;app&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_rule_engine&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询当前所有的动作：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/actions'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;types&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;空动作 (调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Do Nothing (debug)&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;do_nothing&quot;</span>,<span class="token string">&quot;for&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;<span class="token variable">$any</span>&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;此动作什么都不做，并且不会失败 (用以调试)&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;This action does nothing and never fails. It's for debug purpose&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;app&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_rule_engine&quot;</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="资源类型"><a href="#资源类型" class="header-anchor">#</a> 资源类型</h2><p>查询规则引擎的资源类型。注意资源类型只能由 emqx 提供，不能添加。</p><h3 id="get-api-v4-resource-types-resource-type-name"><a href="#get-api-v4-resource-types-resource-type-name" class="header-anchor">#</a> GET api/v4/resource_types/{resource_type_name}</h3><p>获取某个资源的详情，包括资源描述、参数列表等。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>resource_type_name</td><td>String</td><td>False</td><td>可选，资源类型名。如不指定 resource_type_name 则<br>以数组形式返回当前支持的所有资源类型。</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>规则对象</td></tr><tr><td>- data.title</td><td>Object</td><td>资源类型的简述，中英文。</td></tr><tr><td>- data.params</td><td>Object</td><td>资源类型的参数列表。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr><tr><td>- data.description</td><td>Object</td><td>资源类型的描述信息，中英文。</td></tr><tr><td>- data.provider</td><td>String</td><td>资源类型的提供者</td></tr></tbody></table><p><strong>Examples:</strong></p><p>查询 web_hook 资源类型的详细信息：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resource_types/web_hook'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;provider&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_web_hook&quot;</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;required&quot;</span>:true,<span class="token string">&quot;format&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;url&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;method&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;enum&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span>,<span class="token string">&quot;POST&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;object&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;schema&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询当前所有的资源类型：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resource_types'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;provider&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx_web_hook&quot;</span>,<span class="token string">&quot;params&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;required&quot;</span>:true,<span class="token string">&quot;format&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;url&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求 URL&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request URL&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;method&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;string&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;enum&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;PUT&quot;</span>,<span class="token string">&quot;POST&quot;</span><span class="token punctuation">]</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求方法&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Method&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;object&quot;</span>,<span class="token string">&quot;title&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;schema&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;请求头&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Request Header&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;default&quot;</span>:<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;description&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;zh&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span>,<span class="token string">&quot;en&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;WebHook&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>, <span class="token punctuation">..</span>.<span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="资源"><a href="#资源" class="header-anchor">#</a> 资源</h2><p>管理规则引擎的资源。资源是资源类型的实例，用于维护数据库连接等相关资源。</p><h3 id="get-api-v4-resources-resource-id"><a href="#get-api-v4-resources-resource-id" class="header-anchor">#</a> GET api/v4/resources/{resource_id}</h3><p>获取指定的资源的详细信息。</p><p><strong>Path Parameters:</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>resource_id</td><td>String</td><td>False</td><td>可选，资源类型 ID。如不指定 resource_id 则<br>以数组形式返回当前所有的资源。</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>规则对象</td></tr><tr><td>- data.id</td><td>String</td><td>资源 ID</td></tr><tr><td>- data.type</td><td>String</td><td>资源所从属的资源类型的名字。</td></tr><tr><td>- data.config</td><td>Object</td><td>资源的配置。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr><tr><td>- data.status</td><td>Array</td><td>资源的状态信息。详情请参看 Dashboard 上资源的状态。</td></tr><tr><td>- data.description</td><td>Object</td><td>资源的描述信息，中英文。</td></tr></tbody></table><h3 id="post-api-v4-resources"><a href="#post-api-v4-resources" class="header-anchor">#</a> POST /api/v4/resources</h3><p>创建规则，返回资源 ID。</p><p><strong>Parameters (json):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>True</td><td>资源类型名。指定要使用哪个资源类型创建资源。</td></tr><tr><td>config</td><td>Object</td><td>True</td><td>资源参数。要跟对应的资源类型的 params 里指定的格式相一致。</td></tr><tr><td>description</td><td>String</td><td>False</td><td>可选，资源描述</td></tr></tbody></table><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr><tr><td>data</td><td>Object</td><td>规则对象</td></tr><tr><td>- data.id</td><td>String</td><td>资源 ID</td></tr><tr><td>- data.type</td><td>String</td><td>资源所从属的资源类型的名字。</td></tr><tr><td>- data.config</td><td>Object</td><td>资源的配置。参数以 key-value 形式表示。<br>详情可参看后面的示例</td></tr><tr><td>- data.description</td><td>Object</td><td>资源的描述信息，中英文。</td></tr></tbody></table><h3 id="delete-api-v4-resources-resource-id"><a href="#delete-api-v4-resources-resource-id" class="header-anchor">#</a> DELETE /api/v4/resources/{resource_id}</h3><p>删除资源。</p><p><strong>Parameters:</strong> 无</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>创建一个 webhook 资源，webserver 的 URL 为 http://127.0.0.1:9910 ：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XPOST -d <span class="token string">'{
  &quot;type&quot;: &quot;web_hook&quot;,
  &quot;config&quot;: {
      &quot;url&quot;: &quot;http://127.0.0.1:9910&quot;,
      &quot;headers&quot;: {&quot;token&quot;:&quot;axfw34y235wrq234t4ersgw4t&quot;},
      &quot;method&quot;: &quot;POST&quot;
  },
  &quot;description&quot;: &quot;web hook resource-1&quot;
}'</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用资源 ID 查询刚创建的资源：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources/resource:b12d3e44'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;status&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;node&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;emqx@127.0.0.1&quot;</span>,<span class="token string">&quot;is_alive&quot;</span>:false<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询当前已创建的所有的资源：</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources'</span>

<span class="token punctuation">{</span><span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web_hook&quot;</span>,<span class="token string">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;resource:b12d3e44&quot;</span>,<span class="token string">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;web hook resource-1&quot;</span>,<span class="token string">&quot;config&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;url&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;http://127.0.0.1:9910&quot;</span>,<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;POST&quot;</span>,<span class="token string">&quot;headers&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;axfw34y235wrq234t4ersgw4t&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>删除资源:</p><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">curl</span> -XDELETE --basic -u admin:public <span class="token string">'http://localhost:8081/api/v4/resources/resource:b12d3e44'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="license"><a href="#license" class="header-anchor">#</a> License</h3><p>EMQX 软件许可管理。</p><h4 id="post-api-v4-license-upload"><a href="#post-api-v4-license-upload" class="header-anchor">#</a> POST /api/v4/license/upload</h4><p>将一个新的许可证文件上传到集群。许可证被验证，然后被复制到集群中的所有节点并重新加载。新的内容被写入节点中配置的相同的文件路径，旧的许可证内容被备份到一个文件，该文件后缀为发生变化时的时间戳。</p><p><strong>Body (bytes)</strong></p><p>要上传的许可证内容。</p><p><strong>Success Response Body (JSON):</strong></p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>code</td><td>Integer</td><td>0</td></tr></tbody></table><p><strong>Examples:</strong></p><p>上传一个许可证文件。</p><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">curl</span> -XPOST --basic -u admin:public -d @<span class="token operator">&lt;</span><span class="token punctuation">(</span>jq -sR <span class="token string">'{license: .}'</span> <span class="token operator">&lt;</span> path/to/new.license<span class="token punctuation">)</span> <span class="token string">'http://localhost:8081/api/v4/license/upload'</span>

<span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span>:0<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="page-nav reset-width"><p class="inner"><span class="prev">← <a href="/zh/enterprise/latest/rule/schema-registry-examp-3rdparty-grpc.html" class="prev">gRPC 编解码举例 </a></span><span class="next"><a href="/zh/enterprise/latest/advanced/cli.html">命令行接口 </a>→</span></p></div></main></div><div class="right-column"><section class="doc-toc"><div class="title">本页导航</div><div class="toc-content"><ul><li><a href="/zh/enterprise/latest/advanced/http-api.html#接口安全">接口安全</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#响应码">响应码</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#api-endpoints">API Endpoints</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#api-v4">/api/v4</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#broker-基本信息">Broker 基本信息</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#节点">节点</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#客户端">客户端</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#订阅信息">订阅信息</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#路由">路由</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#消息发布">消息发布</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#主题订阅">主题订阅</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#消息批量发布">消息批量发布</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#主题批量订阅">主题批量订阅</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#插件">插件</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#监听器">监听器</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#内置模块">内置模块</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#统计指标">统计指标</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#主题统计指标">主题统计指标</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#状态">状态</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#告警">告警</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#acl-缓存">ACL 缓存</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#黑名单">黑名单</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#数据导入导出">数据导入导出</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#规则">规则</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#动作">动作</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#资源类型">资源类型</a></li><li><a href="/zh/enterprise/latest/advanced/http-api.html#资源">资源</a></li></ul></div></section></div></div><footer class="main-footer-box has-text-centered-mobile"><div class="container"><div class="columns is-vcentered"><div class="column is-5"><h2 class="m-0 p-0 is-size-3">订阅 EMQ 最新资讯</h2></div><div id="form-mail" class="column is-6 is-offset-1 form-mail"><div class="is-flex"><input id="inputEmail" type="email" required="required" name="inputEmail" placeholder="邮箱" value="" class="form-control mr-4"> <button class="button is-gradient px-5 m-0">订阅 →</button><p class="sub-tips m-0"></p></div></div></div><hr><div class="columns"><div class="column is-flex-grow-3 is-flex-shrink-0"><div class="is-flex is-flex-direction-column is-justify-content-space-between" style="height:100%"><div class="mb-5"><a href="https://www.emqx.com/zh" target="_blank" rel="noopener"><img src="/docs-assets/img/logo.2f824ccf.png" alt="EMQ LOGO" class="logo"></a></div><div><img loading="lazy" src="/docs-assets/img/qr-code.e3ef18a0.png" alt="EMQ 映云科技公众号二维码" width="146" height="146" class="qr-code mb-3"><div class="follow-us"><a href="https://github.com/emqx/emqx" target="_blank" rel="noopener noreferrer nofollow"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-github"></use></svg></a><a href="https://www.youtube.com/channel/UCir_r04HIsLjf2qqyZ4A8Cg" target="_blank" rel="noopener noreferrer nofollow"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-youtube"></use></svg></a><a href="https://weibo.com/emqtt" target="_blank" rel="noopener noreferrer nofollow"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-weibo"></use></svg></a><a href="https://www.linkedin.com/company/emqtech" target="_blank" rel="noopener noreferrer nofollow"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-linkedin"></use></svg></a><a href="https://space.bilibili.com/522222081" target="_blank" rel="noopener noreferrer nofollow"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-bilibili"></use></svg></a></div></div></div></div><ul class="column is-narrow m-0 is-flex-grow-1"><li><h5 class="mt-0 mb-3">学习</h5></li><li><a href="https://www.emqx.com/zh/blog" target="_blank" rel="noopener">博客</a></li><li><a href="https://www.emqx.com/zh/events" target="_blank" rel="noopener">活动</a></li><li><a href="https://www.emqx.com/zh/community" target="_blank" rel="noopener">社区</a></li><li><a href="https://www.emqx.com/zh/resources" target="_blank" rel="noopener">资源</a></li></ul><ul class="column is-narrow m-0 is-flex-grow-1"><li><h5 class="mt-0 mb-3">MQTT</h5></li><li><a href="https://www.emqx.com/zh/mqtt" target="_blank" rel="noopener">MQTT</a></li><li><a href="https://www.emqx.com/zh/mqtt/mqtt5" target="_blank" rel="noopener">MQTT 5</a></li><li><a href="https://www.emqx.com/zh/products/mqttx" target="_blank" rel="noopener">MQTT X</a></li><li><a href="https://www.emqx.com/zh/mqtt/public-mqtt5-broker" target="_blank" rel="noopener">在线 MQTT 5 服务器</a></li><li><a href="https://www.emqx.com/zh/mqtt/mqtt-websocket-toolkit" target="_blank" rel="noopener">MQTT Websocket Toolkit</a></li></ul></div><div class="record-information columns is-gapless is-vcentered is-centered"><div class="column is-narrow"><p class="m-0">© 2022 <a href="https://www.emqx.com/zh">EMQ </a>Technologies Inc. All rights reserved</p></div></div></div></footer></section><div id="page-feedback" data-v-5905af3e><div class="feedback-button is-flex is-align-items-center is-justify-content-center" data-v-5905af3e><svg aria-hidden="true" class="icon" data-v-5905af3e><use xlink:href="#icon-useful" data-v-5905af3e></use></svg></div><div class="feedback-form" style="display:none" data-v-5905af3e data-v-5905af3e><div class="feedback-header pl-4 is-flex is-align-items-center is-justify-content-space-between" data-v-5905af3e>文档内容是否有帮助？<div class="icon-close p-4" style="cursor:pointer" data-v-5905af3e>x</div></div><div class="feedback-body p-4" data-v-5905af3e><div class="is-flex" data-v-5905af3e data-v-67fd37ab data-v-5905af3e><div class="feedback-button like mr-5 is-flex is-align-items-center is-justify-content-center" data-v-5905af3e><svg aria-hidden="true" class="icon" data-v-5905af3e><use xlink:href="#icon-useful" data-v-5905af3e></use></svg></div><div class="feedback-button dislike is-flex is-align-items-center is-justify-content-center" data-v-5905af3e><svg aria-hidden="true" class="icon" data-v-5905af3e><use xlink:href="#icon-a-notuseful" data-v-5905af3e></use></svg></div></div></div></div></div></div><div class="global-ui"></div></div><script src="/docs-assets/js/app.b7cd69d3.js" defer="defer"></script><script src="/docs-assets/js/3.c47ef470.js" defer="defer"></script><script src="/docs-assets/js/326.61a5b107.js" defer="defer"></script></body></html>