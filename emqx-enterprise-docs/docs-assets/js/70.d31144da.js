(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1645:function(e,t,n){"use strict";n.r(t);var o=n(10),i=Object(o.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"lwm2m-protocol-gateway"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#lwm2m-protocol-gateway"}},[e._v("#")]),e._v(" LwM2M Protocol Gateway")]),e._v(" "),o("h2",{attrs:{id:"protocol-introduction"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#protocol-introduction"}},[e._v("#")]),e._v(" Protocol Introduction")]),e._v(" "),o("p",[e._v("The full name of LwM2M is Lightweight Machine-To-Machine, which is developed by Open Mobile Alliance (OMA)\nA defined set of lightweight protocols suitable for the Internet of Things, which provides device management and communication functions, especially suitable for terminal devices with limited resources. The agreement can be in\n"),o("a",{attrs:{href:"http://www.openmobilealliance.org/wp/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Here"),o("OutboundLink")],1),e._v(" to download.")]),e._v(" "),o("p",[e._v("LwM2M is based on the REST architecture, using CoAP as the underlying transport protocol, carried in UDP or SMS\nTherefore, the message structure is simple and compact, and it is also applicable in environments where network resources are limited and the device is always online.")]),e._v(" "),o("p",[e._v("The main entities of LwM2M include LwM2M Server and LwM2M Client.")]),e._v(" "),o("p",[e._v("LwM2M Server serves as a server and is deployed at the M2M service provider or network service provider. LwM2M defines two types of servers")]),e._v(" "),o("p",[e._v("-One is LwM2M BOOTSTRAP SERVER. The emqx-lwm2m plug-in does not implement the server function.\n-One is LwM2M SERVER, emqx-lwm2m realizes the function of this server on UDP, but SMS does not.")]),e._v(" "),o("p",[e._v("LwM2M Client acts as a client and is deployed on each LwM2M device.")]),e._v(" "),o("p",[e._v("Between LwM2M Server and LwM2M Client, the LwM2M protocol defines 4 interfaces.")]),e._v(" "),o("ol",[o("li",[e._v("Bootstrap interface Bootstrap: provide LwM2M client with registration to LwM2M\nThe necessary information of the server, such as server access information, resource information supported by the client, etc.")]),e._v(" "),o("li",[e._v("Client Registration Interface Client Registration: Connect LwM2M client and LwM2M server, connect LwM2M\nThe relevant information of the client is stored on the LwM2M server. Only after completing the registration, LwM2M\nThe communication and management between the client and the server becomes possible.")]),e._v(" "),o("li",[e._v("Device management and service implementation interface Device Management and Service Enablement: the master of this interface is LwM2M\nThe server sends instructions to the client, and the client responds to the instructions and sends the response message to the server.")]),e._v(" "),o("li",[e._v("Information reporting interface Information Reporting: Allow LwM2M\nThe server subscribes to the client for resource information, and the client receives the subscription and reports its resource changes to the server according to the agreed mode.")])]),e._v(" "),o("p",[e._v("LwM2M abstracts the services on the device into Object and Resource, and defines the attributes and functions of various Objects in XML files. allowable\n"),o("a",{attrs:{href:"http://www.openmobilealliance.org/wp/OMNA/LwM2M/LwM2MRegistry.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Here"),o("OutboundLink")],1),e._v("\nFind various definitions of XML.")]),e._v(" "),o("p",[e._v("The LwM2M protocol predefines 8 kinds of Objects to meet the basic requirements, namely:")]),e._v(" "),o("p",[e._v("-Security object\n-Server object\n-Access Control access control object\n-Device object\n-Connectivity Monitoring Connectivity monitoring object\n-Firmware firmware object\n-Location object\n-Connectivity Statistics Connectivity statistics object")]),e._v(" "),o("h2",{attrs:{id:"create-module"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#create-module"}},[e._v("#")]),e._v(" Create module")]),e._v(" "),o("p",[e._v("Open "),o("a",{attrs:{href:"http://127.0.0.1:18083/#/modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("EMQX Dashboard"),o("OutboundLink")],1),e._v(', click the "Modules" tab on the left, and choose to add:')]),e._v(" "),o("p",[o("img",{attrs:{src:n(391),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("Select LwM2M protocol to access the gateway:")]),e._v(" "),o("p",[o("img",{attrs:{src:n(941),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("Configure related basic parameters:")]),e._v(" "),o("p",[o("img",{attrs:{src:n(942),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("Add listening port:")]),e._v(" "),o("p",[o("img",{attrs:{src:n(943),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("Configure monitoring parameters:")]),e._v(" "),o("p",[o("img",{attrs:{src:n(944),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("Click to confirm to the configuration parameter page:")]),e._v(" "),o("p",[o("img",{attrs:{src:n(945),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("After clicking Add, the module is added:\n"),o("img",{attrs:{src:n(946),alt:"image-20200927213049265"}})]),e._v(" "),o("p",[e._v("EMQX-LWM2M is a gateway module of EMQX server, which implements most of the functions of LwM2M. MQTT client can pass EMQX-LWM2M\nAccess devices that support LwM2M. The device can also report notification to EMQX-LWM2M to collect data for EMQX back-end services.")]),e._v(" "),o("h3",{attrs:{id:"configuration-parameters"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configuration-parameters"}},[e._v("#")]),e._v(" Configuration parameters")]),e._v(" "),o("table",[o("thead",[o("tr",[o("th",[e._v("Configuration")]),e._v(" "),o("th",[e._v("Description")])])]),e._v(" "),o("tbody",[o("tr",[o("td",[e._v("Minimum Lifetime")]),e._v(" "),o("td",[e._v("Minimum lifetime allowed to be set for registration/update, in seconds")])]),e._v(" "),o("tr",[o("td",[e._v("Maxinum Lifetime")]),e._v(" "),o("td",[e._v("Maximum lifetime allowed to be set for registration/update, in seconds")])]),e._v(" "),o("tr",[o("td",[e._v("QMode Time Window")]),e._v(" "),o("td",[e._v("QMode time window, indicating how long the downstream command sent to the client will be cached, in seconds")])]),e._v(" "),o("tr",[o("td",[e._v("Auto Observe")]),e._v(" "),o("td",[e._v("After successful registration, whether the objectlist reported by Observe is automatically reported")])]),e._v(" "),o("tr",[o("td",[e._v("Mountpoint")]),e._v(" "),o("td",[e._v("topic Prefix")])]),e._v(" "),o("tr",[o("td",[e._v("Command Topic")]),e._v(" "),o("td",[e._v("Downstream command topic %e indicates the value endport name")])]),e._v(" "),o("tr",[o("td",[e._v("Response Topic")]),e._v(" "),o("td",[e._v("Upstream response topic %e means endport name")])]),e._v(" "),o("tr",[o("td",[e._v("Register Topic")]),e._v(" "),o("td",[e._v("Register message topic %e means endport name")])]),e._v(" "),o("tr",[o("td",[e._v("Notify Topic")]),e._v(" "),o("td",[e._v("Uplink notification topic %e means endport name")])]),e._v(" "),o("tr",[o("td",[e._v("Update Topic")]),e._v(" "),o("td",[e._v("Update message topic %e means endport name")])]),e._v(" "),o("tr",[o("td",[e._v("XML Directory")]),e._v(" "),o("td",[e._v("The directory where the XML files are stored. These XMLs are used to define the LwM2M Object")])])])]),e._v(" "),o("h3",{attrs:{id:"mqtt-and-lwm2m-conversion"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mqtt-and-lwm2m-conversion"}},[e._v("#")]),e._v(" MQTT and LwM2M conversion")]),e._v(" "),o("p",[e._v("From the MQTT client, you can send Command to the LwM2M device. The command from MQTT to LwM2M uses the following topic")]),e._v(" "),o("div",{staticClass:"language-bash line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-bash"}},[o("code",[o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lwm2m/{?device_end_point_name}/command"')]),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])]),e._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[e._v("1")]),o("br")])]),o("p",[e._v("The MQTT Payload is a string in json format, which specifies the command to be sent. For more details, please refer to the emqx-lwm2m documentation.")]),e._v(" "),o("p",[e._v("The reply of the LwM2M device is sent with the following topic")]),e._v(" "),o("div",{staticClass:"language-bash line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-bash"}},[o("code",[o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lwm2m/{?device_end_point_name}/response"')]),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])]),e._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[e._v("1")]),o("br")])]),o("p",[e._v("MQTT Payload is also a string in json format. For more details, please refer to the documentation of emqx-lwm2m.")])])}),[],!1,null,null,null);t.default=i.exports},391:function(e,t,n){e.exports=n.p+"docs-assets/img/modules.1814040c.png"},941:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m1.d616ad37.png"},942:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m2.74688dbc.png"},943:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m3.5ebac877.png"},944:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m4.9be598da.png"},945:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m5.0712ad3f.png"},946:function(e,t,n){e.exports=n.p+"docs-assets/img/proto_lwm2m6.01ce1eb4.png"}}]);