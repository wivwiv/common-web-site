(window.webpackJsonp=window.webpackJsonp||[]).push([[325],{1677:function(v,t,_){"use strict";_.r(t);var e=_(10),s=Object(e.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"排它订阅"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#排它订阅"}},[v._v("#")]),v._v(" 排它订阅")]),v._v(" "),_("p",[v._v("排它订阅允许对主题进行互斥订阅，一个主题同一时刻仅被允许存在一个订阅者，在当前订阅者未取消订阅前，其他订阅者都将无法订阅对应主题。")]),v._v(" "),_("p",[v._v("排它订阅的前缀和示例：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("示例")]),v._v(" "),_("th",[v._v("前缀")]),v._v(" "),_("th",[v._v("真实主题名")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("$exclusive/t/1")]),v._v(" "),_("td",[v._v("$exclusive/")]),v._v(" "),_("td",[v._v("t/1")])])])]),v._v(" "),_("p",[v._v("当某个客户端 "),_("strong",[v._v("A")]),v._v(" 订阅 "),_("code",[v._v("$exclusive/t/1")]),v._v(" 后，其他客户端再订阅 "),_("code",[v._v("$exclusive/t/1")]),v._v(" 时都会失败，直到 "),_("strong",[v._v("A")]),v._v(" 取消了对 "),_("code",[v._v("$exclusive/t/1")]),v._v(" 的订阅为止。")]),v._v(" "),_("p",[_("strong",[v._v("注意")]),v._v(": 排它订阅必须使用 "),_("code",[v._v("$exclusive/")]),v._v(" 前缀，在上面的示例中，其他客户端依然可以通过 "),_("code",[v._v("t/1")]),v._v(" 成功进行订阅。")]),v._v(" "),_("h2",{attrs:{id:"订阅失败错误码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#订阅失败错误码"}},[v._v("#")]),v._v(" 订阅失败错误码")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("错误码")]),v._v(" "),_("th",[v._v("原因")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("0x8F")]),v._v(" "),_("td",[v._v("使用了 "),_("code",[v._v("$exclusive/")]),v._v("，但并未开启排它订阅")])]),v._v(" "),_("tr",[_("td",[v._v("0x97")]),v._v(" "),_("td",[v._v("已经有客户端订阅了该主题")])])])]),v._v(" "),_("h2",{attrs:{id:"配置设置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配置设置"}},[v._v("#")]),v._v(" 配置设置")]),v._v(" "),_("p",[v._v("排它订阅默认未开启，可在 "),_("code",[v._v("etc/emqx.conf")]),v._v(" 中配置：")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th",[v._v("配置项")]),v._v(" "),_("th",[v._v("类型")]),v._v(" "),_("th",[v._v("默认值")]),v._v(" "),_("th",[v._v("描述")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("mqtt.exclusive_subscription")]),v._v(" "),_("td",[v._v("boolean")]),v._v(" "),_("td",[v._v("false")]),v._v(" "),_("td",[v._v("排它订阅的默认开关")])]),v._v(" "),_("tr",[_("td",[v._v("zone.external.exclusive_subscription")]),v._v(" "),_("td",[v._v("boolean")]),v._v(" "),_("td",[v._v("未设置")]),v._v(" "),_("td",[v._v("排它订阅在 external zone 上的开关")])]),v._v(" "),_("tr",[_("td",[v._v("zone.internal.exclusive_subscription")]),v._v(" "),_("td",[v._v("boolean")]),v._v(" "),_("td",[v._v("未设置")]),v._v(" "),_("td",[v._v("排它订阅在 internal zone 上的开关")])])])]),v._v(" "),_("p",[v._v("在 zone 上如果没有设置 "),_("code",[v._v("exclusive_subscription")]),v._v(" 的值，EMQX 将会使用 "),_("code",[v._v("mqtt.exclusive_subscription")]),v._v(" 来判断功能是否开启。")])])}),[],!1,null,null,null);t.default=s.exports}}]);