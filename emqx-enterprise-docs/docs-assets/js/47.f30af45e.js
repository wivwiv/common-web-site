(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{1609:function(t,a,s){"use strict";s.r(a);var e=s(10),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"save-data-to-oracle-db"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#save-data-to-oracle-db"}},[t._v("#")]),t._v(" Save data to Oracle DB")]),t._v(" "),e("p",[t._v("Create t_mqtt_msg table:")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" t_mqtt_msg "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msgid VARCHAR2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("topic VARCHAR2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" qos NUMBER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payload NCLOB"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:s(719),alt:"image"}})]),t._v(" "),e("p",[t._v("Create rules:")]),t._v(" "),e("p",[t._v("Open "),e("a",{attrs:{href:"http://127.0.0.1:18083/#/rules",target:"_blank",rel:"noopener noreferrer"}},[t._v("EMQX Dashboard"),e("OutboundLink")],1),t._v(' and select the "Rules" tab on the left.')]),t._v(" "),e("p",[t._v("Fill in the rule SQL:")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"t/#"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:s(396),alt:"image"}})]),t._v(" "),e("p",[t._v("Related actions:")]),t._v(" "),e("p",[t._v('In the "Response Action" interface, select "Add", and then select "Save Data to Oracle Database" in the "Action" drop-down box.')]),t._v(" "),e("p",[e("img",{attrs:{src:s(720),alt:"image"}})]),t._v(" "),e("p",[t._v("Fill in the action parameters:")]),t._v(" "),e("p",[t._v('The "Save data to Oracle Database" action requires two parameters:')]),t._v(" "),e("p",[t._v("1). SQL template. In this example, we insert a piece of data into Oracle Database. The SQL template is:")]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" T_MQTT_MSG "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MSGID"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" QOS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PAYLOAD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${id}'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${topic}'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${qos}'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${payload}'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v('2). The ID of the associated resource. Now that the resource drop-down box is empty, and you can click "New Resource" in the upper right corner to create an Oracle Database resource:')]),t._v(" "),e("p",[t._v("Fill in the resource configuration:")]),t._v(" "),e("p",[e("img",{attrs:{src:s(721),alt:"image"}})]),t._v(" "),e("p",[t._v('Note: for the connection to Oracle Real Applications Cluster (RAC) to work properly, the "Service Name" field must be filled correctly.  If left empty, it defaults to the Database SID.')]),t._v(" "),e("p",[t._v('Click the "New" button.')]),t._v(" "),e("p",[t._v('Return to the response action interface and click "OK".')]),t._v(" "),e("p",[e("img",{attrs:{src:s(722),alt:"image"}})]),t._v(" "),e("p",[t._v('Return to the rule creation interface and click "Create".')]),t._v(" "),e("p",[e("img",{attrs:{src:s(723),alt:"image"}})]),t._v(" "),e("p",[t._v('In the rule list, click the "View" button or the rule ID connection to preview the rule just created:')]),t._v(" "),e("p",[e("img",{attrs:{src:s(724),alt:"image"}})]),t._v(" "),e("p",[t._v("The rule has been created. Now, send a piece of data:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("Topic: "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"t/a"')]),t._v("\nQoS: "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nPayload: "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("View the number of rule hits")]),t._v(" "),e("p",[e("img",{attrs:{src:s(725),alt:"image"}})])])}),[],!1,null,null,null);a.default=n.exports},396:function(t,a,s){t.exports=s.p+"docs-assets/img/rule_sql.91dfbea9.png"},719:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_1.2c9845a7.png"},720:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_2.4b7545a9.png"},721:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_3.bafd9258.png"},722:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_4.522b0db4.png"},723:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_5.1ef79006.png"},724:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_6.0a46b745.png"},725:function(t,a,s){t.exports=s.p+"docs-assets/img/oracle_action_7.c1a40e3c.png"}}]);