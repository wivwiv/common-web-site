(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{1031:function(e,a,t){e.exports=t.p+"docs-assets/img/delay_publish.dd4325cb.png"},1763:function(e,a,t){"use strict";t.r(a);var s=t(10),v=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"延迟发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#延迟发布"}},[e._v("#")]),e._v(" 延迟发布")]),e._v(" "),s("h2",{attrs:{id:"创建模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建模块"}},[e._v("#")]),e._v(" 创建模块")]),e._v(" "),s("p",[e._v("打开 "),s("a",{attrs:{href:"http://127.0.0.1:18083/#/modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("EMQX Dashboard"),s("OutboundLink")],1),e._v("，点击左侧的 “模块” 选项卡，选择添加：")]),e._v(" "),s("p",[s("img",{attrs:{src:t(390),alt:"image-20200927213049265"}})]),e._v(" "),s("p",[e._v("选择延迟发布模块，无需配置参数，直接开启")]),e._v(" "),s("p",[s("img",{attrs:{src:t(1031),alt:"image-20200927213049265"}})]),e._v(" "),s("h2",{attrs:{id:"延迟发布简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#延迟发布简介"}},[e._v("#")]),e._v(" 延迟发布简介")]),e._v(" "),s("p",[e._v("EMQX 的延迟发布功能可以实现按照用户配置的时间间隔延迟发布 PUBLISH 报文的功能。当客户端使用特殊主题前缀 "),s("code",[e._v("$delayed/{DelayInteval}")]),e._v(" 发布消息到 EMQX 时，将触发延迟发布功能。")]),e._v(" "),s("p",[e._v("延迟发布主题的具体格式如下：")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$delayed")]),e._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("DelayInterval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("TopicName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[e._v("$delayed")]),e._v(": 使用 "),s("code",[e._v("$delay")]),e._v(" 作为主题前缀的消息都将被视为需要延迟发布的消息。延迟间隔由下一主题层级中的内容决定。")]),e._v(" "),s("li",[s("code",[e._v("{DelayInterval}")]),e._v(": 指定该 MQTT 消息延迟发布的时间间隔，单位是秒，允许的最大间隔是 4294967 秒。如果 "),s("code",[e._v("{DelayInterval}")]),e._v(" 无法被解析为一个整型数字，EMQX 将丢弃该消息，客户端不会收到任何信息。")]),e._v(" "),s("li",[s("code",[e._v("{TopicName}")]),e._v(": MQTT 消息的主题名称。")])]),e._v(" "),s("p",[e._v("例如:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("$delayed/15/x/y")]),e._v(": 15 秒后将 MQTT 消息发布到主题 "),s("code",[e._v("x/y")]),e._v("。")]),e._v(" "),s("li",[s("code",[e._v("$delayed/60/a/b")]),e._v(": 1 分钟后将 MQTT 消息发布到 "),s("code",[e._v("a/b")]),e._v("。")]),e._v(" "),s("li",[s("code",[e._v("$delayed/3600/$SYS/topic")]),e._v(": 1 小时后将 MQTT 消息发布到 "),s("code",[e._v("$SYS/topic")]),e._v("。")])])])}),[],!1,null,null,null);a.default=v.exports},390:function(e,a,t){e.exports=t.p+"docs-assets/img/modules.89e07c9c.png"}}]);