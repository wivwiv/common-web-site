(window.webpackJsonp=window.webpackJsonp||[]).push([[277],{1551:function(s,e,t){"use strict";t.r(e);var a=t(10),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"common-errors"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-errors"}},[s._v("#")]),s._v(" Common Errors")]),s._v(" "),t("h2",{attrs:{id:"emqx-cannot-connect-to-mysql8-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#emqx-cannot-connect-to-mysql8-0"}},[s._v("#")]),s._v(" EMQX cannot connect to Mysql8.0")]),s._v(" "),t("p",[t("strong",[s._v("Tags:")]),s._v(" "),t("RouterLink",{attrs:{to:"/en/enterprise/latest/faq/tags.html#mysql"}},[t("em",[s._v("MySQL")])]),s._v(" "),t("RouterLink",{attrs:{to:"/en/enterprise/latest/faq/tags.html#auth"}},[t("em",[s._v("Auth")])])],1),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("4.3 is now compatible with caching_sha2_password, this issue only occurs in versions below 4.3")])]),s._v(" "),t("p",[s._v("Different from previous versions, Mysql8.0 uses the "),t("code",[s._v("caching_sha2_password")]),s._v(" plugin by default for account password configuration. The password plugin is required to change to "),t("code",[s._v("mysql_native_password")]),s._v(".")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Modify the "),t("code",[s._v("mysql.user")]),s._v(" table")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("## Switch to the mysql database\nmysql> use mysql;\n\n## View user table\n\nmysql> select user, host, plugin from user;\n+------------------+-----------+-----------------------+\n| user             | host      | plugin                |\n+------------------+-----------+-----------------------+\n| root             | %         | caching_sha2_password |\n| mysql.infoschema | localhost | caching_sha2_password |\n| mysql.session    | localhost | caching_sha2_password |\n| mysql.sys        | localhost | caching_sha2_password |\n| root             | localhost | caching_sha2_password |\n+------------------+-----------+-----------------------+\n\n## Change password plugin\nmysql> ALTER USER 'your_username'@'your_host' IDENTIFIED WITH mysql_native_password BY 'your_password';\nQuery OK, 0 rows affected (0.01 sec)\n\n## Refresh\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Change "),t("code",[s._v("my.conf")])]),s._v(" "),t("p",[s._v("Add a line below the [mysqld] in the "),t("code",[s._v("my.cnf")]),s._v(" configuration file.")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("default_authentication_plugin=mysql_native_password\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Restart Mysql")])])]),s._v(" "),t("h2",{attrs:{id:"incompatible-openssl-version"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incompatible-openssl-version"}},[s._v("#")]),s._v(" Incompatible openssl version")]),s._v(" "),t("p",[t("strong",[s._v("Tags:")]),s._v(" "),t("RouterLink",{attrs:{to:"/en/enterprise/latest/faq/tags.html#启动失败"}},[t("em",[s._v("fail to start")])])],1),s._v(" "),t("p",[s._v("For better security, starting from version 4.3, EMQX runs on openssl-1.1.\nThis may cause some troulbes for users running EMQX on some old linux distributions,")]),s._v(" "),t("h3",{attrs:{id:"error"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#error"}},[s._v("#")]),s._v(" Error")]),s._v(" "),t("p",[s._v("If starting EMQX with command "),t("code",[s._v("./bin/emqx console")]),s._v(" result in below error messages:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("FATAL: Unable to start Erlang.\nPlease "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" sure openssl-1.1.1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("libcrypto"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" and libncurses are installed.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("Or for emqx version earlier to v4.3.10 and emqx-enterprise version earlier than e4.3.5")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("application_start_failure,kernel,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("shutdown,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("failed_to_start_child,kernel_safe_sup,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("on_load_function_failed,crypto"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v('It indicates that the "crypto" application in Erlang/OTP that EMQX depends on failed to start because the required openssl dynamic lib (.so) is not found.')]),s._v(" "),t("h3",{attrs:{id:"solution"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solution"}},[s._v("#")]),s._v(" Solution")]),s._v(" "),t("h4",{attrs:{id:"centos-install-from-epel-relese-using-centos7-as-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-install-from-epel-relese-using-centos7-as-example"}},[s._v("#")]),s._v(" CentOS (install from epel-relese, using centos7 as example)")]),s._v(" "),t("p",[s._v("Extra Packages for Enterprise Linux (or EPEL) is a Fedora Special Interest Group that creates, maintains, and manages a high quality set of additional packages for Enterprise Linux.")]),s._v(" "),t("ol",[t("li",[s._v("To install the RPM repos, execut "),t("code",[s._v("yum install epel-release")])]),s._v(" "),t("li",[s._v("If failed to install, follow the instructions here: https://docs.fedoraproject.org/en-US/epel/#_el7 to ensure the yum repos are added, and try step 1 again")]),s._v(" "),t("li",[s._v("Execute "),t("code",[s._v("yum install openssl11")]),s._v(" to install openssl-1.1")])]),s._v(" "),t("h4",{attrs:{id:"linux-compile-openssl-1-1-from-source-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-compile-openssl-1-1-from-source-code"}},[s._v("#")]),s._v(" Linux (compile openssl-1.1 from source code)")]),s._v(" "),t("p",[s._v("Go to the installation directory of EMQX (If you use the package management tool to install EMQX, you should enter the same level directory as the "),t("code",[s._v("lib")]),s._v(" of EMQX)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Package installation")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx\n  \n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Package manager installation, such as yum. Its lib directory should be in /lib/emqx")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/emqx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("Query the list of "),t("code",[s._v(".so")]),s._v(" dynamic libraries that "),t("code",[s._v("crypto")]),s._v(" depends on and its location in memory:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ldd lib/crypto-*/priv/lib/crypto.so\n  \nlib/crypto-4.6/priv/lib/crypto.so: /lib64/libcrypto.so.10: version `OPENSSL_1.1.1' not found "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("required by lib/crypto-4.6/priv/lib/crypto.so"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          linux-vdso.so.1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fff67bfc000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          libcrypto.so.10 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libcrypto.so.10 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee749ca000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          libc.so.6 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libc.so.6 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74609000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          libdl.so.2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libdl.so.2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74404000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          libz.so.1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libz.so.1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee741ee000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          /lib64/ld-linux-x86-64.so.2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74fe5000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("Among them, "),t("code",[s._v("OPENSSL_1.1.1' not found")]),s._v(" indicates that the "),t("code",[s._v(".so")]),s._v(" library of specified OPENSSL version is not installed correctly.")]),s._v(" "),t("p",[s._v("Compile and install OPENSSL 1.1.1 from source code, and place its so file to a path recognized by the system:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Download the latest version 1.1.1")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.openssl.org/source/openssl-1.1.1c.tar.gz\n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Upload to ct-test-ha")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" openssl-1.1.1c.tar.gz ct-test-ha:~/\n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Unzip, compile and install")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxf   openssl-1.1.1c.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openssl-1.1.1c\n$ ./config\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("   \t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Perform test; continue if PASS is output")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Ensure library references")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/lib64/libssl.so.1.1 /usr/lib64/libssl.so.1.1\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("After the completion, execute "),t("code",[s._v("ldd lib/crypto-*/priv/lib/crypto.so")]),s._v(" in the lib-level directory of EMQX to check whether it can be correctly identified. If there is no "),t("code",[s._v(".so")]),s._v(" library in "),t("code",[s._v("not found")]),s._v(", you can start EMQX normally.")]),s._v(" "),t("h4",{attrs:{id:"macos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[s._v("#")]),s._v(" macOS")]),s._v(" "),t("p",[s._v("Go to the installation directory of EMQX:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## package installation")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx\n  \n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## brew installation")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/Cellar/emqx/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("Query the list of "),t("code",[s._v(".so")]),s._v(" dynamic libraries that "),t("code",[s._v("crypto")]),s._v(" depends on:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ otool -L lib/crypto-*/priv/lib/crypto.so\n  \nlib/crypto-4.4.2.1/priv/lib/crypto.so:\n  /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compatibility version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0, current version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  /usr/lib/libSystem.B.dylib "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compatibility version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0, current version "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1252.200")]),s._v(".5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("It shows that OPENSSL has been successfully installed to the specified directory by checking:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib\nls: /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib: No such "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("If the file does not exist, you need to install the version of OPENSSL corresponding with what printed by "),t("code",[s._v("otool")]),s._v(". For example, it shown here as "),t("code",[s._v("openssl@1.1")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ brew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssl@1.1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("After the installation is complete, you can start EMQX normally.")]),s._v(" "),t("h2",{attrs:{id:"msvcr120-dll-is-missing-from-windows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#msvcr120-dll-is-missing-from-windows"}},[s._v("#")]),s._v(" MSVCR120.dll is missing from Windows")]),s._v(" "),t("p",[t("strong",[s._v("Tags:")]),s._v(" "),t("RouterLink",{attrs:{to:"/en/enterprise/latest/faq/tags.html#启动失败"}},[t("em",[s._v("fail to start")])])],1),s._v(" "),t("h3",{attrs:{id:"phenomenon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#phenomenon"}},[s._v("#")]),s._v(" Phenomenon")]),s._v(" "),t("p",[s._v("When Windows executes "),t("code",[s._v("./bin/emqx console")]),s._v(", an error window pops up:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("This program cannot be started because MSVCR120.dll is missing from the computer. Please try to reinstall the program to resolve this issue.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"solution-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solution-2"}},[s._v("#")]),s._v(" Solution")]),s._v(" "),t("p",[s._v("Install "),t("a",{attrs:{href:"https://www.microsoft.com/en-us/download/search.aspx?q=redistributable+package.",target:"_blank",rel:"noopener noreferrer"}},[s._v("Microsoft Visual C++ RedistributablePackage"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"ssl-connection-error"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssl-connection-error"}},[s._v("#")]),s._v(" SSL Connection Error")]),s._v(" "),t("h3",{attrs:{id:"phenomenon-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#phenomenon-2"}},[s._v("#")]),s._v(" Phenomenon")]),s._v(" "),t("p",[s._v("The client cannot establish an SSL connection with EMQX.")]),s._v(" "),t("h3",{attrs:{id:"solution-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solution-3"}},[s._v("#")]),s._v(" Solution")]),s._v(" "),t("p",[s._v("You can use the keywords in the EMQX log to perform simple troubleshooting. For the EMQX log related content, please refer to: "),t("RouterLink",{attrs:{to:"/en/enterprise/latest/getting-started/log.html"}},[s._v("Log and Trace")]),s._v(".")],1),s._v(" "),t("ol",[t("li",[t("p",[s._v("certificate_expired")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("certificate_expired")]),s._v(" keyword appears in the log, indicating that the certificate has expired, please renew it in time.")])]),s._v(" "),t("li",[t("p",[s._v("no_suitable_cipher")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("no_suitable_cipher")]),s._v(" keyword appears in the log, indicating that a suitable cipher suite was not found during the handshake process. The possible reasons are that the certificate type does not match the cipher suite, the cipher suite supported by both the server and the client was not found, and so on.")])]),s._v(" "),t("li",[t("p",[s._v("handshake_failure")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("handshake_failure")]),s._v(" keyword appears in the log. There are many reasons, which may be analyzed in conjunction with the error reported by the client. For example, the client may find that the connected server address does not match the domain name in the server certificate.")])]),s._v(" "),t("li",[t("p",[s._v("unknown_ca")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("unknown_ca")]),s._v(" keyword appears in the log, which means that the certificate verification fails. Common reasons are that the intermediate CA certificate is omitted, the Root CA certificate is not specified, or the wrong Root CA certificate is specified. In the two-way authentication, we can judge whether the certificate configuration of the server or the client is wrong according to other information in the log. If there is a problem with the server certificate, the error log is usually:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{ssl_error,{tls_alert,{unknown_ca,"TLS server: In state certify received CLIENT ALERT: Fatal - Unknown CA\\n"}}}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("When you see "),t("code",[s._v("CLIENT ALERT")]),s._v(", you can know that this is a warning message from the client, and the server certificate fails the client's check.")]),s._v(" "),t("p",[s._v("If there is a problem with the client certificate, the error log is usually:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{ssl_error,{tls_alert,{unknown_ca,"TLS server: In state certify at ssl_handshake.erl:1887 generated SERVER ALERT: Fatal - Unknown CA\\n"}}}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("When you see "),t("code",[s._v("SERVER ALERT")]),s._v(", you can know that the server finds that the certificate cannot pass the authentication when checking the client certificate, and the client will receive a warning message from the server.")])]),s._v(" "),t("li",[t("p",[s._v("protocol_version")]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("protocol_version")]),s._v(" keyword appears in the log, indicating a mismatch between the TLS protocol versions supported by the client and server.")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);