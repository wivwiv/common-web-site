(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1579:function(t,s,e){"use strict";e.r(s);var a=e(10),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"builtin-acl-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#builtin-acl-file"}},[t._v("#")]),t._v(" Builtin ACL File")]),t._v(" "),a("p",[t._v("The builtin ACL sets rules through files, which is simple and lightweight enough to use, and is suitable for projects with predictable number of rules, no changes in demand, or small changes.")]),t._v(" "),a("h2",{attrs:{id:"builtin-acl-file-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#builtin-acl-file-2"}},[t._v("#")]),t._v(" Builtin ACL File")]),t._v(" "),a("p",[t._v("Builtin ACL module is enabled by default, it could be updated or stoped by dashboard but can not be deleted.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(588),alt:"image-20200927213049265"}})]),t._v(" "),a("p",[t._v("Editing ACL file content directly, or select a file to replace")]),t._v(" "),a("p",[a("img",{attrs:{src:e(589),alt:"image-20200927213049265"}})]),t._v(" "),a("h2",{attrs:{id:"define-acl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#define-acl"}},[t._v("#")]),t._v(" Define ACL")]),t._v(" "),a("p",[t._v("The builtin ACL is the rule table with the lowest priority. After all ACL checks are completed, if there are still no matches, the default ACL rules will be checked.")]),t._v(" "),a("p",[t._v("The rules file is described in the format of Erlang syntax:")]),t._v(" "),a("div",{staticClass:"language-erlang line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-erlang"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('%% allows "dashboard" users to subscribe to the "$SYS/#" topic')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("allow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dashboard"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$SYS/#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('%% allows users with IP address "127.0.0.1" to publish/subscribe "#SYS/#", "#" topics')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("allow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("ipaddr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("pubsub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$SYS/#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('%% Deny "all users" to subscribe to "$SYS/#" "#" topic')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("deny")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$SYS/#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("eq")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("%% allows other arbitrary publish and subscribe operations")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("allow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token atom"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("ol",[a("li",[a("p",[t._v("The first rule allows clients to publish and subscribe to all topics")])]),t._v(" "),a("li",[a("p",[t._v("The second rule prohibits all clients from subscribing to the topics "),a("code",[t._v("$SYS/#")]),t._v(" and "),a("code",[t._v("#")])])]),t._v(" "),a("li",[a("p",[t._v("The third rule allows clients with an ip address of "),a("code",[t._v("127.0.0.1")]),t._v(" to publish/subscribe to the topics of "),a("code",[t._v("$SYS/#")]),t._v(" and "),a("code",[t._v("#")]),t._v(", which opens a special case for the second")])]),t._v(" "),a("li",[a("p",[t._v("The fourth rule allows clients with a username of "),a("code",[t._v("dashboard")]),t._v(" to subscribe to the topic of "),a("code",[t._v("$SYS/#")]),t._v(", opening a special case for the second")])])]),t._v(" "),a("p",[t._v("It can be seen that the default ACL is mainly to restrict the client's authority to the system topic "),a("code",[t._v("$SYS/#")]),t._v(" and the all-wildcard topic "),a("code",[t._v("#")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"acl-conf-writing-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acl-conf-writing-rules"}},[t._v("#")]),t._v(" acl.conf writing rules")]),t._v(" "),a("p",[t._v("The rules in the ʻacl.conf` file are matched from top to bottom in the order of writing.")]),t._v(" "),a("p",[t._v("The grammar rules of ʻacl.conf` are contained in the comments at the top. Those familiar with Erlang grammar can directly read the comments at the top of the file. Or refer to the following interpretation:")]),t._v(" "),a("p",[t._v("-Use "),a("code",[t._v("%%")]),t._v(" to indicate line comments.")]),t._v(" "),a("p",[t._v("-Each rule consists of a four-tuple and ends with "),a("code",[t._v(".")]),t._v(".")]),t._v(" "),a("p",[t._v("-The first place of the tuple: indicates that the permission control operation is performed after the rule is successfully hit. The possible values ​​are:")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("allow")]),t._v(": means "),a("code",[t._v("allow")])]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("deny")]),t._v(": means "),a("code",[t._v("deny")])]),t._v(" "),a("p",[t._v("-The second digit of the tuple: indicates the user whose rule takes effect, and the available formats are:")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v('{user, "dashboard"}')]),t._v(": indicates that the rule only takes effect for the user whose "),a("em",[t._v("Username (Username)")]),t._v(' is "dashboard"')]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v('{client, "dashboard"}')]),t._v(": indicates that the rule only takes effect for users whose "),a("em",[t._v("client ID (ClientId)")]),t._v(' is "dashboard"')]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v('{ipaddr, "127.0.0.1"}')]),t._v(': indicates that the rule only takes effect for users whose source address is "127.0.0.1"')]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("all")]),t._v(": indicates that the rule is effective for all users")]),t._v(" "),a("p",[t._v("-The third position of the tuple: indicates the operation controlled by the rule, and the possible values ​​are:")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("publish")]),t._v(": indicates that the rule is applied to PUBLISH operations")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("subscribe")]),t._v(": indicates that the rule is applied to the SUBSCRIBE operation")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("pubsub")]),t._v(": indicates that the rule is valid for both PUBLISH and SUBSCRIBE operations")]),t._v(" "),a("p",[t._v("-The fourth place of the tuple: indicates the list of topics restricted by the rule, the content is given in the format of an array, for example:")]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v("$SYS/#")]),t._v(": It is a "),a("strong",[t._v("topic filter (Topic Filter)")]),t._v("; it means that the rule can hit the topic that matches "),a("code",[t._v("$SYS/#")]),t._v('; for example, it can hit "$SYS/#" , You can also hit "$SYS/a/b/c"')]),t._v(" "),a("p",[t._v("​ * "),a("code",[t._v('{eq, "#"}')]),t._v(": indicates the congruence of characters. The rule can only hit the string with subject "),a("code",[t._v("#")]),t._v(", not "),a("code",[t._v("/a/b/c")]),t._v(" etc.")]),t._v(" "),a("p",[t._v("-In addition, there are two special rules:")]),t._v(" "),a("p",[t._v("-"),a("code",[t._v("{allow, all}")]),t._v(": Allow all operations")]),t._v(" "),a("p",[t._v("-"),a("code",[t._v("{deny, all}")]),t._v(": Deny all operations")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("acl.conf should only contain some simple and general rules, making it the basic ACL principle of the system. If you need to support complex and massive ACL content, you can choose external resources to implement it.")])])])}),[],!1,null,null,null);s.default=n.exports},588:function(t,s,e){t.exports=e.p+"docs-assets/img/acl_file4.e47aac0c.png"},589:function(t,s,e){t.exports=e.p+"docs-assets/img/acl_file3.a18e6c38.png"}}]);