(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{1485:function(s,a,t){"use strict";t.r(a);var e=t(10),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"command-line-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-line-interface"}},[s._v("#")]),s._v(" Command line interface")]),s._v(" "),e("p",[s._v("EMQX Broker provides the management command line of "),e("code",[s._v("./bin/emqx_ctl")]),s._v(" for users to manage, configure and query EMQX Broker.")]),s._v(" "),e("h2",{attrs:{id:"status-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#status-command"}},[s._v("#")]),s._v(" status command")]),s._v(" "),e("p",[s._v("Query the running status of EMQX Broker:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl status\nNode "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx@127.0.0.1'")]),s._v(" is started\nemqx v4.0.0 is running\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"mgmt-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-command"}},[s._v("#")]),s._v(" mgmt command")]),s._v(" "),e("p",[s._v("The mgmt command can query the application.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("mgmt list")])]),s._v(" "),e("td",[s._v("List application")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("mgmt insert <AppId> <Name>")])]),s._v(" "),e("td",[s._v("Add an application that can access to the HTTP API")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("mgmt update <AppId> <status>")])]),s._v(" "),e("td",[s._v("Update applications that can access to the HTTP API")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("mgmt lookup <AppId>")])]),s._v(" "),e("td",[s._v("Get application details that can access to the HTTP API")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("mgmt delete <AppId>")])]),s._v(" "),e("td",[s._v("Remove applications that can access to the HTTP API")])])])]),s._v(" "),e("h3",{attrs:{id:"mgmt-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-list"}},[s._v("#")]),s._v(" mgmt list")]),s._v(" "),e("p",[s._v("List application")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl mgmt list\napp_id: 901abdba8eb8c, secret: MjgzMzQ5MjM1MzUzMTc4MjgyMjE3NzU4ODcwMDg0NjQ4OTG, name: hello, desc: , status: true, expired: undefined\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"mgmt-insert-appid-name"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-insert-appid-name"}},[s._v("#")]),s._v(" mgmt insert <AppId> <Name>")]),s._v(" "),e("p",[s._v("Add the HTTP API application:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl mgmt insert dbcb6e023370b world\nAppSecret: MjgzMzQ5MjYyMTY3ODk4MjA5NzMwODExODMxMDM1NDk0NDA\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"mgmt-update-appid-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-update-appid-status"}},[s._v("#")]),s._v(" mgmt update <AppId> <status>")]),s._v(" "),e("p",[s._v("Update the HTTP API application:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl mgmt update dbcb6e023370b stop\nupdate successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"mgmt-lookup-appid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-lookup-appid"}},[s._v("#")]),s._v(" mgmt lookup <AppId>")]),s._v(" "),e("p",[s._v("Get application details of the HTTP API:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl mgmt lookup dbcb6e023370b\napp_id: dbcb6e023370b\nsecret: MjgzMzQ5MjYyMTY3ODk4MjA5NzMwODExODMxMDM1NDk0NDA\nname: world\ndesc: Application user\nstatus: stop\nexpired: undefined\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"mgmt-delete-appid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mgmt-delete-appid"}},[s._v("#")]),s._v(" mgmt delete <AppId>")]),s._v(" "),e("p",[s._v("Remove the HTTP API application:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl mgmt delete dbcb6e023370b\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"broker-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#broker-command"}},[s._v("#")]),s._v(" broker command")]),s._v(" "),e("p",[s._v("The broker command queries basic server information, startup time, statistics data and performance data.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("broker")])]),s._v(" "),e("td",[s._v("Query EMQX Broker description, version, start time")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("broker stats")])]),s._v(" "),e("td",[s._v("Statistics of Connection, Session, Topic, Subscription, Route")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("broker metrics")])]),s._v(" "),e("td",[s._v("Query MQTT Packet and Message Statistics")])])])]),s._v(" "),e("p",[s._v("Query basic information of EMQX Broker, including version, startup time, etc .:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl broker\nsysdescr  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" EMQX Broker\nversion   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),s._v(".0\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("uptime")]),s._v("    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" seconds\ndatetime  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-02-21 09:39:58\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"broker-stats"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#broker-stats"}},[s._v("#")]),s._v(" broker stats")]),s._v(" "),e("p",[s._v("Query statistics of connections, topics, subscriptions, routes between server and client :")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl broker stats\nchannels.count                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nchannels.max                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconnections.count             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nconnections.max               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nresources.count               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nresources.max                 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nretained.count                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nretained.max                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nroutes.count                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nroutes.max                    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsessions.count                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsessions.max                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsuboptions.count              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsuboptions.max                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscribers.count             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscribers.max               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.count           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.max             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.shared.count    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsubscriptions.shared.max      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ntopics.count                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ntopics.max                    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("h3",{attrs:{id:"broker-metrics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#broker-metrics"}},[s._v("#")]),s._v(" broker metrics")]),s._v(" "),e("p",[s._v("Query server traffic (Bytes), MQTT Packets, messages sending and receiving statistics:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl broker metrics\nbytes.received                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nbytes.sent                    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.auth.anonymous         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.authenticate           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.check_acl              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connack                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connect                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.connected              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.disconnected           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.subscribe              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nclient.unsubscribe            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.expired      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.no_local     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.qos0_msg     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.queue_full   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndelivery.dropped.too_large    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.acked                "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.delayed              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.delivered            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped.expired      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.dropped.no_subscriber: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.forward              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.publish              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos0.received        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos0.sent            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos1.received        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos1.sent            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos2.received        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.qos2.sent            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.received             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nmessages.retained             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nmessages.sent                 "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.auth.received         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.auth.sent             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.auth_error    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.error         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connack.sent          "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.connect.received      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.disconnect.received   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.disconnect.sent       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pingreq.received      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pingresp.sent         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.inuse          "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.missed         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.received       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.puback.sent           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.inuse         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.missed        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.received      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubcomp.sent          "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.auth_error    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.dropped       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.error         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.received      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.publish.sent          "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.inuse          "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.missed         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.received       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrec.sent           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.missed         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.received       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.pubrel.sent           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.received              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.sent                  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.suback.sent           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.auth_error  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.error       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.subscribe.received    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsuback.sent         "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsubscribe.error     "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npackets.unsubscribe.received  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.created               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.discarded             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.resumed               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.takeovered            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession.terminated            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br")])]),e("h2",{attrs:{id:"cluster-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cluster-command"}},[s._v("#")]),s._v(" cluster command")]),s._v(" "),e("p",[s._v("The cluster command is used to manage a cluster of multiple EMQX Broker nodes (processes):")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("cluster join <Node>")])]),s._v(" "),e("td",[s._v("Join the cluster")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("cluster leave")])]),s._v(" "),e("td",[s._v("Leave the cluster")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("cluster force-leave <Node>")])]),s._v(" "),e("td",[s._v("Remove nodes from the cluster")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("cluster status")])]),s._v(" "),e("td",[s._v("Query cluster status")])])])]),s._v(" "),e("p",[s._v("Example:")]),s._v(" "),e("p",[s._v("To demonstrate the cluster command in a better way, we can firstly start a two-node cluster on the local machine, which is called pseudo-distributed starting mode. Since we need to start two nodes on one machine, we must adjust the listening port of the other node to avoid the port conflicts.")]),s._v(" "),e("p",[s._v("The basic process is to copy another emqx folder and name it emqx2. After that, we let all the listening ports of the original emqx to be added by an offset as the listening ports of the emqx2 node. For example, we can change the MQTT/TCP listening port from the default 1883 to 2883 as the MQTT/TCP listening port for emqx2. Please refer to "),e("a",{attrs:{href:"https://github.com/terry-xiaoyu/one_more_emqx",target:"_blank",rel:"noopener noreferrer"}},[s._v("Cluster Script"),e("OutboundLink")],1),s._v(" regarding to the above operations and also refer to "),e("RouterLink",{attrs:{to:"/en/enterprise/latest/getting-started/config.html"}},[s._v("Configuration Instructions")]),s._v(" and  "),e("RouterLink",{attrs:{to:"/en/enterprise/latest/configuration/configuration.html"}},[s._v("Configuration Items")]),s._v(" for details.")],1),s._v(" "),e("p",[s._v("Start emqx1 :")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Start emqx2 :")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Use "),e("code",[s._v("cluster join <Node>")]),s._v(" to combine two nodes into one cluster:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" emqx1@127.0.0.1\n\nJoin the cluster successfully.\nCluster status: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_nodes,"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx1@127.0.0.1'")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx2@127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("Query the cluster status in any node directory:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl cluster status\nCluster status: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_nodes,"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx2@127.0.0.1'")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx1@127.0.0.1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("Cluster message routing test:\nThe MQTT command line tool uses the  "),e("a",{attrs:{href:"https://github.com/emqx/emqtt/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("emqtt"),e("OutboundLink")],1),s._v(" client developed by the EMQX team.")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# emqx1 node (port 1883) subscribed topic x")]),s._v("\n$ ./bin/emqtt sub -t x -q "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1883")]),s._v("\nClient emqtt-a7de8fffbe2fbeb2fadb sent CONNECT\nClient emqtt-a7de8fffbe2fbeb2fadb subscribed to x\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Published message to emqx2 node (port 2883)")]),s._v("\n$ ./bin/emqtt pub -t x -q "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2883")]),s._v(" --payload hello\nClient emqtt-0898fa447676e17479a5 sent CONNECT\nClient emqtt-0898fa447676e17479a5 sent PUBLISH "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Q1, R0, D0, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Topic")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Payload")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" bytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\nClient emqtt-0898fa447676e17479a5 sent DISCONNECT\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# received a message by emqx1 node (port 1883)")]),s._v("\n$ ./bin/emqtt sub -t x -q "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1883")]),s._v("\nhello\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("emqx2 nodes leave the cluster:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster leave\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("emqx2 node is forced to leave the cluster, and you need to perform operations on nodes other than the target node under the cluster:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./bin/emqx_ctl cluster force-leave emqx2@127.0.0.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("It is Noted that EMQX Broker does not support joining a node that is already in a cluster to another cluster. That is because this will cause the data of the two clusters to be inconsistent. However, it supports nodes that have joined the cluster to join another cluster after leaving the cluster.")]),s._v(" "),e("h2",{attrs:{id:"acl-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-command"}},[s._v("#")]),s._v(" acl command")]),s._v(" "),e("p",[s._v("Since v4.1 the command "),e("code",[s._v("modules")]),s._v(" has been introduced and we reload the ACLs using the following command:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl modules reload emqx_mod_acl_internal\nModule emqx_mod_acl_internal reloaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("Prior to v4.1, still use:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl acl reload\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"acl-cache-clean"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-cache-clean"}},[s._v("#")]),s._v(" acl cache-clean")]),s._v(" "),e("p",[s._v("After v4.3, the command to clean up the ACL cache has been introduced:")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Commads")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("acl cache-clean all")])]),s._v(" "),e("td",[s._v("Clears acl cache on all nodes")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl cache-clean node <Node>")])]),s._v(" "),e("td",[s._v("Clears acl cache on given node")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl cache-clean <ClientId>")])]),s._v(" "),e("td",[s._v("Clears acl cache for given client")])])])]),s._v(" "),e("h2",{attrs:{id:"clients-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clients-command"}},[s._v("#")]),s._v(" clients command")]),s._v(" "),e("p",[s._v("The clients command can query the connected MQTT clients.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("clients list")])]),s._v(" "),e("td",[s._v("List all client connections")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("clients show <ClientId>")])]),s._v(" "),e("td",[s._v("Query the client with the specified ClientId")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("clients kick <ClientId>")])]),s._v(" "),e("td",[s._v("Kick out the client with the specified ClientId, and the connection and session will be terminated together.")])])])]),s._v(" "),e("h3",{attrs:{id:"clients-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clients-list"}},[s._v("#")]),s._v(" clients list")]),s._v(" "),e("p",[s._v("List all client connections:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl clients list\nClient "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/43832-airlee.lo, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test1, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:62135, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nClient "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/44011-airlee.lo, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test2, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:64961, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249657")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("disconnected_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1582249702")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("Return the properties of the Client object:")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Name")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("username")]),s._v(" "),e("td",[s._v("Username")])]),s._v(" "),e("tr",[e("td",[s._v("peername")]),s._v(" "),e("td",[s._v("Client IP and port")])]),s._v(" "),e("tr",[e("td",[s._v("clean_start")]),s._v(" "),e("td",[s._v("MQTT Clean Start")])]),s._v(" "),e("tr",[e("td",[s._v("keepalive")]),s._v(" "),e("td",[s._v("MQTT KeepAlive")])]),s._v(" "),e("tr",[e("td",[s._v("session_expiry_interval")]),s._v(" "),e("td",[s._v("Session expiration interval")])]),s._v(" "),e("tr",[e("td",[s._v("subscriptions")]),s._v(" "),e("td",[s._v("Current subscriptions")])]),s._v(" "),e("tr",[e("td",[s._v("inflight")]),s._v(" "),e("td",[s._v("Total number of QoS 1 and QoS 2 messages currently being issued")])]),s._v(" "),e("tr",[e("td",[s._v("awaiting_rel")]),s._v(" "),e("td",[s._v("Number of QoS2 messages waiting for the client to send PUBREL")])]),s._v(" "),e("tr",[e("td",[s._v("delivered_msgs")]),s._v(" "),e("td",[s._v("Number of messages forwarded by EMQX Broker to this client (including retransmissions)")])]),s._v(" "),e("tr",[e("td",[s._v("enqueued_msgs")]),s._v(" "),e("td",[s._v("Current length of message queue")])]),s._v(" "),e("tr",[e("td",[s._v("dropped_msgs")]),s._v(" "),e("td",[s._v("Number of messages dropped after the message queue reached the maximum length")])]),s._v(" "),e("tr",[e("td",[s._v("connected")]),s._v(" "),e("td",[s._v("Whether online")])]),s._v(" "),e("tr",[e("td",[s._v("created_at")]),s._v(" "),e("td",[s._v("Session creation timestamp")])]),s._v(" "),e("tr",[e("td",[s._v("connected_at")]),s._v(" "),e("td",[s._v("Client connection timestamp")])]),s._v(" "),e("tr",[e("td",[s._v("disconnected_at")]),s._v(" "),e("td",[s._v("Client disconnection timestamp (appears only if the disconnection also retains the session)")])])])]),s._v(" "),e("h3",{attrs:{id:"clients-show-clientid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clients-show-clientid"}},[s._v("#")]),s._v(" clients show <ClientId>")]),s._v(" "),e("p",[s._v("Query the client with the specified ClientId:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl clients show "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mosqsub/43832-airlee.lo"')]),s._v("\nClient "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mosqsub/43832-airlee.lo, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test1, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("peername")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:62747, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clean_start")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keepalive")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_expiry_interval")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7200")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("subscriptions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inflight")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("awaiting_rel")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("delivered_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enqueued_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dropped_msgs")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("created_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1576479557")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connected_at")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1576479557")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"clients-kick-clientid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clients-kick-clientid"}},[s._v("#")]),s._v(" clients kick <ClientId>")]),s._v(" "),e("p",[s._v("Kick out the client with the specified ClientId:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl clients kick "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientid"')]),s._v("\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"routes-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes-command"}},[s._v("#")]),s._v(" routes command")]),s._v(" "),e("p",[s._v("The routes command is used to query routing information.")]),s._v(" "),e("p",[s._v("In EMQX Broker, route refers to the mapping of topics to nodes, which is used to route messages between multiple nodes.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("routes list")])]),s._v(" "),e("td",[s._v("List all routes")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("routes show <Topic>")])]),s._v(" "),e("td",[s._v("Query the route of the specified topic")])])])]),s._v(" "),e("h3",{attrs:{id:"routes-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes-list"}},[s._v("#")]),s._v(" routes list")]),s._v(" "),e("p",[s._v("List all routes:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl routes list\nt2/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -> emqx2@127.0.0.1")]),s._v("\nt/+/x -"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" emqx2@127.0.0.1,emqx@127.0.0.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"routes-show-topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes-show-topic"}},[s._v("#")]),s._v(" routes show <Topic>")]),s._v(" "),e("p",[s._v("Query the route with the specified topic:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl routes show t/+/x\nt/+/x -"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" emqx2@127.0.0.1,emqx@127.0.0.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"subscriptions-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-command"}},[s._v("#")]),s._v(" subscriptions command")]),s._v(" "),e("p",[s._v("The subscriptions command queries the subscription table of the message server.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("subscriptions list")])]),s._v(" "),e("td",[s._v("List all subscriptions")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("subscriptions show <ClientId>")])]),s._v(" "),e("td",[s._v("Query the subscription of the specified ClientId client")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("subscriptions add <ClientId> <Topic> <QoS>")])]),s._v(" "),e("td",[s._v("Add static subscriptions manually")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("subscriptions del <ClientId> <Topic>")])]),s._v(" "),e("td",[s._v("Delete static subscriptions manually")])])])]),s._v(" "),e("h3",{attrs:{id:"subscriptions-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-list"}},[s._v("#")]),s._v(" subscriptions list")]),s._v(" "),e("p",[s._v("List all subscriptions:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl subscriptions list\nmosqsub/91042-airlee.lo -"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/y:1\nmosqsub/90475-airlee.lo -"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/+/x:2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"subscriptions-show-clientid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-show-clientid"}},[s._v("#")]),s._v(" subscriptions show <ClientId>")]),s._v(" "),e("p",[s._v("Query certain client's subscription:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl subscriptions show "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v("\nmosqsub/90475-airlee.lo -"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t/+/x:2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"subscriptions-add-clientid-topic-qos"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-add-clientid-topic-qos"}},[s._v("#")]),s._v(" subscriptions add <ClientId> <Topic> <QoS>")]),s._v(" "),e("p",[s._v("Add subscription relationship manually:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl subscriptions "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/world'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"subscriptions-del-clientid-topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions-del-clientid-topic"}},[s._v("#")]),s._v(" subscriptions del <ClientId> <Topic>")]),s._v(" "),e("p",[s._v("Delete subscription relationship manually:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl subscriptions del "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mosqsub/90475-airlee.lo'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/world'")]),s._v("\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"plugins-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugins-command"}},[s._v("#")]),s._v(" plugins command")]),s._v(" "),e("p",[s._v("The plugins command is used to load, unload, and query plugin applications. EMQX Broker extends authentication and customization through plugins. The plugin configuration is located in the directory of "),e("code",[s._v("etc/plugins/")]),s._v(" .")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("plugins list")])]),s._v(" "),e("td",[s._v("List all plugins")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("plugins load <Plugin>")])]),s._v(" "),e("td",[s._v("Load plugins")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("plugins unload <Plugin>")])]),s._v(" "),e("td",[s._v("Unload plugins")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("plugins reload <Plugin>")])]),s._v(" "),e("td",[s._v("Reload plugins")])])])]),s._v(" "),e("p",[s._v("When the configuration file changesand it needs to take effect immediately, you can execute the "),e("code",[s._v("emqx_ctl reload <Plugin \\>")]),s._v(" command, even if the plugin is not running when the configuration is modified. You should use this command instead of "),e("code",[s._v("emqx_ctl load <Plugin\\>")]),s._v(" . Because "),e("code",[s._v("emqx_ctl load <Plugin \\>")]),s._v(" does not compile the new configuration file.")]),s._v(" "),e("h3",{attrs:{id:"plugins-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugins-list"}},[s._v("#")]),s._v(" plugins list")]),s._v(" "),e("p",[s._v("List all plugins:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl plugins list\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nPlugin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_http, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Authentication/ACL with HTTP API, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_jwt, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Authentication with JWT, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPlugin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_auth_ldap, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Authentication/ACL with LDAP, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("Plugin properties:")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Name")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("version")]),s._v(" "),e("td",[s._v("Plugin version")])]),s._v(" "),e("tr",[e("td",[s._v("description")]),s._v(" "),e("td",[s._v("Plugin description")])]),s._v(" "),e("tr",[e("td",[s._v("active")]),s._v(" "),e("td",[s._v("Whether loaded")])])])]),s._v(" "),e("h3",{attrs:{id:"plugins-load-plugin-load-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugins-load-plugin-load-plugin"}},[s._v("#")]),s._v(" plugins load <Plugin> {#load_plugin}")]),s._v(" "),e("p",[s._v("Load plugin:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl plugins load emqx_lua_hook\nPlugin emqx_lua_hook loaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"plugins-unload-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugins-unload-plugin"}},[s._v("#")]),s._v(" plugins unload <Plugin>")]),s._v(" "),e("p",[s._v("Unload plugin:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl plugins unload emqx_lua_hook\nPlugin emqx_lua_hook unloaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"plugins-reload-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugins-reload-plugin"}},[s._v("#")]),s._v(" plugins reload <Plugin>")]),s._v(" "),e("p",[s._v("Reload plugin:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl plugins reload emqx_lua_hook\nPlugin emqx_lua_hook reloaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"modules-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modules-command"}},[s._v("#")]),s._v(" modules command")]),s._v(" "),e("p",[s._v("Since v4.1 we have introduced the "),e("code",[s._v("modules")]),s._v(" command to manage EMQX's built-in modules at runtime.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("modules list")])]),s._v(" "),e("td",[s._v("List all modules")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("modules load <Module>")])]),s._v(" "),e("td",[s._v("Load a module")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("modules unload <Module>")])]),s._v(" "),e("td",[s._v("Unload a module")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("modules reload <Module>")])]),s._v(" "),e("td",[s._v("Reload a module")])])])]),s._v(" "),e("h3",{attrs:{id:"modules-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modules-list"}},[s._v("#")]),s._v(" modules list")]),s._v(" "),e("p",[s._v("Lists all built-in modules, including those that have not been started:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl modules list\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_delayed, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Delayed Publish Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_topic_metrics, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Topic Metrics Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_subscription, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Subscription Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_acl_internal, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Internal ACL Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_rewrite, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Topic Rewrite Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("emqx_mod_presence, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("EMQX Presence Module, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("active")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"modules-load"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modules-load"}},[s._v("#")]),s._v(" modules load")]),s._v(" "),e("p",[s._v("Load a module:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl modules load emqx_mod_delayed\nModule emqx_mod_delayed loaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"modules-unload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modules-unload"}},[s._v("#")]),s._v(" modules unload")]),s._v(" "),e("p",[s._v("Unload a module:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl modules unload emqx_mod_delayed\nModule emqx_mod_delayed unloaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"modules-reload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modules-reload"}},[s._v("#")]),s._v(" modules reload")]),s._v(" "),e("p",[s._v("Reload a module:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl modules reload emqx_mod_acl_internal\nModule emqx_mod_acl_internal reloaded successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"vm-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-command"}},[s._v("#")]),s._v(" vm command")]),s._v(" "),e("p",[s._v("The vm command is used to query information of Erlang virtual machine load, memory, process, and IO.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("vm")])]),s._v(" "),e("td",[s._v("Equivalent to vm all")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm all")])]),s._v(" "),e("td",[s._v("Query all VM information")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm load")])]),s._v(" "),e("td",[s._v("Query VM load")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm memory")])]),s._v(" "),e("td",[s._v("Query VM memory")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm process")])]),s._v(" "),e("td",[s._v("Query the number of VM Erlang processes")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm io")])]),s._v(" "),e("td",[s._v("Query maximum file handle of VM io")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("vm ports")])]),s._v(" "),e("td",[s._v("Query the port of a VM")])])])]),s._v(" "),e("h3",{attrs:{id:"vm-all"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-all"}},[s._v("#")]),s._v(" vm all")]),s._v(" "),e("p",[s._v("Query all VM information, including load, memory, number of Erlang processes, etc .:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm all\ncpu/load1               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.22")]),s._v("\ncpu/load5               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.29")]),s._v("\ncpu/load15              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.16")]),s._v("\nmemory/total            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("99995208")]),s._v("\nmemory/processes        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("38998248")]),s._v("\nmemory/processes_used   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("38938520")]),s._v("\nmemory/system           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60996960")]),s._v("\nmemory/atom             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1189073")]),s._v("\nmemory/atom_used        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1173808")]),s._v("\nmemory/binary           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("100336")]),s._v("\nmemory/code             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25439961")]),s._v("\nmemory/ets              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7161128")]),s._v("\nprocess/limit           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("\nprocess/count           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("315")]),s._v("\nio/max_fds              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\nio/active_fds           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nports/count             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\nports/limit             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"vm-load"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-load"}},[s._v("#")]),s._v(" vm load")]),s._v(" "),e("p",[s._v("Query VM load:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm load\ncpu/load1               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.21")]),s._v("\ncpu/load5               "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.60")]),s._v("\ncpu/load15              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.36")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"vm-memory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-memory"}},[s._v("#")]),s._v(" vm memory")]),s._v(" "),e("p",[s._v("Query VM memory:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm memory\nmemory/total            "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("23967736")]),s._v("\nmemory/processes        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3594216")]),s._v("\nmemory/processes_used   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3593112")]),s._v("\nmemory/system           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20373520")]),s._v("\nmemory/atom             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512601")]),s._v("\nmemory/atom_used        "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("491955")]),s._v("\nmemory/binary           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("51432")]),s._v("\nmemory/code             "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13401565")]),s._v("\nmemory/ets              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1082848")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"vm-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-process"}},[s._v("#")]),s._v(" vm process")]),s._v(" "),e("p",[s._v("Query the number of Erlang processes and their limits:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm process\nprocess/limit           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("\nprocess/count           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("314")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"vm-io"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-io"}},[s._v("#")]),s._v(" vm io")]),s._v(" "),e("p",[s._v("Query the number of file descriptors and their limits:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm io\nio/max_fds              "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\nio/active_fds           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"vm-ports"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vm-ports"}},[s._v("#")]),s._v(" vm ports")]),s._v(" "),e("p",[s._v("Query the number of occupied ports and their limits:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl vm ports\nports/count           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\nports/limit           "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"mnesia-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mnesia-command"}},[s._v("#")]),s._v(" mnesia command")]),s._v(" "),e("p",[s._v("Query the mnesia database system status.")]),s._v(" "),e("h2",{attrs:{id:"log-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-command"}},[s._v("#")]),s._v(" log command")]),s._v(" "),e("p",[s._v("The log command is used to set the log level. Visit "),e("a",{attrs:{href:"http://erlang.org/doc/apps/kernel/logger_chapter.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Documentation of logger"),e("OutboundLink")],1),s._v(" for more information in detail.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("log set-level <Level>")])]),s._v(" "),e("td",[s._v("Set the primary log level and all Handlers log levels")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("log primary-level")])]),s._v(" "),e("td",[s._v("Check the primary log level")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("log primary-lelvel <Level>")])]),s._v(" "),e("td",[s._v("Set the primary log level")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("log handlers list")])]),s._v(" "),e("td",[s._v("View all Hanlders currently installed")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("log handlers set-level <HandlerId> <Level>")])]),s._v(" "),e("td",[s._v("Set the log level with the specified Hanlder")])])])]),s._v(" "),e("p",[s._v("The levels of the logs from low to high are: "),e("code",[s._v("debug | info | notice | warning | error | critical | alert | emergency")]),s._v(". The lower the log level, the more logs the system outputs, and the more system resources it consumes. To improve system performance, the default primary log level is error.")]),s._v(" "),e("h3",{attrs:{id:"log-set-level-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-set-level-level"}},[s._v("#")]),s._v(" log set-level <Level>")]),s._v(" "),e("p",[s._v("Set the primary log level and all Handlers log levels")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log set-level debug\ndebug\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"log-primary-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-primary-level"}},[s._v("#")]),s._v(" log primary-level")]),s._v(" "),e("p",[s._v("View the primary log level:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log primary-level\ndebug\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"log-primary-level-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-primary-level-level"}},[s._v("#")]),s._v(" log primary-level <Level>")]),s._v(" "),e("p",[s._v("Set the primary log level:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log primary-level info\ninfo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"log-handlers-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-list"}},[s._v("#")]),s._v(" log handlers list")]),s._v(" "),e("p",[s._v("View all Hanlders currently installed:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log handlers list\nLogHandler "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("emqx_logger_handler, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("debug, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("unknown"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLogHandler "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("debug, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("log/emqx.log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nLogHandler "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("default, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("debug, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"log-handlers-set-level-handlerid-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-handlers-set-level-handlerid-level"}},[s._v("#")]),s._v(" log handlers set-level <HandlerId> <Level>")]),s._v(" "),e("p",[s._v("Set the log level with the specified Hanlder:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log handlers set-level emqx_logger_handler error\nerror\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"trace-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-command"}},[s._v("#")]),s._v(" trace command")]),s._v(" "),e("p",[s._v("The trace command is used to trace a client or topic, and print log information to a file. For details, see "),e("RouterLink",{attrs:{to:"/en/enterprise/latest/getting-started/log.html"}},[s._v("Log and Trace")]),s._v(".")],1),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("trace list")])]),s._v(" "),e("td",[s._v("List all started traces")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("trace start client <ClientId> <File> [<Level>]")])]),s._v(" "),e("td",[s._v("Start client trace and store logs of specified level to a file")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("trace stop client <ClientId>")])]),s._v(" "),e("td",[s._v("Stop Client trace")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("trace start topic <Topic> <File> [<Level>]")])]),s._v(" "),e("td",[s._v("Start Topic trace and store logs of specified level to a file")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("trace stop topic <Topic>")])]),s._v(" "),e("td",[s._v("Stop Topic trace")])])])]),s._v(" "),e("h3",{attrs:{id:"trace-start-client-clientid-file-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-start-client-clientid-file-level"}},[s._v("#")]),s._v(" trace start client <ClientId> <File> [ <Level> ]")]),s._v(" "),e("p",[s._v("Start client trace:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log primary-level debug\ndebug\n \n$ ./bin/emqx_ctl trace start client clientid log/clientid_trace.log\ntrace clientid clientid successfully\n\n$ ./bin/emqx_ctl trace start client clientid2 log/clientid2_trace.log error\ntrace clientid clientid2 successfully\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"trace-stop-client-clientid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-stop-client-clientid"}},[s._v("#")]),s._v(" trace stop client <ClientId>")]),s._v(" "),e("p",[s._v("Stop client trace:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl trace stop client clientid\nstop tracing clientid clientid successfully\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"trace-start-topic-topic-file-level"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-start-topic-topic-file-level"}},[s._v("#")]),s._v(" trace start topic <Topic> <File> [ <Level> ]")]),s._v(" "),e("p",[s._v("Start Topic trace:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl log primary-level debug\ndebug\n\n$ ./bin/emqx_ctl trace start topic topic log/topic_trace.log\ntrace topic topic successfully\n\n$ ./bin/emqx_ctl trace start topic topic2 log/topic2_trace.log error\ntrace topic topic2 successfully\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"trace-stop-topic-topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-stop-topic-topic"}},[s._v("#")]),s._v(" trace stop topic <Topic>")]),s._v(" "),e("p",[s._v("Stop Topic trace:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl trace topic topic off\nstop tracing topic topic successfully\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"trace-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#trace-list"}},[s._v("#")]),s._v(" trace list")]),s._v(" "),e("p",[s._v("List all started traces:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl trace list\nTrace "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clientid"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("clientid2, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("error, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log/clientid2_trace.log"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nTrace "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("topic"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("topic2, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("error, "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("destination")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"log/topic2_trace.log"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"listeners"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listeners"}},[s._v("#")]),s._v(" listeners")]),s._v(" "),e("p",[s._v("The listeners command is used to query the active TCP service listeners.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("listeners")]),s._v(" "),e("td",[s._v("# List listeners")])]),s._v(" "),e("tr",[e("td",[s._v("listeners stop    <Identifier>")]),s._v(" "),e("td",[s._v("# Stop a listener")])]),s._v(" "),e("tr",[e("td",[s._v("listeners stop    <Proto> <Port>")]),s._v(" "),e("td",[s._v("# Stop a listener")])]),s._v(" "),e("tr",[e("td",[s._v("listeners restart <Identifier>")]),s._v(" "),e("td",[s._v("# Restart a listener")])])])]),s._v(" "),e("h3",{attrs:{id:"listeners-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listeners-list"}},[s._v("#")]),s._v(" listeners list")]),s._v(" "),e("p",[s._v("Query the active TCP service listeners")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl listeners\nmqtt:ssl:external\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8883\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:tcp:external\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:1883\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024000")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:tcp:internal\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:11883\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024000")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhttp:dashboard\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:18083\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nhttp:management\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8081\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:ws:external\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8083\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("102400")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmqtt:wss:external\n  listen_on       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8084\n  acceptors       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  max_conns       "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n  current_conn    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  shutdown_count  "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br")])]),e("p",[s._v("listener parameter description:")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Name")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("acceptors")]),s._v(" "),e("td",[s._v("TCP Acceptor pool")])]),s._v(" "),e("tr",[e("td",[s._v("max_conns")]),s._v(" "),e("td",[s._v("Maximum allowed connections")])]),s._v(" "),e("tr",[e("td",[s._v("current_conns")]),s._v(" "),e("td",[s._v("Current connections")])]),s._v(" "),e("tr",[e("td",[s._v("shutdown_count")]),s._v(" "),e("td",[s._v("Statistics of connection shutdown reasons")])])])]),s._v(" "),e("h3",{attrs:{id:"listeners-stop-identifier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listeners-stop-identifier"}},[s._v("#")]),s._v(" listeners stop <Identifier>")]),s._v(" "),e("p",[s._v("Stop listener:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl listeners stop mqtt:tcp:external\nStop listener mqtt:tcp:external successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"listeners-restart-identifier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listeners-restart-identifier"}},[s._v("#")]),s._v(" listeners restart <Identifier>")]),s._v(" "),e("h3",{attrs:{id:"listeners-restart"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#listeners-restart"}},[s._v("#")]),s._v(" listeners restart")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl listeners restart http:dashboard\nStop http:dashboard listener on "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:18083 successfully.\nStart http:dashboard listener on "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:18083 successfully.\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"recon-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recon-command"}},[s._v("#")]),s._v(" recon command")]),s._v(" "),e("p",[s._v("The recon command of EMQX Broker is based on the Erlang Recon library, which is used to help DevOps staff to diagnose problems in the production node, and ordinary users do not need to care. The recon command will consume some performance, so, please use it with caution.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("recon memory")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon_alloc.html#memory-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon_alloc:memory/2"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("recon allocated")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon_alloc.html#memory-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon_alloc:memory (allocated_types, current/max)"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("recon bin_leak")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#bin_leak-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:bin_leak (100)"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("recon node_stats")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#node_stats_print-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:node_stats_print(10, 1000)"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("recon remote_load Mod")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#remote_load-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:remote_load (Mod)"),e("OutboundLink")],1)])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("recon proc_count Attr N")])]),s._v(" "),e("td",[e("a",{attrs:{href:"http://ferd.github.io/recon/recon.html#proc_count-2",target:"_blank",rel:"noopener noreferrer"}},[s._v("recon:proc_count(Attr, N)"),e("OutboundLink")],1)])])])]),s._v(" "),e("p",[s._v("Visit "),e("a",{attrs:{href:"http://ferd.github.io/recon/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Documentation for recon"),e("OutboundLink")],1),s._v(" for more information.")]),s._v(" "),e("h2",{attrs:{id:"retainer-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retainer-command"}},[s._v("#")]),s._v(" retainer command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("retainer info")])]),s._v(" "),e("td",[s._v("Show the number of retained messages")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("retainer topics")])]),s._v(" "),e("td",[s._v("Display all topics of currently stored retained messages")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("retainer clean")])]),s._v(" "),e("td",[s._v("Clean all retained messages")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("retainer clean <Topic>")])]),s._v(" "),e("td",[s._v("Clean retained messages with the specified topic")])])])]),s._v(" "),e("h3",{attrs:{id:"retainer-info"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retainer-info"}},[s._v("#")]),s._v(" retainer info")]),s._v(" "),e("p",[s._v("Show the number of retained messages:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl retainer info\nretained/total: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"retainer-topics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retainer-topics"}},[s._v("#")]),s._v(" retainer topics")]),s._v(" "),e("p",[s._v("Show all topics of currently stored retained messages:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl retainer topics\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers/emqx@127.0.0.1/version\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers/emqx@127.0.0.1/sysdescr\n"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SYS")]),s._v("/brokers\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"retainer-clean"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retainer-clean"}},[s._v("#")]),s._v(" retainer clean")]),s._v(" "),e("p",[s._v("Clear all retained messages:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl retainer clean\nCleaned "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" retained messages\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"retainer-clean-topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retainer-clean-topic"}},[s._v("#")]),s._v(" retainer clean <Topic>")]),s._v(" "),e("p",[s._v("Clear the retained messages with the specified topic:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl retainer clean topic\nCleaned "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" retained messages\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"admins-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admins-command"}},[s._v("#")]),s._v(" admins command")]),s._v(" "),e("p",[s._v("It is used to create and delete administrator's accounts and reset the administrator's password.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("admins add <Username> <Password> <Tags>")])]),s._v(" "),e("td",[s._v("Create admin account")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("admins passwd <Username> <Password>")])]),s._v(" "),e("td",[s._v("Reset admin password")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("admins del <Username>")])]),s._v(" "),e("td",[s._v("Delete admin account")])])])]),s._v(" "),e("h3",{attrs:{id:"admins-add-username-password-tags"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admins-add-username-password-tags"}},[s._v("#")]),s._v(" admins add <Username> <Password> <Tags>")]),s._v(" "),e("p",[s._v("Create admin account:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl admins "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" root public "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"admins-passwd-username-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admins-passwd-username-password"}},[s._v("#")]),s._v(" admins passwd <Username> <Password>")]),s._v(" "),e("p",[s._v("Reset admin password:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl admins "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root private\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"admins-del-username"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admins-del-username"}},[s._v("#")]),s._v(" admins del <Username>")]),s._v(" "),e("p",[s._v("Delete admin account:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl admins del root\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"rule-engine-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-engine-command"}},[s._v("#")]),s._v(" Rule engine command")]),s._v(" "),e("h3",{attrs:{id:"rules-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-command"}},[s._v("#")]),s._v(" rules command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("rules list")])]),s._v(" "),e("td",[s._v("List all rules")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("rules show <RuleId>")])]),s._v(" "),e("td",[s._v("Show a rule")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("rules create <sql> <actions> [-d [<descr>]]")])]),s._v(" "),e("td",[s._v("Create a rule")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("rules delete <RuleId>")])]),s._v(" "),e("td",[s._v("Delete a rule")])])])]),s._v(" "),e("h4",{attrs:{id:"rules-create"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-create"}},[s._v("#")]),s._v(" rules create")]),s._v(" "),e("p",[s._v("Create a new rule with the following parameter:")]),s._v(" "),e("ul",[e("li",[e("em",[e("code",[s._v("<sql>")])]),s._v(": rule SQL")]),s._v(" "),e("li",[e("em",[e("code",[s._v("<actions>")])]),s._v(": Action list in JSON format")]),s._v(" "),e("li",[e("em",[e("code",[s._v("-d <descr>")])]),s._v(": Optional, rule description")])]),s._v(" "),e("p",[s._v("Example")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Create a test rule to simply print the content of all messages sent to the 't / a' topic")]),s._v("\n$ ./bin/emqx_ctl rules create "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from \"t/a\"'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'[{"name":"inspect", "params": {"a": 1}}]\'')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -d "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rule for debug'")]),s._v("\n\nRule rule:9a6a725d created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("The above example creates a rule with the ID "),e("code",[s._v("rule:9a6a725d")]),s._v(". There is only one action in the action list with the name inspect, and the action parameters are "),e("code",[s._v('{" a ": 1}')]),s._v(".")]),s._v(" "),e("h4",{attrs:{id:"rules-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-list"}},[s._v("#")]),s._v(" rules list")]),s._v(" "),e("p",[s._v("List all current rules:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl rules list\n \nrule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("for")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),s._v("t/a"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rawsql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from \"t/a\"'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("actions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metrics"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inspect"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"params"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("., "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rule for debug'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"rules-show"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-show"}},[s._v("#")]),s._v(" rules show")]),s._v(" "),e("p",[s._v("Query rules:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Query rule with RuleID 'rule:9a6a725d'")]),s._v("\n$ ./bin/emqx_ctl rules show "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v("\n \nrule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("for")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'['")]),s._v("t/a"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("']'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rawsql")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'select * from \"t/a\"'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("actions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metrics"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".,"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inspect"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"params"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("., "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'true'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Rule for debug'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"rules-delete"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rules-delete"}},[s._v("#")]),s._v(" rules delete")]),s._v(" "),e("p",[s._v("Delete rule:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Delete rule with RuleID 'rule:9a6a725d'")]),s._v("\n$ ./bin/emqx_ctl rules delete "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rule:9a6a725d'")]),s._v("\n \nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"rule-actions-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-command"}},[s._v("#")]),s._v(" rule-actions command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("rule-actions list")])]),s._v(" "),e("td",[s._v("List actions")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("rule-actions show <ActionId>")])]),s._v(" "),e("td",[s._v("Show a rule action")])])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("Actions can be built-in by EMQX Broker (called system built-in actions) or be written by EMQX Broker plugins, but cannot be added or removed through the CLI/API.")])]),s._v(" "),e("h4",{attrs:{id:"rule-actions-show"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-show"}},[s._v("#")]),s._v(" rule-actions show")]),s._v(" "),e("p",[s._v("Query action:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Query action named 'inspect'")]),s._v("\n$ ./bin/emqx_ctl rule-actions show "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inspect'")]),s._v("\n\naction"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inspect'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_rule_engine'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Inspect (debug)'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Inspect the details of action params for debug purpose'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h4",{attrs:{id:"rule-actions-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-actions-list"}},[s._v("#")]),s._v(" rule-actions list")]),s._v(" "),e("p",[s._v("List eligible actions:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## List all current actions")]),s._v("\n$ ./bin/emqx_ctl rule-actions list\n\naction"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data_to_rabbit'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_bridge_rabbit'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bridge_rabbit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Data bridge to RabbitMQ'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Store Data to Kafka'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\naction"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data_to_timescaledb'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_pgsql'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("types")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("timescaledb"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Data to TimescaleDB'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Store data to TimescaleDB'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"resources-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-command"}},[s._v("#")]),s._v(" resources command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("resources create <type> [-c [<config>]] [-d [<descr>]]")])]),s._v(" "),e("td",[s._v("Create a resource")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("resources list [-t <ResourceType>]")])]),s._v(" "),e("td",[s._v("List resources")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("resources show <ResourceId>")])]),s._v(" "),e("td",[s._v("Show a resource")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("resources delete <ResourceId>")])]),s._v(" "),e("td",[s._v("Delete a resource")])])])]),s._v(" "),e("h4",{attrs:{id:"resources-create"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-create"}},[s._v("#")]),s._v(" resources create")]),s._v(" "),e("p",[s._v("Create a new resource with the following parameters:")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("type: resource type")])]),s._v(" "),e("li",[e("p",[s._v("-c config: Configuration in JSON format")])]),s._v(" "),e("li",[e("p",[s._v("-d descr: Optional, description of the resource")]),s._v(" "),e("p",[s._v("$ ./bin/emqx_ctl resources create 'web_hook' -c '{\"url\": \"http://host-name/chats\"}' -d 'forward msgs to host-name/chats'")]),s._v(" "),e("p",[s._v("Resource resource:a7a38187 created")])])]),s._v(" "),e("h4",{attrs:{id:"resources-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-list"}},[s._v("#")]),s._v(" resources list")]),s._v(" "),e("p",[s._v("List all current resources:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl resources list\n\nresource"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("List resources of a certain type:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl resources list --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v("\n \nresource"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"resources-show"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-show"}},[s._v("#")]),s._v(" resources show")]),s._v(" "),e("p",[s._v("Query resource:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl resources show "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v("\n \nresource"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'web_hook'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#{<<"url">> => <<"http://host-name/chats">>}, status=#{is_alive => false}, description=\'forward msgs to host-name/chats\')')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h4",{attrs:{id:"resources-delete"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resources-delete"}},[s._v("#")]),s._v(" resources delete")]),s._v(" "),e("p",[s._v("Delete resource:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl resources delete "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'resource:a7a38187'")]),s._v("\n \nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"resource-types-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-command"}},[s._v("#")]),s._v(" resource-types command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("resource-types list")]),s._v(" "),e("td",[s._v("List all resource-types")])]),s._v(" "),e("tr",[e("td",[s._v("resource-types show "),e("code",[s._v("<Type>")])]),s._v(" "),e("td",[s._v("Show a resource-type")])])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("Resource type can be built-in by EMQX Broker (called system built-in resource type) or be written by EMQX Broker plugins, but cannot be added or removed through the CLI/API")])]),s._v(" "),e("h4",{attrs:{id:"resource-types-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-list"}},[s._v("#")]),s._v(" resource-types list")]),s._v(" "),e("p",[s._v("List all current resource types:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl resource-types list\n \nresource_type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_mongo_rs'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_mongo'")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MongoDB Replica Set Mode'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MongoDB Replica Set Mode'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nresource_type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_cassa'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_cassa'")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Cassandra'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Cassandra Database'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h4",{attrs:{id:"resource-types-show"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resource-types-show"}},[s._v("#")]),s._v(" resource-types show")]),s._v(" "),e("p",[s._v("Query resource type:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ ./bin/emqx_ctl resource-types show backend_mysql\n \nresource_type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'backend_mysql'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'emqx_backend_mysql'")]),s._v(", title "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MySQL'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MySQL Database'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"status-statistical-indicators-and-alerts-related-to-the-rules-engine"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#status-statistical-indicators-and-alerts-related-to-the-rules-engine"}},[s._v("#")]),s._v(" Status, statistical indicators and alerts related to the rules engine")]),s._v(" "),e("h3",{attrs:{id:"rule-status-and-statistical-indicators"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rule-status-and-statistical-indicators"}},[s._v("#")]),s._v(" Rule status and statistical indicators")]),s._v(" "),e("p",[e("img",{attrs:{src:t(495),alt:"image"}})]),s._v(" "),e("ul",[e("li",[s._v("Hits: number of rule hits (match succeed for rule SQL),")]),s._v(" "),e("li",[s._v("Hit Speed: Speed of rule hits (times/second)")]),s._v(" "),e("li",[s._v("Maximum hit speed: Peak value of hit speed (times/second)")]),s._v(" "),e("li",[s._v("5 minute average speed: Average hit speed in 5 minutes (times/second)")])]),s._v(" "),e("h3",{attrs:{id:"action-status-and-statistical-indicators"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#action-status-and-statistical-indicators"}},[s._v("#")]),s._v(" Action status and statistical indicators")]),s._v(" "),e("p",[e("img",{attrs:{src:t(496),alt:"image"}})]),s._v(" "),e("ul",[e("li",[s._v("Success: Number of successful actions")]),s._v(" "),e("li",[s._v("Failure: Number of failed actions")])]),s._v(" "),e("h3",{attrs:{id:"resource-status-and-alerts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resource-status-and-alerts"}},[s._v("#")]),s._v(" Resource status and alerts")]),s._v(" "),e("p",[e("img",{attrs:{src:t(497),alt:"image"}})]),s._v(" "),e("ul",[e("li",[s._v("Available: Resources available")]),s._v(" "),e("li",[s._v("Unavailable: resources unavailable (e.g. database connection shutdown)")])]),s._v(" "),e("h2",{attrs:{id:"emqx-internal-db-auth-acl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#emqx-internal-db-auth-acl"}},[s._v("#")]),s._v(" EMQX Internal DB Auth/ACL")]),s._v(" "),e("p",[s._v("This command will only take effect when the emqx_auth_mnesia plug-in is turned on")]),s._v(" "),e("h3",{attrs:{id:"clientid-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clientid-command"}},[s._v("#")]),s._v(" clientid command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("clientid list")]),s._v(" "),e("td",[s._v("List clientid auth rules")])]),s._v(" "),e("tr",[e("td",[s._v("clientid add "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Add clientid auth rule")])]),s._v(" "),e("tr",[e("td",[s._v("clientid update "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Update clientid auth rule")])]),s._v(" "),e("tr",[e("td",[s._v("clientid del "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Delete clientid auth rule")])])])]),s._v(" "),e("h4",{attrs:{id:"clientid-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clientid-list"}},[s._v("#")]),s._v(" clientid list")]),s._v(" "),e("p",[s._v("List clientid auth rules")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl clientid list\nemqx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"clientid-add-clientid-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clientid-add-clientid-password"}},[s._v("#")]),s._v(" clientid add "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Add clientid auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl clientid "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" emqx public\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"clientid-update-clientid-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clientid-update-clientid-password"}},[s._v("#")]),s._v(" clientid update "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Update clientid auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl clientid update emqx new_password\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"clientid-del-clientid-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clientid-del-clientid-password"}},[s._v("#")]),s._v(" clientid del "),e("code",[s._v("<ClientID>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Delete clientid auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl clientid del emqx new_password\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"user-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-command"}},[s._v("#")]),s._v(" user command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("user list")]),s._v(" "),e("td",[s._v("List username auth rules")])]),s._v(" "),e("tr",[e("td",[s._v("user add "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Add username auth rule")])]),s._v(" "),e("tr",[e("td",[s._v("user update "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Update username auth rule")])]),s._v(" "),e("tr",[e("td",[s._v("user del "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("td",[s._v("Delete username auth rule")])])])]),s._v(" "),e("h4",{attrs:{id:"user-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-list"}},[s._v("#")]),s._v(" user list")]),s._v(" "),e("p",[s._v("List username auth rules")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl user list\nemqx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"user-add-username-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-add-username-password"}},[s._v("#")]),s._v(" user add "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Add username auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl user "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" emqx public\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"user-update-username-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-update-username-password"}},[s._v("#")]),s._v(" user update "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Update username auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl user update emqx new_password\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"user-del-username-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-del-username-password"}},[s._v("#")]),s._v(" user del "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Password>")])]),s._v(" "),e("p",[s._v("Delete username auth rule")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl user del emqx new_password\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"acl-command-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-command-2"}},[s._v("#")]),s._v(" acl command")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("acl list clientid")])]),s._v(" "),e("td",[s._v("List clientid acls")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl list username")])]),s._v(" "),e("td",[s._v("List username acls")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl list _all")])]),s._v(" "),e("td",[s._v("List $all acls")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl show clientid <Clientid>")])]),s._v(" "),e("td",[s._v("Lookup clientid acl detail")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl show username <Username>")])]),s._v(" "),e("td",[s._v("Lookup username acl detail")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl aad clientid <Clientid> <Topic> <Action> <Access>")])]),s._v(" "),e("td",[s._v("Add clientid acl")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl add Username <Username> <Topic> <Action> <Access>")])]),s._v(" "),e("td",[s._v("Add username acl")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl add _all <Topic> <Action> <Access>")])]),s._v(" "),e("td",[s._v("Add $all acl")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl del clientid <Clientid> <Topic>")])]),s._v(" "),e("td",[s._v("Delete clientid acl")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl del username <Username> <Topic>")])]),s._v(" "),e("td",[s._v("Delete username acl")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("acl del _all <Topic>")])]),s._v(" "),e("td",[s._v("Delete $all acl")])])])]),s._v(" "),e("h4",{attrs:{id:"acl-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-list"}},[s._v("#")]),s._v(" acl list")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("acl list "),e("code",[s._v("clientid")])]),s._v(" "),e("p",[s._v("List clientid acls")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl list clientid\nAcl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clientid "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_clientid"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" topic "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Topic/A"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" action "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pub access "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" allow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl list "),e("code",[s._v("username")])]),s._v(" "),e("p",[s._v("List username acls")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl list username\nAcl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_username"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" topic "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Topic/B"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" action "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sub access "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" deny"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl list "),e("code",[s._v("_all")])]),s._v(" "),e("p",[s._v("List $all acls")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl list _all\nAcl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$all")]),s._v(" topic "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Topic/C"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" action "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pubsub access "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" allow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"acl-show"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-show"}},[s._v("#")]),s._v(" acl show")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("acl show clientid "),e("code",[s._v("<Clientid>")])]),s._v(" "),e("p",[s._v("Lookup clientid acl detail")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl show clientid emqx_clientid\nAcl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("clientid "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_clientid"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" topic "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Topic/A"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" action "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pub access "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" allow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl show username "),e("code",[s._v("<Username>")])]),s._v(" "),e("p",[s._v("Lookup username acl detail")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl show username emqx_username\nAcl"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"emqx_username"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" topic "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Topic/B"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" action "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sub access "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" deny"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"acl-add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-add"}},[s._v("#")]),s._v(" acl add")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("acl aad clientid "),e("code",[s._v("<Clientid>")]),s._v(" "),e("code",[s._v("<Topic>")]),s._v(" "),e("code",[s._v("<Action>")]),s._v(" "),e("code",[s._v("<Access>")])]),s._v(" "),e("p",[s._v("Add clientid acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" clientid emqx_clientid Topic/A pub allow\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl aad username "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Topic>")]),s._v(" "),e("code",[s._v("<Action>")]),s._v(" "),e("code",[s._v("<Access>")])]),s._v(" "),e("p",[s._v("Add username acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" username emqx_username Topic/B sub deny\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl aad "),e("code",[s._v("_all")]),s._v(" "),e("code",[s._v("<Topic>")]),s._v(" "),e("code",[s._v("<Action>")]),s._v(" "),e("code",[s._v("<Access>")])]),s._v(" "),e("p",[s._v("Add $all acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" _all Topic/C pubsub allow\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"acl-del"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#acl-del"}},[s._v("#")]),s._v(" acl del")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("acl del clientid "),e("code",[s._v("<Clientid>")]),s._v(" "),e("code",[s._v("<Topic>")])]),s._v(" "),e("p",[s._v("Delete clientid acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl del clientid emqx_clientid Topic/A\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl del username "),e("code",[s._v("<Username>")]),s._v(" "),e("code",[s._v("<Topic>")])]),s._v(" "),e("p",[s._v("Delete username acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl del clientid emqx_username Topic/B\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("acl del "),e("code",[s._v("_all")]),s._v(" "),e("code",[s._v("<Topic>")])]),s._v(" "),e("p",[s._v("Delete $all acl")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("./bin/emqx_ctl acl del _all Topic/C\nok\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("h2",{attrs:{id:"pem-cache-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pem-cache-command"}},[s._v("#")]),s._v(" pem_cache command")]),s._v(" "),e("p",[s._v("The "),e("code",[s._v("pem_cache")]),s._v(" command is used to clear the cache of all PEM certificates.\nFor example, after some new trusted certificates are added to "),e("code",[s._v("cacertfile")]),s._v("\nor server certificate "),e("code",[s._v("certfile")]),s._v(" renewal for SSL listeners, you can use this command\nto make the new certificate file take effect instead of restarting EMQX's SSL listener.")]),s._v(" "),e("p",[e("strong",[s._v("NOTE")]),s._v(" The updates of the cache do not affect currently established TLS connections.")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("Command")]),s._v(" "),e("th",[s._v("Description")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("pem_cache clean")])]),s._v(" "),e("td",[s._v("Clears x509 certificate cache on all nodes")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("pem_cache clean node <Node>")])]),s._v(" "),e("td",[s._v("Clears x509 certificate cache on given node")])])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("This command was introduced in v4.3.13. It was not supported in any version prior to this.")])])])}),[],!1,null,null,null);a.default=n.exports},495:function(s,a,t){s.exports=t.p+"docs-assets/img/rule_metrics.b093843b.png"},496:function(s,a,t){s.exports=t.p+"docs-assets/img/action_metrics.4b791935.png"},497:function(s,a,t){s.exports=t.p+"docs-assets/img/resource_status.22036231.png"}}]);