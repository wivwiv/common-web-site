(window.webpackJsonp=window.webpackJsonp||[]).push([[229],{1489:function(e,t,a){"use strict";a.r(t);var s=a(10),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"delayed-publish"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delayed-publish"}},[e._v("#")]),e._v(" Delayed publish")]),e._v(" "),a("p",[e._v("The delay-publish function of EMQX Broker can implement the function of delaying the PUBLISH packet publishing according to the time interval configured by the user. When a client publishes a message to EMQX Broker with the special topic prefix  "),a("code",[e._v("$delayed/{DelayInteval}")]),e._v(" , the delay-publish function is triggered.")]),e._v(" "),a("p",[e._v("The specific format of the delay-publish topic is as follows:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$delayed")]),e._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("DelayInterval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("TopicName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[e._v("$delayed")]),e._v(": Messages prefixed with "),a("code",[e._v("$delayed")]),e._v(" will be treated as messages that need to be delayed. The delay interval is determined by the content of the next topic level.")]),e._v(" "),a("li",[a("code",[e._v("{DelayInterval}")]),e._v(": Specify the time interval for delaying the publish of this MQTT message with the unit of second. The maximum allowed interval is 4294967 seconds. If "),a("code",[e._v("{DelayInterval}")]),e._v(" cannot be parsed as an integer number, EMQX Broker will discard the message and the client will not receive any information.")]),e._v(" "),a("li",[a("code",[e._v("{TopicName}")]),e._v(": The topic name of the MQTT message.")])]),e._v(" "),a("p",[e._v("E.g:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("$delayed/15/x/y")]),e._v(": Publish MQTT message to the topic "),a("code",[e._v("x/y")]),e._v(" after 15 seconds")]),e._v(" "),a("li",[a("code",[e._v("$delayed/60/a/b")]),e._v(": Publish MQTT message to the topic "),a("code",[e._v("a/b")]),e._v(" after 1 minute")]),e._v(" "),a("li",[a("code",[e._v("$delayed/3600/$SYS/topic")]),e._v(": Publish MQTT message to the topic  "),a("code",[e._v("$SYS/topic")]),e._v(" after 1 hour")])]),e._v(" "),a("p",[e._v("This feature is provided by the "),a("code",[e._v("emqx-delay-publish")]),e._v(" plugin, which is disabled by default. You need to enable the plugin to use this feature. For the method of enabling the plugin, please refer to "),a("RouterLink",{attrs:{to:"/en/enterprise/latest/advanced/plugins.html"}},[e._v("Plugins")]),e._v(". If you need to use this feature for a long time, then it is recommended that you set the plugin to start by default, see  "),a("RouterLink",{attrs:{to:"/en/enterprise/latest/getting-started/directory.html"}},[e._v("directory structure")]),e._v(" for more information.")],1)])}),[],!1,null,null,null);t.default=i.exports}}]);