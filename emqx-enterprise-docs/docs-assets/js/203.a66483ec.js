(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{1742:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"常见错误"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[s._v("#")]),s._v(" 常见错误")]),s._v(" "),n("h2",{attrs:{id:"emqx-无法连接-mysql-8-0"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#emqx-无法连接-mysql-8-0"}},[s._v("#")]),s._v(" EMQX 无法连接 MySQL 8.0")]),s._v(" "),n("p",[n("strong",[s._v("标签:")]),s._v(" "),n("RouterLink",{attrs:{to:"/zh/enterprise/latest/faq/tags.html#mysql"}},[n("em",[s._v("MySQL")])]),s._v(" "),n("RouterLink",{attrs:{to:"/zh/enterprise/latest/faq/tags.html#认证"}},[n("em",[s._v("认证")])])],1),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("4.3 已兼容 caching_sha2_password，该问题仅在 4.3 以下的版本中出现。")])]),s._v(" "),n("p",[s._v("不同于以往版本，MySQL 8.0 对账号密码配置默认使用"),n("code",[s._v("caching_sha2_password")]),s._v("插件，需要将密码插件改成"),n("code",[s._v("mysql_native_password")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("修改 "),n("code",[s._v("mysql.user")]),s._v(" 表")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("## 切换到 mysql 数据库\nmysql> use mysql;\n\n## 查看 user 表\n\nmysql> select user, host, plugin from user;\n+------------------+-----------+-----------------------+\n| user             | host      | plugin                |\n+------------------+-----------+-----------------------+\n| root             | %         | caching_sha2_password |\n| mysql.infoschema | localhost | caching_sha2_password |\n| mysql.session    | localhost | caching_sha2_password |\n| mysql.sys        | localhost | caching_sha2_password |\n| root             | localhost | caching_sha2_password |\n+------------------+-----------+-----------------------+\n\n## 修改密码插件\nmysql> ALTER USER 'your_username'@'your_host' IDENTIFIED WITH mysql_native_password BY 'your_password';\nQuery OK, 0 rows affected (0.01 sec)\n\n## 刷新\nmysql> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("修改 "),n("code",[s._v("my.conf")])]),s._v(" "),n("p",[s._v("在 "),n("code",[s._v("my.cnf")]),s._v(" 配置文件里面的 [mysqld] 下面加一行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("default_authentication_plugin=mysql_native_password\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("重启 MySQL 即可")])])]),s._v(" "),n("h2",{attrs:{id:"openssl-版本不正确"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openssl-版本不正确"}},[s._v("#")]),s._v(" OPENSSL 版本不正确")]),s._v(" "),n("p",[n("strong",[s._v("标签:")]),s._v(" "),n("RouterLink",{attrs:{to:"/zh/enterprise/latest/faq/tags.html#启动失败"}},[n("em",[s._v("启动失败")])])],1),s._v(" "),n("h3",{attrs:{id:"现象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#现象"}},[s._v("#")]),s._v(" 现象")]),s._v(" "),n("p",[s._v("执行  "),n("code",[s._v("./bin/emqx console")]),s._v(" 输出的错误内容包含：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("application_start_failure,kernel,"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("shutdown,"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("failed_to_start_child,kernel_safe_sup,"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("on_load_function_failed,crypto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("它表示，EMQX 依赖的 Erlang/OTP 中的 "),n("code",[s._v("crypto")]),s._v(" 应用启动失败。")]),s._v(" "),n("h3",{attrs:{id:"解决方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),n("h4",{attrs:{id:"linux"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),n("p",[s._v("进入到 EMQX 的安装目录（如果使用包管理工具安装 EMQX，则应该进入与 EMQX 的 "),n("code",[s._v("lib")]),s._v(" 目录同级的位置）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装包安装")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 包管理器安装，例如 yum。则它的 lib 目录应该在 /lib/emqx")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/emqx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("查询 "),n("code",[s._v("crypto")]),s._v("依赖的 "),n("code",[s._v(".so")]),s._v(" 动态库列表及其在内存中的地址：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ ldd lib/crypto-*/priv/lib/crypto.so\n\nlib/crypto-4.6/priv/lib/crypto.so: /lib64/libcrypto.so.10: version `OPENSSL_1.1.1' not found "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("required by lib/crypto-4.6/priv/lib/crypto.so"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        linux-vdso.so.1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fff67bfc000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        libcrypto.so.10 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libcrypto.so.10 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee749ca000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        libc.so.6 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libc.so.6 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74609000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        libdl.so.2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libdl.so.2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74404000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        libz.so.1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /lib64/libz.so.1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee741ee000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        /lib64/ld-linux-x86-64.so.2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0x00007fee74fe5000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("其中 "),n("code",[s._v("OPENSSL_1.1.1' not found")]),s._v("表明指定的 OPENSSL 版本的 "),n("code",[s._v(".so")]),s._v(" 库未正确安装。")]),s._v(" "),n("p",[s._v("源码编译安装 OPENSSL 1.1.1，并将其 so 文件放置到可以被系统识别的路径：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 下在最新版本 1.1.1")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.openssl.org/source/openssl-1.1.1c.tar.gz\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 上传至 ct-test-ha")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" openssl-1.1.1c.tar.gz ct-test-ha:~/\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 解压并编译安装")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxf   openssl-1.1.1c.tar.gz\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openssl-1.1.1c\n$ ./config\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("   \t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行测试；如果输出 PASS 则继续")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 确保库的引用")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/lib64/libssl.so.1.1 /usr/lib64/libssl.so.1.1\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("完成后，执行在 EMQX 的 lib 同级目录下执行 "),n("code",[s._v("ldd lib/crypto-*/priv/lib/crypto.so")]),s._v(" ，检查是否已能正确识别。如果不在有 "),n("code",[s._v("not found")]),s._v(" 的 "),n("code",[s._v(".so")]),s._v(" 库，即可正常启动 EMQX。")]),s._v(" "),n("h4",{attrs:{id:"macos"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[s._v("#")]),s._v(" macOS")]),s._v(" "),n("p",[s._v("进入到 EMQX 的安装目录：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 安装包安装")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emqx\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## brew 安装")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/Cellar/emqx/"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("version"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("查询 "),n("code",[s._v("crypto")]),s._v("依赖的 "),n("code",[s._v(".so")]),s._v(" 动态库列表：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ otool -L lib/crypto-*/priv/lib/crypto.so\n\nlib/crypto-4.4.2.1/priv/lib/crypto.so:\n\t/usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compatibility version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0, current version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t/usr/lib/libSystem.B.dylib "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("compatibility version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0, current version "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1252.200")]),s._v(".5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("检查其显示 OPENSSL 已成功安装至指定的目录：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib\nls: /usr/local/opt/openssl@1.1/lib/libcrypto.1.1.dylib: No such "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("若不存在该文件，则需安装与 "),n("code",[s._v("otool")]),s._v(" 打印出来的对应的 OPENSSL  版本，例如此处显示的为 "),n("code",[s._v("openssl@1.1")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ brew "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssl@1.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("安装完成后，即可正常启动 EMQX。")]),s._v(" "),n("h2",{attrs:{id:"windows-缺失-msvcr120-dll"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#windows-缺失-msvcr120-dll"}},[s._v("#")]),s._v(" Windows 缺失 MSVCR120.dll")]),s._v(" "),n("p",[n("strong",[s._v("标签:")]),s._v(" "),n("RouterLink",{attrs:{to:"/zh/enterprise/latest/faq/tags.html#启动失败"}},[n("em",[s._v("启动失败")])])],1),s._v(" "),n("h3",{attrs:{id:"现象-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#现象-2"}},[s._v("#")]),s._v(" 现象")]),s._v(" "),n("p",[s._v("Windows 执行  "),n("code",[s._v("./bin/emqx console")]),s._v(" 弹出错误窗口：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("无法启动次程序，因为计算机中丢失 MSVCR120.dll。请尝试重新安装该程序以解决此问题。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:t(983),alt:"error"}})]),s._v(" "),n("h3",{attrs:{id:"解决方法-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方法-2"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),n("p",[s._v("安装 "),n("a",{attrs:{href:"https://www.microsoft.com/en-us/download/search.aspx?q=redistributable+package.",target:"_blank",rel:"noopener noreferrer"}},[s._v("Microsoft Visual C++ RedistributablePackage"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"ssl-连接失败"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssl-连接失败"}},[s._v("#")]),s._v(" SSL 连接失败")]),s._v(" "),n("h3",{attrs:{id:"现象-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#现象-3"}},[s._v("#")]),s._v(" 现象")]),s._v(" "),n("p",[s._v("客户端无法与 EMQX 建立 SSL 连接。")]),s._v(" "),n("h3",{attrs:{id:"解决方法-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方法-3"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),n("p",[s._v("可以借助 EMQX 日志中的关键字来进行简单的问题排查，EMQX 日志相关内容请参考："),n("RouterLink",{attrs:{to:"/zh/enterprise/latest/getting-started/log.html"}},[s._v("日志与追踪")]),s._v("。")],1),s._v(" "),n("ol",[n("li",[n("p",[s._v("certificate_expired")]),s._v(" "),n("p",[s._v("日志中出现 "),n("code",[s._v("certificate_expired")]),s._v(" 关键字，说明证书已经过期，请及时续签。")])]),s._v(" "),n("li",[n("p",[s._v("no_suitable_cipher")]),s._v(" "),n("p",[s._v("日志中出现 "),n("code",[s._v("no_suitable_cipher")]),s._v(" 关键字，说明握手过程中没有找到合适的密码套件，可能原因有证书类型与密码套件不匹配、没有找到服务端和客户端同时支持的密码套件等等。")])]),s._v(" "),n("li",[n("p",[s._v("handshake_failure")]),s._v(" "),n("p",[s._v("日志中出现 "),n("code",[s._v("handshake_failure")]),s._v(" 关键字，原因有很多，可能要结合客户端的报错来分析，例如，可能是客户端发现连接的服务器地址与服务器证书中的域名不匹配。")])]),s._v(" "),n("li",[n("p",[s._v("unknown_ca")]),s._v(" "),n("p",[s._v("日志中出现 "),n("code",[s._v("unknown_ca")]),s._v(" 关键字，意味着证书校验失败，常见原因有遗漏了中间 CA 证书、未指定 Root CA 证书或者指定了错误的 Root CA 证书。在双向认证中我们可以根据日志中的其他信息来判断是服务端还是客户端的证书配置出错。如果是服务端证书存在问题，那么报错日志通常为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{ssl_error,{tls_alert,{unknown_ca,"TLS server: In state certify received CLIENT ALERT: Fatal - Unknown CA\\n"}}}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("看到 "),n("code",[s._v("CLIENT ALERT")]),s._v(" 就可以得知，这是来自客户端的警告信息，服务端证书未能通过客户端的检查。")]),s._v(" "),n("p",[s._v("如果是客户端证书存在问题，那么报错日志通常为：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{ssl_error,{tls_alert,{unknown_ca,"TLS server: In state certify at ssl_handshake.erl:1887 generated SERVER ALERT: Fatal - Unknown CA\\n"}}}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("看到 "),n("code",[s._v("SERVER ALERT")]),s._v(" 就能够得知，表示服务端在检查客户端证书时发现该证书无法通过认证，而客户端将收到来自服务端的警告信息。")])]),s._v(" "),n("li",[n("p",[s._v("protocol_version")]),s._v(" "),n("p",[s._v("日志中出现 "),n("code",[s._v("protocol_version")]),s._v(" 关键字，说明客户端与服务器支持的 TLS 协议版本不匹配。")])])])])}),[],!1,null,null,null);a.default=e.exports},983:function(s,a,t){s.exports=t.p+"docs-assets/img/WechatIMG18396.34adca34.png"}}]);