(window.webpackJsonp=window.webpackJsonp||[]).push([[395],{1840:function(e,t,r){"use strict";r.r(t);var _=r(10),a=Object(_.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"prometheus-监控告警"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#prometheus-监控告警"}},[e._v("#")]),e._v(" Prometheus 监控告警")]),e._v(" "),r("blockquote",[r("p",[e._v("从 EMQX Enterprise v4.1.0 开始，emqx_statsd 更名为 emqx_prometheus，相关插件名称、目录均有变更。")])]),e._v(" "),r("p",[e._v("EMQX 提供 "),r("a",{attrs:{href:"https://github.com/emqx/emqx-prometheus",target:"_blank",rel:"noopener noreferrer"}},[e._v("emqx_prometheus"),r("OutboundLink")],1),e._v(" 插件，用于将系统的监控数据输出到第三方的监控系统中。")]),e._v(" "),r("p",[e._v("以 "),r("a",{attrs:{href:"https://prometheus.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Prometheus"),r("OutboundLink")],1),e._v(" 为例：")]),e._v(" "),r("p",[r("code",[e._v("emqx_prometheus")]),e._v(" 支持将数据推送至 Pushgateway 中，然后再由 Promethues Server 拉取进行存储。")]),e._v(" "),r("p",[e._v("注意："),r("code",[e._v("emqx_prometheus")]),e._v(" 不支持 Prometheus 的 Pull 操作。")]),e._v(" "),r("h2",{attrs:{id:"配置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),r("p",[r("code",[e._v("emqx_prometheus")]),e._v(" 插件内部会启动一个定时器，使其每间隔一段时间便采集 EMQX 中的监控数据。")]),e._v(" "),r("p",[r("code",[e._v("emqx_prometheus")]),e._v(" 推送的监控数据包含的具体字段和含义，参见："),r("RouterLink",{attrs:{to:"/zh/enterprise/latest/advanced/metrics-and-stats.html"}},[e._v("Metrics & Stats")])],1),e._v(" "),r("p",[e._v("配置文件位于 "),r("code",[e._v("etc/plugins/emqx_prometheus.conf")]),e._v("，其中：")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("配置项")]),e._v(" "),r("th",[e._v("类型")]),e._v(" "),r("th",[e._v("可取值")]),e._v(" "),r("th",[e._v("默认值")]),e._v(" "),r("th",[e._v("说明")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("push.gateway.server")]),e._v(" "),r("td",[e._v("string")]),e._v(" "),r("td",[e._v("-")]),e._v(" "),r("td",[e._v("http://127.0.0.1:9091")]),e._v(" "),r("td",[e._v("Prometheus 的 PushGateway 地址")])]),e._v(" "),r("tr",[r("td",[e._v("interval")]),e._v(" "),r("td",[e._v("integer")]),e._v(" "),r("td",[e._v("> 0")]),e._v(" "),r("td",[e._v("5000")]),e._v(" "),r("td",[e._v("推送间隔，单位：毫秒")])])])]),e._v(" "),r("h3",{attrs:{id:"grafana-数据模板"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#grafana-数据模板"}},[e._v("#")]),e._v(" Grafana 数据模板")]),e._v(" "),r("p",[r("code",[e._v("emqx_prometheus")]),e._v(" 插件提供了 Grafana 的 Dashboard 的模板文件。这些模板包含了所有 EMQX 监控数据的展示。用户可直接导入到 Grafana 中，进行显示 EMQX 的监控状态的图标。")]),e._v(" "),r("p",[e._v("模板文件位于："),r("a",{attrs:{href:"https://github.com/emqx/emqx-prometheus/tree/master/grafana_template",target:"_blank",rel:"noopener noreferrer"}},[e._v("emqx_prometheus/grafana_template"),r("OutboundLink")],1),e._v("。")])])}),[],!1,null,null,null);t.default=a.exports}}]);