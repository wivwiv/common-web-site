(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{1604:function(e,t,s){"use strict";s.r(t);var a=s(10),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"data-to-hstreamdb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-to-hstreamdb"}},[e._v("#")]),e._v(" Data to HStreamDB")]),e._v(" "),a("p",[e._v("HStreamDB is a streaming database designed for streaming data, with complete lifecycle management for accessing, storing, processing, and distributing large-scale real-time data streams. It uses standard SQL (and its stream extensions) as the primary interface language, with real-time as the main feature, and aims to simplify the operation and management of data streams and the development of real-time applications.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(685),alt:"image"}})]),e._v(" "),a("p",[e._v("For more details, please refer to "),a("a",{attrs:{href:"https://hstream.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("HStream official website"),a("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),a("h2",{attrs:{id:"create-hstreamdb-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-hstreamdb-server"}},[e._v("#")]),e._v(" Create HStreamDB Server")]),e._v(" "),a("p",[e._v("Refer to the following "),a("a",{attrs:{href:"https://hstream.io/docs/en/latest/start/quickstart-with-docker.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("documents"),a("OutboundLink")],1),e._v(" for deployment instructions, which provide tutorials on deploying with docker locally or on the cloud.")]),e._v(" "),a("p",[e._v("Use the command to start an hstream-client")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker run -it --rm --name some-hstream-cli --network "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("host")]),e._v(" hstreamdb/hstream:v0.8.0 hstream-client --port "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("6570")]),e._v(" --client-id "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("When entering the console, help info like these will be shown:")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("      __  _________________  _________    __  ___\n     / / / / ___/_  __/ __ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("/ ____/   "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("  /  "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("/  /\n    / /_/ /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("__ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v(" / / / /_/ / __/ / /"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" / /"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("_/ /\n   / __  /___/ // / / _, _/ /___/ ___ "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("/ /  / /\n  /_/ /_//____//_/ /_/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("_/_____/_/  "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("_/_/  /_/\n\n\nCommand\n  :h                           To show these "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("help")]),e._v(" info\n  :q                           To "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exit")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("command")]),e._v(" line interface\n  :help "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("sql_operation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("        To show full usage of sql statement\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br")])]),a("p",[e._v("Create stream:")]),e._v(" "),a("div",{staticClass:"language-SQL line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("CREATE")]),e._v(" STREAM demo_stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\ndemo_stream\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SHOW")]),e._v(" STREAMS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\ndemo_stream\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"create-hstreamdb-resource"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-hstreamdb-resource"}},[e._v("#")]),e._v(" Create HStreamDB resource")]),e._v(" "),a("p",[e._v("Access EMQX Dashboard, Click on Rules Engine, Resources, Create, select HStreamDB Resources, enter the resource address and link pool.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(686),alt:"image"}})]),e._v(" "),a("h2",{attrs:{id:"create-rule"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-rule"}},[e._v("#")]),e._v(" Create Rule")]),e._v(" "),a("p",[e._v("Click on "),a("code",[e._v("Rules Engine")]),e._v(" > "),a("code",[e._v("Resources")]),e._v(" > "),a("code",[e._v("Create")]),e._v(", then select resources type HStreamDB.")]),e._v(" "),a("p",[e._v("Edit the rule SQL.")]),e._v(" "),a("div",{staticClass:"language-SQL line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v("\n\n  payload\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"#"')]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("The SQL rules in the document are for demonstrations only, please write the SQL according to the business design.")]),e._v(" "),a("p",[e._v("Click Add Action and select Data Persistence to save the data to HSTreamDB.\nSelect the resource created in the previous step and enter the parameters, which are defined in the following table.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Parameter")]),e._v(" "),a("th",[e._v("Definition")]),e._v(" "),a("th",[e._v("Type")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Stream")]),e._v(" "),a("td",[e._v("Stream Name, Cannot be placeholders")]),e._v(" "),a("td",[e._v("String")])]),e._v(" "),a("tr",[a("td",[e._v("Ordering Key")]),e._v(" "),a("td",[e._v("Cannot be placeholders")]),e._v(" "),a("td",[e._v("String")])]),e._v(" "),a("tr",[a("td",[e._v("Enable Batch Append")]),e._v(" "),a("td",[e._v("Enable or disable batch appending, default is true")]),e._v(" "),a("td",[e._v("Boolean")])]),e._v(" "),a("tr",[a("td",[e._v("Max Batch Append Count")]),e._v(" "),a("td",[e._v("Maximum number of message entries in a batch")]),e._v(" "),a("td",[e._v("Integer")])]),e._v(" "),a("tr",[a("td",[e._v("Max Batch Interval(ms)")]),e._v(" "),a("td",[e._v("Batch maximum interval, in milliseconds")]),e._v(" "),a("td",[e._v("Integer")])]),e._v(" "),a("tr",[a("td",[e._v("Payload Template")]),e._v(" "),a("td",[e._v("Content of the data message written")]),e._v(" "),a("td",[e._v("Binary")])])])]),e._v(" "),a("p",[e._v("Click "),a("code",[e._v("Confirm")]),e._v(" to create it.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(687),alt:"image"}})]),e._v(" "),a("p",[e._v("Now use the state-of-the-art MQTT desktop client "),a("code",[e._v("MQTTX")]),e._v(" to connect to EMQX and send a message.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(688),alt:"image"}})]),e._v(" "),a("p",[e._v("See rule monitor.")]),e._v(" "),a("p",[a("img",{attrs:{src:s(689),alt:"image"}})]),e._v(" "),a("p",[e._v("At this point the data is written to HStreamDB and the message is consumed using any consumption method. The documentation uses a simple consumption tool based on the HStream golang SDK, and the reader is free to write the consumption side according to a familiar programming language. The consumption log can be seen as follows.\nTest tool see "),a("a",{attrs:{href:"https://github.com/hstreamdb/fetcher",target:"_blank",rel:"noopener noreferrer"}},[e._v("fetcher"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./fetcher -s f1 -n demo_stream -p "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1:6570 -c cons1 -v\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"level"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"info"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ts"')]),e._v(":1656311005.5250711,"),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"[f1]"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"recordId"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"[BatchId: 8589934593, BatchIndex: 0, ShardId: 1317059070792293]"')]),e._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"payload"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Hello HSreamDB !"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("The message has been written successfully and is consumed to completion.")])])}),[],!1,null,null,null);t.default=n.exports},685:function(e,t,s){e.exports=s.p+"docs-assets/img/HStream.01b165c3.png"},686:function(e,t,s){e.exports=s.p+"docs-assets/img/create_resource.bc300c72.png"},687:function(e,t,s){e.exports=s.p+"docs-assets/img/create_rule.7070442c.png"},688:function(e,t,s){e.exports=s.p+"docs-assets/img/send_msg.cc2a8c2d.png"},689:function(e,t,s){e.exports=s.p+"docs-assets/img/rule_res.9d715d93.png"}}]);